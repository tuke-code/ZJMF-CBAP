{"version":3,"file":"static/js/440.35b933ad.chunk.js","mappings":"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","sources":["api/cloud.js","api/storage.js","components/payModal/PayModal.jsx","../node_modules/@ant-design/icons-svg/es/asn/MinusCircleOutlined.js","../node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js","../node_modules/antd/es/col/index.js","../node_modules/antd/es/row/index.js"],"sourcesContent":["/* 实例 */\r\nimport request from \"../utils/request\";\r\n\r\n// 获取数据中心\r\nexport function getDataCenter (id) {\r\n  return request.get(`/product/${id}/idcsmart_cloud/data_center`);\r\n}\r\n// 获取宽带类型\r\nexport function getBwType (id) {\r\n  return request.get(`/product/${id}/idcsmart_cloud/bw_type`);\r\n}\r\n// 计算能力\r\nexport function getPackage (params) {\r\n  return request.get(`/product/${params.product_id}/idcsmart_cloud/package`, {\r\n    params,\r\n  });\r\n}\r\n// 操作系统\r\nexport function getSystem (params) {\r\n  return request.get(\r\n    `/product/${params.product_id}/idcsmart_cloud/system_image`,\r\n    { params }\r\n  );\r\n}\r\n// vpc\r\nexport function getVpc (params) {\r\n  return request.get(`/vpc`, { params });\r\n}\r\n// 安全组\r\nexport function getGroup (params) {\r\n  return request.get(`/security_group`, { params });\r\n}\r\n// 获取其他配置\r\nexport function getSetting (id) {\r\n  return request.get(`/product/${id}/idcsmart_cloud/config`);\r\n}\r\n// 周期\r\nexport function getDurationPprice (params) {\r\n  return request.get(`/idcsmart_cloud/duration_price`, { params });\r\n}\r\n// 修改配置计算价格package_id,image_id,backup_enable,panel_enable\r\nexport function updatePrice (params) {\r\n  return request.post(`/product/${params.product_id}/config_option`, params);\r\n}\r\n\r\n// 结算商品\r\nexport function settleProduct (params) {\r\n  return request.post(`/product/settle`, params);\r\n}\r\n\r\n// 使用优惠码\r\nexport function usePromoCode (params) {\r\n  return request.post(`/promo_code/apply`, params);\r\n}\r\n\r\n// 支付{id: 订单id,gateway:支付方式}\r\nexport function onlinePay (params) {\r\n  return request.post(`/pay`, params);\r\n}\r\n// 使用余额支付{id:订单id,use:1使用，0取消}\r\nexport function creditPay (params) {\r\n  return request.post(`/credit`, params);\r\n}\r\n// 获取支付状态\r\nexport function getPayStatus (id) {\r\n  return request.get(`/pay/${id}/status`);\r\n}\r\n\r\n// 订单详情\r\nexport function getOrderDetail (id) {\r\n  return request.get(`/order/${id}`);\r\n}\r\n/* 实例列表 */\r\nexport function getCloudList (params) {\r\n  return request.get(`/idcsmart_cloud`, { params });\r\n}\r\n// 支付接口\r\nexport function payWayList () {\r\n  return request.get(`/gateway`);\r\n}\r\n\r\n// 账号余额\r\nexport function getUserDetail () {\r\n  return request.get(`/account`);\r\n}\r\n\r\n// 实例详情\r\nexport function getCloudDetail (id) {\r\n  return request.get(`/idcsmart_cloud/${id}`);\r\n}\r\n// ssh key\r\nexport function getSshkey (params) {\r\n  return request.get(`/ssh_key`, { params });\r\n}\r\n// cloud日志\r\nexport function getLog (params) {\r\n  return request.get(`/idcsmart_cloud/${params.id}/log`, { params });\r\n}\r\n\r\n// 获取产品下的磁盘\r\nexport function getDiskById (id) {\r\n  return request.get(`/idcsmart_cloud/${id}/disk`)\r\n}\r\n\r\n// 获取磁盘列表详情\r\nexport function getDisk (params) {\r\n  return request.get(`idcsmart_cloud_disk`, { params });\r\n}\r\n\r\n// 卸载磁盘\r\nexport function umount (id) {\r\n  return request.put(`/idcsmart_cloud_disk/${id}/umount`);\r\n}\r\n\r\n// 删除磁盘\r\nexport function delDisk (id) {\r\n  return request.delete(`/idcsmart_cloud_disk/${id}`);\r\n}\r\n\r\n// 挂载磁盘\r\nexport function mount (params) {\r\n  return request.put(`idcsmart_cloud_disk/${params.id}/mount`, params);\r\n}\r\n\r\n// 扩容磁盘\r\nexport function expansion (params) {\r\n  return request.put(`idcsmart_cloud_disk/${params.id}/expansion`, { params });\r\n}\r\n\r\n// 快照\r\n// 快照列表\r\nexport function snapshot (params) {\r\n  return request.get(`idcsmart_cloud/${params.id}/snapshot`, { params });\r\n}\r\n// 创建快照\r\nexport function createSnapshot (params) {\r\n  return request.post(`idcsmart_cloud/${params.id}/snapshot`, params)\r\n}\r\n// 快照还原\r\nexport function restoreSnapshot (params) {\r\n  return request.post(`idcsmart_cloud/${params.id}/snapshot/restore`, params)\r\n}\r\n// 删除快照\r\nexport function delSnapshot (params) {\r\n  return request.delete(`idcsmart_cloud/${params.id}/snapshot/${params.snapshot_id}`)\r\n}\r\n\r\n// 备份列表\r\nexport function backup (params) {\r\n  return request.get(`idcsmart_cloud/${params.id}/backup`, { params });\r\n}\r\n\r\n// 创建备份\r\nexport function createBackup (params) {\r\n  return request.post(`idcsmart_cloud/${params.id}/backup`, params)\r\n}\r\n// 备份还原\r\nexport function restoreBackup (params) {\r\n  return request.post(`idcsmart_cloud/${params.id}/backup/restore`, params)\r\n}\r\n// 删除备份\r\nexport function delBackup (params) {\r\n  return request.delete(`idcsmart_cloud/${params.id}/backup/${params.backup_id}`)\r\n}\r\n\r\n// 产品详情\r\nexport function host (id) {\r\n  return request.get(`host/${id}`)\r\n}\r\n\r\n// 停用页面信息\r\nexport function refund (params) {\r\n  return request.get(`refund`, { params })\r\n}\r\n\r\n// 申请停用\r\nexport function postRefund (params) {\r\n  return request.post(`refund`, params)\r\n}\r\n\r\n// 取消停用\r\nexport function quitRefund (params) {\r\n  return request.put(`refund/${params.id}/cancel`)\r\n}\r\n\r\n// 续费页面信息\r\nexport function renew (params) {\r\n  return request.get(`host/${params.id}/renew`, { params })\r\n}\r\n\r\n// 续费\r\nexport function doRenw (params) {\r\n  return request.post(`host/${params.id}/renew`, params)\r\n}\r\n\r\n// 升降级配置\r\nexport function getupgradeOp (params) {\r\n  return request.get(`/host/${params.id}/upgrade/config_option`, { params });\r\n}\r\n\r\n//获取图表数据\r\nexport function chartdata (params) {\r\n  return request.get(`/idcsmart_cloud/${params.id}/chart`, { params });\r\n}\r\n//获取当前VPC网络\r\nexport function vpcdata (params) {\r\n  return request.get(`/idcsmart_cloud/${params.id}/vpc`, { params });\r\n}\r\n// 切换vpc网络\r\nexport function changeVpc (params) {\r\n  return request.put(`/idcsmart_cloud/${params.id}/vpc`, params);\r\n}\r\n//获取网络流量\r\nexport function flowdata (params) {\r\n  return request.get(`/idcsmart_cloud/${params.id}/flow`, { params });\r\n}\r\n\r\n//  获取产品停用信息\r\nexport function refundMsg (id) {\r\n  return request.get(`/refund/host/${id}/refund`)\r\n}\r\n\r\n// 获取升降级套餐价格\r\nexport function getPackagePrice (params) {\r\n  return request.get(`/idcsmart_cloud/${params.id}/package/upgrade`, { params })\r\n}\r\n// 生成升降级套餐订单\r\nexport function createPackageId (params) {\r\n  return request.post(`/idcsmart_cloud/${params.id}/package/upgrade/order`, params)\r\n}\r\n\r\n// 修改概述页面备注\r\nexport function changeNotes (params) {\r\n  return request.put(`/host/${params.id}/notes`, params);\r\n}","// 存储（磁盘）\r\nimport request from '../utils/request'\r\n\r\n/* 魔方云磁盘产品列表 */\r\nexport function storageList(params) {\r\n    return request.get(`/idcsmart_cloud_disk`, { params });\r\n}\r\n\r\n// 挂载磁盘\r\nexport function mountStorage(params) {\r\n    return request.put(`/idcsmart_cloud_disk/${params.id}/mount`, params);\r\n}\r\n// 卸载磁盘\r\nexport function unmountStorage(params) {\r\n    return request.put(`/idcsmart_cloud_disk/${params.id}/umount`, params);\r\n}\r\n// 删除磁盘\r\nexport function delStorage(params) {\r\n    return request.delete(`/idcsmart_cloud_disk/${params.id}`, params);\r\n}\r\n// 扩容磁盘\r\nexport function expansionStorage(params) {\r\n    return request.put(`/idcsmart_cloud_disk/${params.id}/expansion`, params);\r\n}\r\n\r\n// 获取磁盘升降级配置\r\nexport function diskPackage(params) {\r\n    return request.get(`/idcsmart_cloud_disk/${params.id}/package`, { params });\r\n}\r\n\r\n// 停用页面信息\r\nexport function refundPage(params) {\r\n    return request.get(`/refund`, { params });\r\n}\r\n// 获取停用产品信息\r\nexport function refundMsg(params) {\r\n    return request.get(`/refund/host/${params.id}/refund`, { params });\r\n}\r\n// 停用\r\nexport function refund(params) {\r\n    return request.post(`/refund`, params);\r\n}\r\n\r\n\r\n/* 获取实例 */\r\nexport function getCloudListAll() {\r\n    return request.get(`/idcsmart_cloud/all`);\r\n}\r\n\r\n/* 获取实例详情 */\r\nexport function getCloudById(params) {\r\n    return request.get(`/idcsmart_cloud/${params.id}`);\r\n}\r\n\r\n// 结算商品\r\nexport function settle(params) {\r\n    return request.post(`/product/settle`, params)\r\n}\r\n\r\n// 商品配置页面\r\nexport function getConfigOptionPage(params) {\r\n    return request.get(`/product/${params.id}/config_option`, { params })\r\n}\r\n\r\n// 修改配置计算价格\r\nexport function getConfigOptionPrice(params) {\r\n    return request.post(`/product/${params.id}/config_option`, params)\r\n}\r\n\r\n// 魔方云磁盘配置周期价格\r\nexport function getDurationPrice(params) {\r\n    return request.get(`/idcsmart_cloud_disk/duration_price`, { params })\r\n}\r\n\r\n// 魔方云磁盘订购页面实例配置\r\nexport function configPackage(params) {\r\n    return request.get(`/product/${params.id}/idcsmart_cloud_disk/package`, { params })\r\n}","import React, { useState, useEffect, useReducer, useRef } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport \"./PayModal.css\";\r\nimport { showDialog } from '@/utils/util'\r\nimport {\r\n  message, Select, Checkbox, Input,\r\n  Button,\r\n  Modal,\r\n} from \"antd\";\r\nimport * as cloud from \"@/api/cloud\";\r\nconst { Option } = Select\r\nexport default function PayModal (props) {\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate()\r\n  // 订单详情\r\n  const [orderDetail, setOrderDetail] = useState({});\r\n  // 当前选择的支付方式\r\n  const [curPay, setCurPay] = useState(\"\");\r\n  // 用户信息\r\n  const [user, setUser] = useState({});\r\n  // 是否使用余额\r\n  const [balanceChecked, setBalanceChecked] = useState(false);\r\n  // 支付方式\r\n  const [payList, setPayList] = useState([]);\r\n  // 三方支付的html\r\n  const [payHtml, setPayHtml] = useState(\"\");\r\n  // 是否展示第三方支付\r\n  const [isShowPay, setIsShowPay] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n  /* 数据请求 */\r\n  // 获取订单详情\r\n  const getOrderDetail = async () => {\r\n    try {\r\n      const res = await cloud.getOrderDetail(props.orderId);\r\n      setOrderDetail(res.data.data.order);\r\n    } catch (error) {\r\n      message.error(error.data.msg);\r\n    }\r\n  };\r\n  // 获取用户信息\r\n  const getUser = async () => {\r\n    try {\r\n      const res = await cloud.getUserDetail();\r\n      setUser(res.data.data);\r\n    } catch (error) {\r\n      message.error(error.data.msg);\r\n    }\r\n  };\r\n  // 支付方式\r\n  const getPayWay = async () => {\r\n    try {\r\n      const res = await cloud.payWayList();\r\n      setPayList(res.data.data.list);\r\n      setCurPay(res.data.data.list[0].name);\r\n      // 初始化调用一次支付接口\r\n      initPay(res.data.data.list[0].name)\r\n    } catch (error) {\r\n      console.log(error)\r\n      message.error(error.data.msg);\r\n    }\r\n  };\r\n  // 初始化调用\r\n  const initPay = async (name) => {\r\n    try {\r\n      const params = {\r\n        gateway: name,\r\n        id: props.orderId,\r\n      };\r\n      // 使用其他第三方的支付方式\r\n      const res = await cloud.onlinePay(params);\r\n      setPayHtml(res.data.data.html);\r\n    } catch (error) {\r\n    }\r\n  }\r\n  // 切换支付方式\r\n  const changePayWay = async (e, id) => {\r\n    console.log(e)\r\n    setCurPay(e);\r\n    // 如果账户余额 大于 订单金额 && 勾选了余额支付 阻止调用\r\n    if (\r\n      Number(user.account.credit) >= Number(orderDetail.amount) &&\r\n      balanceChecked\r\n    ) {\r\n      return false;\r\n    }\r\n    try {\r\n      const params = {\r\n        gateway: e,\r\n        id: (typeof id !== \"object\" && id) || props.orderId,\r\n      };\r\n      // 使用其他第三方的支付方式\r\n      const res = await cloud.onlinePay(params);\r\n      setPayHtml(res.data.data.html);\r\n    } catch (error) { }\r\n  };\r\n  /* 事件处理 */\r\n  // 通过余额支付\r\n  const handleOk = async () => {\r\n    try {\r\n      setLoading(true)\r\n      const params = {\r\n        gateway: curPay,\r\n        id: props.orderId,\r\n      };\r\n      await cloud.onlinePay(params);\r\n      setLoading(false)\r\n    } catch (error) {\r\n      setLoading(false)\r\n    }\r\n  };\r\n  // 使用余额\r\n  const useBalance = async (e) => {\r\n    setBalanceChecked(e.target.checked);\r\n    if (!e.target.checked) {\r\n      setIsShowPay(true)\r\n    }\r\n    try {\r\n      const res = await cloud.creditPay({\r\n        id: props.orderId,\r\n        use: e.target.checked ? 1 : 0,\r\n      });\r\n      const tempId = res.data.data.id;\r\n      const result = await cloud.getOrderDetail(tempId);\r\n      const orderRes = result.data.data.order;\r\n      // 勾选余额，如果账户的余额大于订单金额，则使用余额支付\r\n      if (e.target.checked) {\r\n        if (Number(user.account.credit) >= Number(orderRes.amount)) {\r\n          setIsShowPay(false);\r\n        } else {\r\n          setIsShowPay(true);\r\n          changePayWay(curPay, tempId);\r\n        }\r\n      } else {\r\n        // 小于的话重新拉取支付\r\n        changePayWay(curPay, tempId);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  // 取消支付\r\n  const handleCancel = () => {\r\n    if (props.handleCancel) {\r\n      props.handleCancel()\r\n      return\r\n    }\r\n    clearInterval(props.timer);\r\n    navigate(\"/finance/order\", { replace: true });\r\n  };\r\n  useEffect(async () => {\r\n    await getOrderDetail()\r\n    await getUser()\r\n    await getPayWay()\r\n  }, [])\r\n  const visible = props.visible !== undefined ? props.visible : true\r\n  return (\r\n    <>\r\n      {/* 支付弹窗 */}\r\n      <Modal\r\n        visible={visible}\r\n        title={t(\"common.pay\")}\r\n        onOk={handleOk}\r\n        onCancel={handleCancel}\r\n        className=\"pay-modal\"\r\n        closable={false}\r\n        footer={\r\n          !isShowPay && [\r\n            <Button\r\n              key=\"submit\"\r\n              className=\"sure\"\r\n              loading={loading}\r\n              onClick={handleOk}\r\n            >\r\n              {t(\"cloud.sure_pay\")}\r\n            </Button>,\r\n            <Button key=\"back\" onClick={handleCancel} className=\"cancel\">\r\n              {t(\"common.cancel\")}\r\n            </Button>,\r\n          ]\r\n        }\r\n      >\r\n        <div className=\"cloud-pay-box\">\r\n          <div className=\"item first\">\r\n            <div className=\"l-text\">{t(\"common.pay_way\")}</div>\r\n            <div className=\"r-text\">\r\n              {payList.length > 0 && (\r\n                <Select value={curPay} onChange={changePayWay}>\r\n                  {payList.map((item) => {\r\n                    return (\r\n                      <Option value={item.name} key={item.id}>\r\n                        {item.title}\r\n                      </Option>\r\n                    );\r\n                  })}\r\n                </Select>\r\n              )}\r\n              <Checkbox onChange={useBalance} checked={balanceChecked}>\r\n                {t(\"cloud.use_balance\")}\r\n              </Checkbox>\r\n            </div>\r\n          </div>\r\n          <div className=\"item\">\r\n            <div className=\"l-text\">{t(\"cloud.order_amount\")}</div>\r\n            <div className=\"r-text order-num\">￥&nbsp;{orderDetail.amount}</div>\r\n          </div>\r\n          <div className=\"item last\">\r\n            <div className=\"l-text\">{t(\"cloud.pay_amount\")}</div>\r\n            <div className=\"r-text pay-num\">\r\n              <p className=\"paid\">\r\n                ￥\r\n                {\r\n                  // 当勾选余额的时候：订单金额 - 账户余额，小于0 则表示全部使用\r\n                  balanceChecked\r\n                    ? (Number(orderDetail.amount) -\r\n                      Number(user.account.credit) <=\r\n                      0\r\n                      ? 0\r\n                      : Number(orderDetail.amount) -\r\n                      Number(user.account.credit)\r\n                    ).toFixed(2)\r\n                    : Number(orderDetail.amount).toFixed(2)\r\n                }\r\n              </p>\r\n              {balanceChecked && (\r\n                <p className=\"balance\">\r\n                  -￥\r\n                  {(Number(user.account.credit) >= Number(orderDetail.amount)\r\n                    ? Number(orderDetail.amount)\r\n                    : Number(user.account.credit)\r\n                  ).toFixed(2)}\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n          {\r\n            // 可用余额小于订单金额\r\n            isShowPay && (\r\n              <div className=\"item pay-html\">\r\n                {/* 渲染支付的模块 */}\r\n                <div dangerouslySetInnerHTML={{ __html: payHtml }}></div>\r\n              </div>\r\n            )\r\n          }\r\n        </div>\r\n      </Modal>\r\n    </>\r\n  )\r\n}\r\n","// This icon file is generated automatically.\nvar MinusCircleOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z\" } }] }, \"name\": \"minus-circle\", \"theme\": \"outlined\" };\nexport default MinusCircleOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport MinusCircleOutlinedSvg from \"@ant-design/icons-svg/es/asn/MinusCircleOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar MinusCircleOutlined = function MinusCircleOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: MinusCircleOutlinedSvg\n  }));\n};\n\nMinusCircleOutlined.displayName = 'MinusCircleOutlined';\nexport default /*#__PURE__*/React.forwardRef(MinusCircleOutlined);","import { Col } from '../grid';\nexport default Col;","import { Row } from '../grid';\nexport default Row;"],"names":["getDataCenter","id","request","getBwType","getPackage","params","product_id","getSystem","getVpc","getGroup","getSetting","getDurationPprice","updatePrice","settleProduct","usePromoCode","onlinePay","creditPay","getPayStatus","getOrderDetail","getCloudList","payWayList","getUserDetail","getCloudDetail","getSshkey","getLog","getDiskById","getDisk","umount","mount","snapshot","createSnapshot","restoreSnapshot","delSnapshot","snapshot_id","backup","createBackup","restoreBackup","delBackup","backup_id","host","refund","postRefund","quitRefund","renew","doRenw","chartdata","vpcdata","changeVpc","flowdata","refundMsg","getPackagePrice","createPackageId","changeNotes","storageList","mountStorage","unmountStorage","expansionStorage","diskPackage","refundPage","getCloudListAll","getCloudById","settle","getDurationPrice","configPackage","Option","Select","PayModal","props","t","useTranslation","navigate","useNavigate","useState","orderDetail","setOrderDetail","curPay","setCurPay","user","setUser","balanceChecked","setBalanceChecked","payList","setPayList","payHtml","setPayHtml","isShowPay","setIsShowPay","loading","setLoading","cloud","orderId","res","data","order","message","msg","getUser","getPayWay","list","name","initPay","console","log","gateway","html","changePayWay","e","Number","account","credit","amount","handleOk","useBalance","target","checked","use","tempId","result","orderRes","handleCancel","clearInterval","timer","replace","useEffect","visible","undefined","title","onOk","onCancel","className","closable","footer","onClick","length","value","onChange","map","item","toFixed","dangerouslySetInnerHTML","__html","MinusCircleOutlined","ref","React","AntdIcon","_objectSpread","icon","MinusCircleOutlinedSvg","displayName","Col","Row"],"sourceRoot":""}