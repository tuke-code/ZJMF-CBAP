{"version":3,"file":"static/js/886.5f140593.chunk.js","mappings":"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","sources":["api/network.js","components/delDialog/DelDialog.jsx","views/product/network/vpc/Vpc.jsx"],"sourcesContent":["/* 产品-网络模块 */\r\nimport request from \"../utils/request\";\r\n/* vpc */\r\nexport function getVpc (params) {\r\n  return request.get(`/vpc`, { params });\r\n}\r\nexport function addVpc (params) {\r\n  return request.post(`/vpc`, params);\r\n}\r\nexport function updateVpc (params) {\r\n  return request.put(`/vpc/${params.id}`, params);\r\n}\r\nexport function deleteVpc (id) {\r\n  return request.delete(`/vpc/${id}`);\r\n}\r\n\r\n/* 安全组 */\r\nexport function getGroup (params) {\r\n  return request.get(`/security_group`, { params });\r\n}\r\nexport function getGroupDetail (id) {\r\n  return request.get(`/security_group/${id}`);\r\n}\r\nexport function addAndUpdateGroup (type, params) {\r\n  if (type === 'add') {\r\n    return request.post(`/security_group`, params);\r\n  } else if (type === 'update') {\r\n    return request.put(`/security_group/${params.id}`, params);\r\n  }\r\n}\r\nexport function deleteGroup (id) {\r\n  return request.delete(`/security_group/${id}`);\r\n}\r\n\r\n/* 安全组规则 */\r\nexport function getGroupRules (params) {\r\n  return request.get(`/security_group/${params.id}/rule`, { params });\r\n}\r\nexport function addAndUpdateGroupRules (type, params) {\r\n  if (type === 'add') {\r\n    return request.post(`/security_group/${params.id}/rule`, params);\r\n  } else if (type === 'update') {\r\n    return request.put(`/security_group/rule/${params.id}`, params);\r\n  }\r\n}\r\nexport function deleteGroupRules (id) {\r\n  return request.delete(`/security_group/rule/${id}`);\r\n}\r\n// 批量添加安全组规则\r\nexport function batchRules (params) {\r\n  return request.post(`/security_group/${params.id}/rule/batch`, params);\r\n}\r\n\r\n// 安全组实例列表\r\nexport function getGroupCloud (params) {\r\n  return request.get(`/security_group/${params.id}/host`, {params});\r\n}\r\n// 关联安全组\r\nexport function concatCloud (params) {\r\n  return request.post(`/security_group/${params.id}/host/${params.host_id}`,params);\r\n}\r\n// 取消关联实例\r\nexport function cancelConcatCloud (params) {\r\n  return request.delete(`/security_group/${params.id}/host/${params.host_id}`);\r\n}\r\n// 获取所有可用实例\r\nexport function getAllCloud () {\r\n  return request.get(`/idcsmart_cloud/all`);\r\n}","import { useEffect } from 'react';\r\nimport { useTranslation } from \"react-i18next\";\r\nimport Swal from \"sweetalert2\";\r\nimport './DelDialog.css'\r\nexport default function DelDialog (props) {\r\n  const { t } = useTranslation()\r\n  const handleOk = () => {\r\n    props.closeDialog()\r\n    props.submitDel()\r\n  }\r\n  const handleCancel = () => {\r\n    props.closeDialog()\r\n  }\r\n  const showDialog = () => {\r\n    Swal.fire({\r\n      title: props.title ? props.title : t('common.delete'),\r\n      text: props.text ? props.text : t('common.tip') + '？',\r\n      customClass: {\r\n        title: 'del-tit',\r\n        icon: props.icon ? \"warning-icon\" : \"del-icon\",\r\n        text: 'del-text'\r\n      },\r\n      icon: props.icon || \"info\",\r\n      showCancelButton: true,\r\n      confirmButtonText: t(\"common.sure\"),\r\n      cancelButtonText: t(\"common.cancel\"),\r\n    }).then(result => {\r\n      if (result.isConfirmed) {\r\n        handleOk()\r\n      } else if (result.isDismissed) {\r\n        handleCancel()\r\n      }\r\n    })\r\n  }\r\n  useEffect(() => {\r\n    showDialog()\r\n  }, [props])\r\n  return null\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { message, Select, Input, Table, Popover, Tooltip, Form, Modal, Button } from 'antd';\r\nimport './Vpc.css'\r\nimport * as network from '@/api/network'\r\nimport { showDialog } from '@/utils/util'\r\nimport DelDialog from '@/components/delDialog/DelDialog';\r\nimport {\r\n  EllipsisOutlined\r\n} from '@ant-design/icons';\r\nexport default function Vpc () {\r\n  const { t } = useTranslation()\r\n  const navigate = useNavigate()\r\n  const [form] = Form.useForm()\r\n  const [params, setParams] = useState({\r\n    keywords: '',\r\n    orderby: 'id',\r\n    sort: 'desc'\r\n  })\r\n  const [info, setInfo] = useState({})\r\n  const [loading, setLoading] = useState(false)\r\n  const [isModalVisible, setIsModalVisible] = useState(false)\r\n  const [vpcList, setVpcList] = useState([])\r\n  const [itemModal, setItemModal] = useState(false)\r\n  const [btnLoading, setBtnLoading] = useState(false)\r\n  const columns = [\r\n    {\r\n      title: 'VPC' + t('cloud.bas_columns_title1'),\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      ellipsis: true\r\n    },\r\n    {\r\n      title: t(\"cloud.network\"),\r\n      dataIndex: 'ip',\r\n      key: 'ip',\r\n      ellipsis: true\r\n    },\r\n    {\r\n      title: t(\"cloud.cloud_num\"),\r\n      dataIndex: 'host_num',\r\n      key: 'host_num',\r\n      ellipsis: true\r\n    },\r\n    {\r\n      title: t(\"support.action\"),\r\n      dataIndex: 'manage',\r\n      key: 'manage',\r\n      width: 150,\r\n      render: (_, record) => (\r\n        <>\r\n          <div className=\"com-opt-pop\" id={'com-opt' + record.id}>\r\n            <Popover getPopupContainer={() => document.getElementById('com-opt' + record.id)}\r\n              content={\r\n                <>\r\n                  <p className=\"cloud-opt\" onClick={() => editItem(record)}>{t(\"common.edit\")}</p>\r\n                  <p className=\"cloud-opt\" onClick={() => deleteVpc(record)}>{t(\"common.delete\")}</p>\r\n                </>\r\n              } placement=\"topRight\">\r\n              <p className=\"opt-icon\"><EllipsisOutlined /></p>\r\n            </Popover>\r\n          </div>\r\n        </>\r\n      )\r\n    }\r\n  ]\r\n  const getVpcList = async () => {\r\n    try {\r\n      setLoading(true)\r\n      const res = await network.getVpc(params)\r\n      setVpcList(res.data.data.list)\r\n      setLoading(false)\r\n    } catch (error) {\r\n      showDialog(error.data.msg, 'error')\r\n      setLoading(false)\r\n    }\r\n  }\r\n  const deleteVpc = (e) => {\r\n    setInfo(e)\r\n    setIsModalVisible(true)\r\n  }\r\n  const closeDialog = () => {\r\n    setIsModalVisible(false)\r\n  }\r\n  // 编辑\r\n  const editItem = (row) => {\r\n    setItemModal(true)\r\n    setInfo(row)\r\n    form.setFieldsValue({\r\n      name: row.name,\r\n      description: row.description\r\n    })\r\n  }\r\n  const handleCancel = () => {\r\n    setItemModal(false)\r\n    form.resetFields()\r\n  }\r\n  const onFinish = async (values) => {\r\n    try {\r\n      setBtnLoading(true)\r\n      const { name, description } = values\r\n      const params = {\r\n        id: info.id,\r\n        name\r\n      }\r\n      const res = await network.updateVpc(params)\r\n      if (res.data.status === 200) {\r\n        showDialog(res.data.msg, 'success')\r\n        getVpcList()\r\n        setBtnLoading(false)\r\n        handleCancel()\r\n      }\r\n    } catch (error) {\r\n      setBtnLoading(false)\r\n      showDialog(error.data.msg, 'error')\r\n    }\r\n  };\r\n  // 执行删除操作\r\n  const submitDel = async () => {\r\n    try {\r\n      const res = await network.deleteVpc(info.id)\r\n      if (res.data.status === 200) {\r\n        showDialog(res.data.msg, 'success')\r\n        getVpcList()\r\n      }\r\n    } catch (error) {\r\n      message.error(error.data.msg)\r\n    }\r\n  }\r\n  const createVpc = () => {\r\n    navigate('/create_vpc')\r\n  }\r\n  useEffect(() => {\r\n    getVpcList()\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"vpc-table\">\r\n      <div className=\"top\">\r\n        <span className=\"tip\">{t('network.tip')}</span>\r\n        <div className=\"create\" onClick={createVpc}>\r\n          {t('cloud.bas_btn2')}VPC\r\n        </div>\r\n      </div>\r\n      <div className=\"item\">\r\n        {\r\n          vpcList.map((item, index) => {\r\n            return item.vpc.length > 0 && (\r\n              <div className=\"vpc-box\" key={item.id}>\r\n                <div className=\"area\">\r\n                  <img src={require(`@/assets/images/cloud/${item.country_code}.png`)} alt=\"\" />\r\n                  <span className=\"text\">\r\n                    {item.country}&nbsp;{item.city}&nbsp;{item.area}\r\n                  </span>\r\n                </div>\r\n                <Table columns={columns} dataSource={item.vpc} loading={loading}\r\n                  rowKey={record => record.id} pagination={false} className=\"cloud-tab\" />\r\n              </div>\r\n            )\r\n          })\r\n        }\r\n      </div>\r\n      {/* 编辑 */}\r\n      <Modal title={t('common.edit') + 'VPC'} visible={itemModal} onCancel={handleCancel}\r\n        className='com-modal'\r\n        closable={false}\r\n        footer={false}>\r\n        <Form name='basic'\r\n          form={form}\r\n          labelCol={{\r\n            span: 3,\r\n          }}\r\n          labelAlign='left'\r\n          onFinish={onFinish}\r\n          autoComplete='off'\r\n          colon={false}\r\n        >\r\n          <Form.Item\r\n            label={t('cloud.bas_columns_title1')}\r\n            name='name'\r\n            rules={[{\r\n              required: true,\r\n              message: t('input') + t('cloud.bas_columns_title1'),\r\n            },\r\n            ]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item className='f-btn'>\r\n            <Button className='submit' htmlType=\"submit\" loading={btnLoading}>{t('common.sure')}</Button>\r\n            <Button className='cancel' onClick={handleCancel}>{t('common.cancel')}</Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n      {/* 通用删除 */}\r\n      {\r\n        isModalVisible && <DelDialog\r\n          closeDialog={closeDialog} submitDel={submitDel}\r\n          text={t('common.tip') + info.name + '？'}\r\n        ></DelDialog>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n"],"names":["getVpc","params","request","addVpc","updateVpc","id","deleteVpc","getGroup","addAndUpdateGroup","type","deleteGroup","getGroupRules","addAndUpdateGroupRules","deleteGroupRules","batchRules","getGroupCloud","concatCloud","host_id","cancelConcatCloud","getAllCloud","DelDialog","props","t","useTranslation","showDialog","Swal","title","text","customClass","icon","showCancelButton","confirmButtonText","cancelButtonText","then","result","isConfirmed","closeDialog","submitDel","isDismissed","useEffect","Vpc","navigate","useNavigate","Form","form","useState","keywords","orderby","sort","info","setInfo","loading","setLoading","isModalVisible","setIsModalVisible","vpcList","setVpcList","itemModal","setItemModal","btnLoading","setBtnLoading","columns","dataIndex","key","ellipsis","width","render","_","record","className","getPopupContainer","document","getElementById","content","onClick","editItem","placement","getVpcList","network","res","data","list","msg","e","row","setFieldsValue","name","description","handleCancel","resetFields","onFinish","values","status","message","map","item","index","vpc","length","src","require","country_code","alt","country","city","area","dataSource","rowKey","pagination","visible","onCancel","closable","footer","labelCol","span","labelAlign","autoComplete","colon","label","rules","required","htmlType"],"sourceRoot":""}