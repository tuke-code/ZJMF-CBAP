"use strict";(self.webpackChunkreact_member_center=self.webpackChunkreact_member_center||[]).push([[640],{28010:function(n,t,e){e.d(t,{CY:function(){return d},FI:function(){return x},Mn:function(){return f},Np:function(){return i},Ox:function(){return r},Qz:function(){return p},Yj:function(){return j},_S:function(){return u},aN:function(){return l},id:function(){return h},pi:function(){return m},uP:function(){return s},xx:function(){return o},zC:function(){return c}});var a=e(71584);function c(){return a.Z.get("/idcsmart_cloud/all")}function i(n){return a.Z.get("/idcsmart_cloud/".concat(n,"/disk"))}function s(){return a.Z.get("/snapshot")}function r(n){return a.Z.post("/idcsmart_cloud/".concat(n.id,"/snapshot"),n)}function o(n){return a.Z.post("/idcsmart_cloud/".concat(n.id,"/snapshot/restore"),n)}function l(n){return a.Z.delete("/idcsmart_cloud/".concat(n.id,"/snapshot/").concat(n.snapshot_id),n)}function d(){return a.Z.get("/backup")}function u(n){return a.Z.delete("/idcsmart_cloud/".concat(n.id,"/backup/").concat(n.backup_id),n)}function m(n){return a.Z.post("/idcsmart_cloud/".concat(n.id,"/backup/restore"),n)}function h(n){return a.Z.post("/idcsmart_cloud/".concat(n.id,"/backup"),n)}function p(){return a.Z.get("/template")}function f(n){return a.Z.post("/idcsmart_cloud/".concat(n.id,"/template"),n)}function x(n){return a.Z.delete("/idcsmart_cloud/".concat(n.id,"/template/").concat(n.template_id),n)}function j(){return a.Z.get("/iso")}},96640:function(n,t,e){e.r(t),e.d(t,{default:function(){return k}});var a=e(1413),c=e(29439),i=e(72791),s=e(83734),r=e(93020),o=e(45227),l=e(70478),d=e(90785),u=e(66106),m=e(30914),h=e(68678),p=e(87309),f=e(75033),x=e(28010),j=e(21830),Z=e.n(j),v=e(60151),_=e(72426),N=e.n(_),g=e(33168),C=e(80184);function k(){var n=(0,g.$)().t,t=s.Z.Option,j=(0,i.useState)([]),_=(0,c.Z)(j,2),k=_[0],b=_[1],y=(0,i.useState)([]),Y=(0,c.Z)(y,2),w=Y[0],S=Y[1],B=(0,i.useState)({id:0,name:null,disk_id:null}),z=(0,c.Z)(B,2),I=z[0],M=z[1],D=(0,i.useState)(!1),E=(0,c.Z)(D,2),F=E[0],H=E[1],T=(0,i.useState)(!1),O=(0,c.Z)(T,2),P=O[0],R=O[1],V=(0,i.useState)(""),G=(0,c.Z)(V,2),K=G[0],Q=G[1],W=(0,i.useState)(!1),$=(0,c.Z)(W,2),q=$[0],A=$[1],J=(0,i.useState)([]),L=(0,c.Z)(J,2),U=L[0],X=L[1],nn=[{title:"\u540d\u79f0",dataIndex:"name",key:"name",ellipsis:!0,width:200},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time",ellipsis:!0,width:200,render:function(n){return(0,C.jsx)(C.Fragment,{children:N()(1e3*n).format("YYYY-MM-DD HH:mm")})}},{title:"\u5b9e\u4f8b",dataIndex:"host_name",key:"host_name",ellipsis:!0,minWidth:400,render:function(n,t){return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:"host",children:[(0,C.jsx)("span",{className:"host-name",children:t.host_name?t.host_name:"--"}),(0,C.jsx)("span",{className:"host-ip",children:t.ip?t.ip:"--"})]})})}},{title:"\u533a\u57df",dataIndex:"area",key:"area",ellipsis:!0,width:200,render:function(n,t){return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:"area",children:[(0,C.jsx)("img",{src:t.country_code&&e(85995)("./".concat(t.country_code,".png")),alt:""}),(0,C.jsx)("span",{className:"country",children:t.country?t.country:null}),(0,C.jsx)("span",{className:"city",children:t.city?t.city:null}),(0,C.jsx)("span",{className:"area",children:t.area?t.area:null})]})})}},{title:"\u64cd\u4f5c",dataIndex:"id",key:"id",width:80,render:function(t,e){return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{className:"com-opt-pop",id:"com-opt"+e.id,children:(0,C.jsx)(r.Z,{getPopupContainer:function(){return document.getElementById("com-opt"+e.id)},content:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("p",{className:"cloud-opt",onClick:function(){return rn(e)},children:"\u6062\u590d"}),(0,C.jsx)("p",{className:"cloud-opt",onClick:function(){return on(e)},children:n("common.delete")})]}),placement:"topRight",children:(0,C.jsx)("p",{className:"opt-icon",children:(0,C.jsx)(f.Z,{})})})})})}}],tn=(0,i.useState)(!1),en=(0,c.Z)(tn,2),an=en[0],cn=en[1],sn=function(){cn(!0),(0,x.uP)().then((function(n){cn(!1),X(n.data.list)}))},rn=function(n){Z().fire({title:"<p style='display:flex;font-size:18px'>\u6062\u590d</p>",html:"\n      <div style='display:flex;flex-direction: column;'>\n        <span>\u60a8\u5c06\u6062\u590d\u5b9e\u4f8b ".concat(n.host_name," \u7684\u78c1\u76d8</span>\n        <span>").concat(N()(1e3*n.create_time).format("YYYY-MM-DD HH:mm"),"\u521b\u5efa\u7684\u5feb\u7167</span>\n        <span>\u5f53\u524d\u6240\u6709\u6570\u636e\u4e22\u5931\uff0c\u8bf7\u786e\u8ba4\u60a8\u9700\u8981\u6062\u590d\u5feb\u7167</span>\n      </div>\n      "),showCancelButton:!0,confirmButtonColor:"#5C5EE4",confirmButtonText:"\u786e\u8ba4",cancelButtonText:"\u53d6\u6d88",customClass:{cancelButton:"snapshot-cancel-button"}}).then((function(t){if(t.value){var e={id:n.host_id,snapshot_id:n.id};(0,x.xx)(e).then((function(t){200===t.data.status&&((0,v.vC)("\u60a8\u5df2\u6210\u529f\u8fd8\u539f ".concat(n.name),"success"),sn())})).catch((function(n){(0,v.vC)(n.data.msg,"error")}))}}))},on=function(n){console.log(n),Z().fire({html:"\n      <div style='display:flex;flex-direction: column;'>\n        <span>\u60a8\u5c06\u5220\u9664\u5b9e\u4f8b ".concat(n.host_name," \u7684\u78c1\u76d8</span>\n        <span>").concat(N()(1e3*n.create_time).format("YYYY-MM-DD HH:mm"),"\u521b\u5efa\u7684\u5feb\u7167</span>\n        <span>\u5f53\u524d\u6240\u6709\u6570\u636e\u4e22\u5931\uff0c\u8bf7\u786e\u8ba4\u60a8\u9700\u8981\u5220\u9664\u5feb\u7167</span>\n      </div>\n      "),icon:"info",showCancelButton:!0,confirmButtonColor:"#5C5EE4",confirmButtonText:"\u7acb\u5373\u5220\u9664",cancelButtonText:"\u53d6\u6d88",customClass:{icon:"snapshot-del-icon",cancelButton:"snapshot-cancel-button"}}).then((function(t){if(t.value){var e={id:n.host_id,snapshot_id:n.id};(0,x.aN)(e).then((function(t){200===t.data.status&&ln(n.name)}))}})).catch((function(n){(0,v.vC)(n.data.msg,"error")}))},ln=function(n){(0,v.vC)("\u60a8\u5df2\u6210\u529f\u5220\u9664 ".concat(n),"success"),sn()},dn=function(n){H(!0),(0,x.Np)(n).then((function(t){H(!1),S(t.data.list),t.data.list[0]?M((0,a.Z)((0,a.Z)({},I),{},{disk_id:Number(t.data.list[0].id),id:n})):M((0,a.Z)((0,a.Z)({},I),{},{disk_id:null,id:n}))})).catch((function(n){H(!1)}))};return(0,i.useEffect)((function(){sn(),(0,x.zC)().then((function(n){if(200===n.data.status){var t=n.data.data.list.reverse();t[0]&&dn(t[0].id),b(t)}}))}),[]),(0,C.jsxs)("div",{className:"Snapshot",children:[(0,C.jsxs)("div",{className:"top",children:[(0,C.jsx)("div",{className:"top-text",children:"\u5feb\u901f\u5c06\u78c1\u76d8\u6570\u636e\u8fdb\u884c\u5feb\u7167\uff0c\u4e00\u65e6\u91cd\u88c5/\u5b9e\u4f8b\u5220\u9664\uff0c\u6240\u6709\u5feb\u7167\u4e22\u5931"}),(0,C.jsx)("div",{className:"top-btn",onClick:function(){M({id:k[0]?k[0].id:null,name:null,disk_id:w[0]?w[0].id:null}),k[0]&&dn(k[0].id),Q(""),A(!0)},children:"\u521b\u5efa\u5feb\u7167"})]}),(0,C.jsx)("div",{className:"snapshot-table",children:(0,C.jsx)(o.Z,{pagination:!1,rowKey:function(n){return n.id},loading:an,columns:nn,dataSource:U})}),(0,C.jsx)(l.Z,{visible:q,footer:null,centered:!0,closable:!1,style:{borderRadius:"10px",overflow:"auto"},getContainer:!1,onCancel:function(){return A(!1)},children:(0,C.jsxs)("div",{className:"create-snapshot",children:[(0,C.jsx)("div",{className:"top",children:(0,C.jsx)("div",{className:"title",children:"\u521b\u5efa\u5feb\u7167"})}),(0,C.jsxs)("div",{className:"main",children:[K?(0,C.jsx)("div",{className:"err",children:(0,C.jsx)(d.Z,{description:K,type:"error",showIcon:!0})}):(0,C.jsx)("div",{className:"remind-text",children:"\u5efa\u8bae\u60a8\u5173\u95ed\u5b9e\u4f8b\u540e\u521b\u5efa\u5feb\u7167\uff0c\u786e\u4fdd\u4e00\u81f4\u6027\u907f\u514d\u51fa\u73b0\u95ee\u9898\uff0c\u5feb\u7167\u57fa\u4e8e\u6570\u91cf\u6536\u8d39"}),(0,C.jsxs)("div",{className:"form",children:[(0,C.jsx)("div",{className:"row",children:(0,C.jsxs)(u.Z,{children:[(0,C.jsx)(m.Z,{span:4,children:(0,C.jsx)("span",{className:"label",children:"\u78c1\u76d8"})}),(0,C.jsx)(m.Z,{span:10,children:(0,C.jsx)(s.Z,{size:"large",onChange:function(n){dn(n)},placeholder:"\u8bf7\u9009\u62e9\u5b9e\u4f8b",defaultValue:k[0]?k[0].id:"",children:k.map((function(n){return(0,C.jsx)(t,{value:n.id,children:n.name},n.id)}))})}),(0,C.jsx)(m.Z,{span:10,children:(0,C.jsx)(s.Z,{size:"large",onChange:function(n){M((0,a.Z)((0,a.Z)({},I),{},{disk_id:Number(n)}))},value:I.disk_id,defaultValue:w[0]?w[0].id:"",placeholder:"\u8bf7\u9009\u62e9\u78c1\u76d8",loading:F,children:w.map((function(n){return(0,C.jsx)(t,{value:n.id,children:"".concat(n.name,"-").concat(n.size,"G")},n.id)}))})})]})}),(0,C.jsx)("div",{className:"row",children:(0,C.jsxs)(u.Z,{children:[(0,C.jsx)(m.Z,{span:4,children:(0,C.jsx)("span",{className:"label",children:"\u540d\u79f0"})}),(0,C.jsx)(m.Z,{span:20,children:(0,C.jsx)(h.Z,{size:"large",placeholder:"\u8bf7\u8f93\u5165\u5feb\u7167\u540d\u79f0",onChange:function(n){M((0,a.Z)((0,a.Z)({},I),{},{name:n.target.value}))}})})]})})]})]}),(0,C.jsxs)("div",{className:"footer",children:[(0,C.jsx)(p.Z,{className:"sub-btn",onClick:function(){var n=!0;if(I.id||(n=!1,Q("\u8bf7\u9009\u62e9\u9700\u8981\u521b\u5efa\u5feb\u7167\u7684\u5b9e\u4f8b")),I.disk_id||(n=!1,Q("\u8bf7\u9009\u62e9\u9700\u8981\u521b\u5efa\u5feb\u7167\u7684\u78c1\u76d8")),I.name?I.name.length>10&&(n=!1,Q("\u5feb\u7167\u540d\u79f0\u957f\u5ea6\u5e94\u4e0d\u5927\u4e8e10")):(n=!1,Q("\u8bf7\u8f93\u5165\u5feb\u7167\u540d\u79f0")),n){var t=(0,a.Z)({},I);R(!0),(0,x.Ox)(t).then((function(n){R(!1),200===n.data.status&&((0,v.vC)(n.data.msg,"success"),A(!1),sn())})).catch((function(n){R(!1),Q(n.data.msg)}))}},loading:P,children:"\u7acb\u5373\u521b\u5efa"}),(0,C.jsx)(p.Z,{className:"cancel-btn",onClick:function(){return A(!1)},children:"\u53d6\u6d88"})]})]})})]})}}}]);
//# sourceMappingURL=640.94dbc621.chunk.js.map