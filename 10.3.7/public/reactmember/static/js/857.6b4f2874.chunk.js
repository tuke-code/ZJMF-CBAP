"use strict";(self.webpackChunkreact_member_center=self.webpackChunkreact_member_center||[]).push([[857],{37368:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var i=n(74165),s=n(15861),a=n(1413),c=n(29439),r=n(72791),l=n(33168),d=n(43504),u=n(70819),o=n(60151),m=n(83734),p=n(77483),x=n(50419),h=n(66106),f=n(30914),v=n(68678),j=n(93020),_=n(68747),g=(n(60480),n(71823)),Z=n(96969),N=n(46143),y=n(80184),b=m.Z.Option,z=null;function k(){var e=(0,d.lr)(),t=(0,c.Z)(e,1)[0],k=t.get("id"),S=(t.get("host_id"),t.get("package_id")),C=t.get("size"),w=(0,r.useState)(null),I=(0,c.Z)(w,2),B=I[0],F=I[1],P=(0,r.useState)(3e5),G=(0,c.Z)(P,2),V=G[0],q=G[1],A=(0,u.s0)(),O=(0,l.$)().t,R=(0,r.useState)([]),E=(0,c.Z)(R,2),J=E[0],T=E[1],W=p.Z.useForm(),H=(0,c.Z)(W,1)[0],L=(0,r.useState)({qty:1,size:C,type_id:S}),X=(0,c.Z)(L,2),$=X[0],D=X[1],K=(0,r.useState)(!1),M=(0,c.Z)(K,2),Q=M[0],U=M[1],Y=(0,r.useState)(""),ee=(0,c.Z)(Y,2),te=ee[0],ne=ee[1],ie=(0,r.useState)(!1),se=(0,c.Z)(ie,2),ae=se[0],ce=se[1],re=(0,r.useRef)(),le=(0,r.useState)(""),de=(0,c.Z)(le,2),ue=de[0],oe=de[1],me=(0,r.useState)(JSON.parse(localStorage.getItem("font_config"))),pe=(0,c.Z)(me,1)[0],xe=(0,r.useState)(),he=(0,c.Z)(xe,2),fe=he[0],ve=he[1],je=(0,r.useState)({}),_e=(0,c.Z)(je,2),ge=_e[0],Ze=_e[1],Ne=(0,r.useState)([]),ye=(0,c.Z)(Ne,2),be=ye[0],ze=ye[1],ke=(0,r.useState)(),Se=(0,c.Z)(ke,2),Ce=Se[0],we=Se[1],Ie=(0,r.useState)(1),Be=(0,c.Z)(Ie,2),Fe=Be[0],Pe=Be[1],Ge=(0,r.useState)([]),Ve=(0,c.Z)(Ge,2),qe=Ve[0],Ae=Ve[1],Oe=(0,r.useState)(0),Re=(0,c.Z)(Oe,2),Ee=Re[0],Je=Re[1],Te=(0,r.useState)([]),We=(0,c.Z)(Te,2),He=We[0],Le=We[1],Xe=(0,r.useState)([]),$e=(0,c.Z)(Xe,2),De=$e[0],Ke=$e[1],Me=(0,r.useState)([]),Qe=(0,c.Z)(Me,2),Ue=Qe[0],Ye=Qe[1],et=(0,r.useState)([]),tt=(0,c.Z)(et,2),nt=tt[0],it=tt[1],st=(0,r.useState)([]),at=(0,c.Z)(st,2),ct=at[0],rt=at[1],lt=function(){var e={id:k};(0,Z.A3)(e).then((function(e){if(200===e.data.status){var t=e.data.data.package;Ae(t),t.some((function(e){e.id==S&&(we({size_min:e.size_min,size_max:e.size_max}),ve(e))}))}}))},dt=function(e){[20,50,100,200,500].forEach((function(t){var n={package_id:e,size:t};(0,Z.RW)(n).then((function(e){if(200==e.data.status){var n=e.data.data.list;20==t&&Le(n),50==t&&Ke(n),100==t&&Ye(n),200==t&&it(n),500==t&&rt(n)}}))}))},ut=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t,n,s,a,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=re.current.input.value){e.next=4;break}return e.abrupt("return",!1);case 4:if(!be.find((function(e){return e.name===t}))){e.next=6;break}return e.abrupt("return",(0,o.vC)(O("cloud.tip31"),"error"));case 6:if(!be.find((function(e){return!e.overlay}))){e.next=8;break}return e.abrupt("return",(0,o.vC)(O("cloud.tip32"),"error"));case 8:return e.next=10,g.Td({promo_code:t,scene:"New",total:Number(ge.price),cycles:[{product_id:$.product_id,amount:ge.price,billing_cycle_time:ge.duration}]});case 10:if(200!==(n=e.sent).data.status){e.next=17;break}if(s=n.data.data,a=s.overlay,c=s.discount,!(be.length>0)||a){e.next=15;break}return e.abrupt("return",(0,o.vC)(O("cloud.tip32"),"error"));case 15:ze((function(e){var n=e;return e.push({name:t,num:c,overlay:a}),n})),ce(!1);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),x.ZP.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=H.getFieldValue(),t={package_id:S,size:e.size};(0,Z.RW)(t).then((function(e){if(200===e.data.status&&e.data.data.list){var t=e.data.data.list;T(t),Ze({price:t[Ee].price,billing_cycle:t[Ee].display_name})}}))},mt=function(e){H.setFieldsValue({size:e}),D((0,a.Z)((0,a.Z)({},$),{},{size:e})),ot()},pt=function(e){var t=e.target.getAttribute("data-id");D((0,a.Z)((0,a.Z)({},$),{},{type_id:t})),H.setFieldsValue({type_id:t}),dt(t),qe.map((function(e){e.id==t&&we({size_min:e.size_min,size_max:e.size_max})})),ot(),ze([])},xt=function(e){B||F((function(t){return t=setInterval((0,s.Z)((0,i.Z)().mark((function n(){var s;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.LX(e||te);case 2:if(s=n.sent,q((function(e){return e-2e3})),"Paid"!==s.data.code){n.next=9;break}return(0,o.vC)(s.data.msg,"success",(function(){A("/storage",{replace:!0})})),clearInterval(t),U(!1),n.abrupt("return",!1);case 9:if("Paid"!==s.code&&0!==V){n.next=13;break}return clearInterval(t),U(!1),n.abrupt("return",!1);case 13:case"end":return n.stop()}}),n)}))),2e3)}))};return(0,r.useEffect)((0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ot(),lt(),dt(S),e.abrupt("return",(function(){clearInterval(B)}));case 4:case"end":return e.stop()}}),e)}))),[]),(0,y.jsxs)("div",{className:"create-ip com-content",children:[(0,y.jsxs)("div",{className:"com-card",children:[(0,y.jsx)("div",{className:"box data-center",children:(0,y.jsx)("div",{className:"com-tit",children:(0,y.jsx)("h1",{className:"tit",children:"\u6269\u5bb9\u78c1\u76d8"})})}),(0,y.jsx)("div",{className:"box vpc",children:(0,y.jsxs)(p.Z,{name:"vpc",layout:"vertical",form:H,initialValues:{size:C,type_id:S},children:[(0,y.jsx)(p.Z.Item,{label:"\u78c1\u76d8\u7c7b\u578b",name:"type_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u78c1\u76d8\u7c7b\u578b"}],style:{marginBottom:0},children:(0,y.jsx)(h.Z,{gutter:{xs:8,sm:16,md:24,lg:30},children:qe.length>0?qe.map((function(e){if(e.id==S)return(0,y.jsx)(f.Z,{xs:{span:24},md:{span:12},lg:{span:8},children:(0,y.jsx)("div",{className:"item c-hover ".concat(e.id==1*$.type_id?"c-active":""),onClick:pt,"data-id":e.id,children:e.name})},e.id)})):null})}),(0,y.jsx)(p.Z.Item,{label:"\u5bb9\u91cf",children:(0,y.jsxs)("div",{className:"size-main",children:[(0,y.jsx)(p.Z.Item,{name:"size",style:{display:"inline-block",width:"1.67rem",marginBottom:0},rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5bb9\u91cf"},{validator:function(e,t,n){return t<Ce.size_min||t>Ce.size_max?Promise.reject("\u78c1\u76d8\u5bb9\u91cf\u5e94\u8be5\u5728".concat(Ce.size_min,"-").concat(Ce.size_max)):Promise.resolve()}}],children:(0,y.jsx)(v.Z,{onChange:function(e){z&&clearTimeout(z),z=setTimeout((function(){var t=e.target.value;if(t<Ce.size_min||t>Ce.size_max)return!1;D((0,a.Z)((0,a.Z)({},$),{},{size:t})),ot(),ze([])}),500)},style:{width:"1.57rem",height:".44rem"}})}),(0,y.jsx)("span",{style:{display:"inline-block",width:"24px",lineHeight:"32px",textAlign:"center"},children:"GB"}),(0,y.jsxs)("div",{className:"size-content",children:[He.length>0?(0,y.jsxs)("div",{className:"size-item ".concat(20==$.size?"active":""),onClick:function(){mt(20)},children:[(0,y.jsxs)("div",{className:"item-top",children:[pe.currency_prefix,He[Ee].price,"/",He[Ee].display_name]}),(0,y.jsx)("div",{className:"item-bottom",children:"20GB"})]}):null,De.length>0?(0,y.jsxs)("div",{className:"size-item ".concat(50==$.size?"active":""),onClick:function(){mt(50)},children:[(0,y.jsxs)("div",{className:"item-top",children:[pe.currency_prefix,De[Ee].price,"/",De[Ee].display_name]}),(0,y.jsx)("div",{className:"item-bottom",children:"50GB"})]}):null,Ue.length>0?(0,y.jsxs)("div",{className:"size-item ".concat(100==$.size?"active":""),onClick:function(){mt(100)},children:[(0,y.jsxs)("div",{className:"item-top",children:[pe.currency_prefix,Ue[Ee].price,"/",Ue[Ee].display_name]}),(0,y.jsx)("div",{className:"item-bottom",children:"100GB"})]}):null,nt.length>0?(0,y.jsxs)("div",{className:"size-item ".concat(200==$.size?"active":""),onClick:function(){mt(200)},children:[(0,y.jsxs)("div",{className:"item-top",children:[pe.currency_prefix,nt[Ee].price,"/",nt[Ee].display_name]}),(0,y.jsx)("div",{className:"item-bottom",children:"200GB"})]}):null,ct.length>0?(0,y.jsxs)("div",{className:"size-item ".concat(500==$.size?"active":""),onClick:function(){mt(500)},children:[(0,y.jsxs)("div",{className:"item-top",children:[pe.currency_prefix,ct[Ee].price,"/",ct[Ee].display_name]}),(0,y.jsx)("div",{className:"item-bottom",children:"500GB"})]}):null]})]})})]})})]}),(0,y.jsx)("div",{className:"total-box",children:(0,y.jsxs)("div",{className:"content",children:[(0,y.jsx)("div",{className:"item",children:(0,y.jsxs)("div",{className:"l-config",children:[(0,y.jsxs)("p",{className:"tit",children:[O("cloud.area"),"\uff1a"]}),fe&&(0,y.jsxs)("p",{className:"des",children:[(0,y.jsx)("img",{src:n(85995)("./".concat(fe.country_code,".png")),alt:"",className:"country"}),(0,y.jsxs)("span",{children:[fe.country,"/",fe.city," \xa0 ",fe.area]})]})]})}),(0,y.jsx)("div",{className:"item",children:(0,y.jsxs)("div",{className:"l-config",children:[(0,y.jsxs)("p",{className:"tit",children:[O("common.cycle"),"\uff1a"]}),J.length>0&&(0,y.jsx)(m.Z,{className:"cycle",value:Fe,onChange:function(e){D((0,a.Z)((0,a.Z)({},$),{},{duration_price_id:e})),Pe(e);var t=J.findIndex((function(t){return t.id==e}));Je(t);var n=J.filter((function(t){return t.id==e}));Ze({price:n[0].price,billing_cycle:n[0].display_name})},defaultValue:J[0].id,children:J.map((function(e){return(0,y.jsxs)(b,{value:e.id,children:[pe.currency_prefix,e.price,"/",e.display_name]},e.price)}))})]})}),(0,y.jsxs)("div",{className:"item",children:[(0,y.jsx)("div",{className:"l-config",children:(0,y.jsxs)("div",{className:"s-item",children:[(0,y.jsxs)("p",{className:"tit",children:[O("common.total_price"),"\uff1a"]}),ge&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("p",{className:"price",children:[pe.currency_prefix,(0,y.jsx)("span",{className:"num",children:String((ge.price*$.qty-be.reduce((function(e,t){return e+1*t.num}),0)>=0?ge.price*$.qty-be.reduce((function(e,t){return e+1*t.num}),0):0).toFixed(2))}),"/",ge.billing_cycle]}),(0,y.jsx)("div",{className:"discount-list",children:be.length>0&&be.map((function(e,t){return(0,y.jsxs)("p",{className:"item",children:[(0,y.jsxs)("span",{className:"num",children:["-\xa5",e.num]}),(0,y.jsxs)("span",{children:["(",O("common.discount_code")+e.name,")",(0,y.jsx)(_.Z,{onClick:function(){return function(e){ze((function(t){var n=JSON.parse(JSON.stringify(t));return n.splice(e,1),n}))}(t)}})]})]},e.name)}))})]})]})}),(0,y.jsxs)("div",{className:"config",children:[(0,y.jsx)("p",{className:"tit"}),(0,y.jsxs)("div",{className:"bot",id:"bot",children:[(0,y.jsx)(j.Z,{placement:"bottomRight",getPopupContainer:function(){return document.getElementById("bot")},content:(0,y.jsxs)("div",{className:"discount",children:[(0,y.jsx)(v.Z,{placeholder:O("cloud.input_discount_code"),value:ue,ref:re,onChange:function(e){oe(e.target.value)}}),(0,y.jsx)("span",{className:"close",onClick:ut,children:O("common.sure")})]}),trigger:"click",visible:ae,onVisibleChange:function(e){ce(e),oe("")},children:(0,y.jsx)("span",{className:"discount_code",children:O("common.discount_code")})}),(0,y.jsx)("div",{className:"r-btn",children:(0,y.jsx)("p",{className:"checkout",onClick:function(){H.validateFields().then(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:k,size:t.size,package_id:S},e.prev=1,e.next=4,(0,Z.nA)(n);case 4:200===(s=e.sent).data.status&&(a=s.data.data.id,U(!0),ne(a),xt(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),x.ZP.error(e.t0.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}))},children:"\u521b\u5efa\u5e76\u8d2d\u4e70"})})]})]})]})]})}),Q&&te&&(0,y.jsx)(N.Z,{orderId:te,timer:B})]})}}}]);
//# sourceMappingURL=857.6b4f2874.chunk.js.map