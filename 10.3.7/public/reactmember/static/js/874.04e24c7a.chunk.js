"use strict";(self.webpackChunkreact_member_center=self.webpackChunkreact_member_center||[]).push([[874],{71823:function(e,t,n){n.d(t,{$8:function(){return u},Bd:function(){return b},CO:function(){return I},CZ:function(){return X},D$:function(){return T},F:function(){return H},F5:function(){return m},Gl:function(){return g},I7:function(){return w},LI:function(){return S},LX:function(){return v},Lb:function(){return $},OJ:function(){return Z},OV:function(){return y},Os:function(){return i},Ox:function(){return F},P4:function(){return J},PN:function(){return W},Pf:function(){return A},So:function(){return f},Td:function(){return h},YW:function(){return x},Z1:function(){return p},_S:function(){return B},aN:function(){return P},dr:function(){return z},dz:function(){return j},ex:function(){return l},f3:function(){return c},ho:function(){return M},iS:function(){return O},id:function(){return E},jJ:function(){return k},kg:function(){return d},lp:function(){return q},nE:function(){return N},pH:function(){return s},pi:function(){return D},rA:function(){return R},rG:function(){return _},rd:function(){return o},v8:function(){return C},vh:function(){return V},xG:function(){return G},xp:function(){return r},xx:function(){return Y},zz:function(){return L}});var a=n(71584);function s(e){return a.Z.get("/product/".concat(e,"/idcsmart_cloud/data_center"))}function c(e){return a.Z.get("/product/".concat(e,"/idcsmart_cloud/bw_type"))}function r(e){return a.Z.get("/product/".concat(e.product_id,"/idcsmart_cloud/package"),{params:e})}function i(e){return a.Z.get("/product/".concat(e.product_id,"/idcsmart_cloud/system_image"),{params:e})}function o(e){return a.Z.get("/vpc",{params:e})}function l(e){return a.Z.get("/security_group",{params:e})}function u(e){return a.Z.get("/product/".concat(e,"/idcsmart_cloud/config"))}function d(e){return a.Z.get("/idcsmart_cloud/duration_price",{params:e})}function m(e){return a.Z.post("/product/".concat(e.product_id,"/config_option"),e)}function p(e){return a.Z.post("/product/settle",e)}function h(e){return a.Z.post("/promo_code/apply",e)}function f(e){return a.Z.post("/pay",e)}function x(e){return a.Z.post("/credit",e)}function v(e){return a.Z.get("/pay/".concat(e,"/status"))}function j(e){return a.Z.get("/order/".concat(e))}function Z(e){return a.Z.get("/idcsmart_cloud",{params:e})}function g(){return a.Z.get("/gateway")}function N(){return a.Z.get("/account")}function _(e){return a.Z.get("/idcsmart_cloud/".concat(e))}function y(e){return a.Z.get("/ssh_key",{params:e})}function b(e){return a.Z.get("/idcsmart_cloud/".concat(e.id,"/log"),{params:e})}function w(e){return a.Z.get("/idcsmart_cloud/".concat(e,"/disk"))}function k(e){return a.Z.get("idcsmart_cloud_disk",{params:e})}function C(e){return a.Z.put("/idcsmart_cloud_disk/".concat(e,"/umount"))}function S(e){return a.Z.put("idcsmart_cloud_disk/".concat(e.id,"/mount"),e)}function I(e){return a.Z.get("idcsmart_cloud/".concat(e.id,"/snapshot"),{params:e})}function F(e){return a.Z.post("idcsmart_cloud/".concat(e.id,"/snapshot"),e)}function Y(e){return a.Z.post("idcsmart_cloud/".concat(e.id,"/snapshot/restore"),e)}function P(e){return a.Z.delete("idcsmart_cloud/".concat(e.id,"/snapshot/").concat(e.snapshot_id))}function T(e){return a.Z.get("idcsmart_cloud/".concat(e.id,"/backup"),{params:e})}function E(e){return a.Z.post("idcsmart_cloud/".concat(e.id,"/backup"),e)}function D(e){return a.Z.post("idcsmart_cloud/".concat(e.id,"/backup/restore"),e)}function B(e){return a.Z.delete("idcsmart_cloud/".concat(e.id,"/backup/").concat(e.backup_id))}function M(e){return a.Z.get("host/".concat(e))}function O(e){return a.Z.get("refund",{params:e})}function H(e){return a.Z.post("refund",e)}function z(e){return a.Z.put("refund/".concat(e.id,"/cancel"))}function R(e){return a.Z.get("host/".concat(e.id,"/renew"),{params:e})}function G(e){return a.Z.post("host/".concat(e.id,"/renew"),e)}function A(e){return a.Z.get("/idcsmart_cloud/".concat(e.id,"/chart"),{params:e})}function V(e){return a.Z.get("/idcsmart_cloud/".concat(e.id,"/vpc"),{params:e})}function L(e){return a.Z.put("/idcsmart_cloud/".concat(e.id,"/vpc"),e)}function $(e){return a.Z.get("/idcsmart_cloud/".concat(e.id,"/flow"),{params:e})}function q(e){return a.Z.get("/refund/host/".concat(e,"/refund"))}function W(e){return a.Z.get("/idcsmart_cloud/".concat(e.id,"/package/upgrade"),{params:e})}function X(e){return a.Z.post("/idcsmart_cloud/".concat(e.id,"/package/upgrade/order"),e)}function J(e){return a.Z.put("/host/".concat(e.id,"/notes"),e)}},42969:function(e,t,n){n.d(t,{$F:function(){return c},B2:function(){return o},G3:function(){return m},LV:function(){return Z},XC:function(){return d},c0:function(){return u},cX:function(){return p},fw:function(){return j},jn:function(){return s},jo:function(){return i},lR:function(){return l},oo:function(){return r},t4:function(){return f},uE:function(){return h},ve:function(){return v},y:function(){return x}});var a=n(71584);function s(e){return a.Z.get("/host/".concat(e))}function c(e){return a.Z.post("/idcsmart_cloud/".concat(e,"/on"))}function r(e,t){return e?a.Z.post("/idcsmart_cloud/".concat(t,"/hard_off")):a.Z.post("/idcsmart_cloud/".concat(t,"/off"))}function i(e,t){return e?a.Z.post("/idcsmart_cloud/".concat(t,"/hard_reboot")):a.Z.post("/idcsmart_cloud/".concat(t,"/reboot"))}function o(e){return a.Z.post("/idcsmart_cloud/".concat(e,"/vnc"))}function l(e){return a.Z.get("/idcsmart_cloud/".concat(e,"/status"))}function u(e){return a.Z.post("/idcsmart_cloud/".concat(e.id,"/reset_password"),e)}function d(e){return a.Z.get("/idcsmart_cloud/".concat(e,"/remote_info"))}function m(e){return a.Z.post("/idcsmart_cloud/".concat(e.id,"/rescue"),e)}function p(e){return a.Z.post("/idcsmart_cloud/".concat(e,"/rescue/exit"))}function h(e){return a.Z.post("/idcsmart_cloud/".concat(e.id,"/reinstall"),e)}function f(e){return a.Z.get("/idcsmart_cloud/".concat(e,"/template"))}function x(e){return a.Z.get("/product/".concat(e.product_id,"/idcsmart_cloud/system_image"),{params:e})}function v(e){return a.Z.get("/idcsmart_cloud/".concat(e.id,"/image/check"),{params:e})}function j(e){return a.Z.get("/ssh_key",{params:e})}function Z(e){return a.Z.post("/idcsmart_cloud/".concat(e.id,"/image/order"),e)}},91993:function(e,t,n){n.d(t,{Bd:function(){return r},FD:function(){return c},Mf:function(){return d},OJ:function(){return o},Rl:function(){return s},rG:function(){return l},xA:function(){return u},xp:function(){return i}});var a=n(71584);function s(e){return a.Z.get("/idcsmart_cloud_ip",{params:e})}function c(e){return a.Z.put("/idcsmart_cloud_ip/".concat(e.id,"/mount"),e)}function r(e){return a.Z.put("/idcsmart_cloud_ip/".concat(e,"/umount"))}function i(e){return a.Z.get("/product/".concat(e.id,"/idcsmart_cloud_ip/package"),{params:e})}function o(e){return a.Z.get("/idcsmart_cloud",{params:e})}function l(e){return a.Z.get("/idcsmart_cloud/".concat(e))}function u(e){return a.Z.get("/idcsmart_cloud_ip/duration_price",{params:e})}function d(e){return a.Z.get("/idcsmart_cloud/".concat(e.id,"/ip"),{params:e})}},3432:function(e,t,n){n.d(t,{H3:function(){return h},JT:function(){return l},LX:function(){return p},OB:function(){return j},PS:function(){return r},Rp:function(){return u},So:function(){return o},XW:function(){return v},Y0:function(){return d},YW:function(){return m},c6:function(){return f},cC:function(){return x},cW:function(){return i},n7:function(){return Z},vm:function(){return c}});var a=n(1413),s=n(71584);function c(e){return s.Z.get("/order",{params:(0,a.Z)({},e)})}function r(e){return s.Z.get("/transaction",{params:(0,a.Z)({},e)})}function i(e){return s.Z.get("/order/".concat(e))}function o(e){return s.Z.post("/pay",e)}function l(){return s.Z.get("/account")}function u(e){return s.Z.get("/credit",{params:(0,a.Z)({},e)})}function d(){return s.Z.get("/gateway")}function m(e){return s.Z.post("/credit",e)}function p(e){return s.Z.get("/pay/".concat(e,"/status"))}function h(e){return s.Z.post("/recharge",(0,a.Z)({},e))}function f(e){return s.Z.post("/pay",(0,a.Z)({},e))}function x(e){return s.Z.get("withdraw/rule/credit",{params:e})}function v(e){return s.Z.post("/withdraw",(0,a.Z)({},e))}function j(){return s.Z.get("/refund/pending/amount")}function Z(e){return s.Z.get("/promo_code/host/".concat(e,"/promo_code"))}},58592:function(e,t,n){n.d(t,{$0:function(){return m},TA:function(){return x},Yo:function(){return j},cy:function(){return c},dO:function(){return l},es:function(){return f},ex:function(){return o},iE:function(){return u},oe:function(){return v},qX:function(){return i},qk:function(){return p},rd:function(){return s},re:function(){return d},zB:function(){return h},zG:function(){return r}});var a=n(71584);function s(e){return a.Z.get("/vpc",{params:e})}function c(e){return a.Z.post("/vpc",e)}function r(e){return a.Z.put("/vpc/".concat(e.id),e)}function i(e){return a.Z.delete("/vpc/".concat(e))}function o(e){return a.Z.get("/security_group",{params:e})}function l(e,t){return"add"===e?a.Z.post("/security_group",t):"update"===e?a.Z.put("/security_group/".concat(t.id),t):void 0}function u(e){return a.Z.delete("/security_group/".concat(e))}function d(e){return a.Z.get("/security_group/".concat(e.id,"/rule"),{params:e})}function m(e,t){return"add"===e?a.Z.post("/security_group/".concat(t.id,"/rule"),t):"update"===e?a.Z.put("/security_group/rule/".concat(t.id),t):void 0}function p(e){return a.Z.delete("/security_group/rule/".concat(e))}function h(e){return a.Z.post("/security_group/".concat(e.id,"/rule/batch"),e)}function f(e){return a.Z.get("/security_group/".concat(e.id,"/host"),{params:e})}function x(e){return a.Z.post("/security_group/".concat(e.id,"/host/").concat(e.host_id),e)}function v(e){return a.Z.delete("/security_group/".concat(e.id,"/host/").concat(e.host_id))}function j(){return a.Z.get("/idcsmart_cloud/all")}},24779:function(e,t,n){n.d(t,{Z:function(){return c}});n(72791);var a=n(69221),s=n(80184);function c(e){var t=e.page;return(0,s.jsx)(a.Z,{total:e.total,pageSize:t.limit,showSizeChanger:!0,pageSizeOptions:e.pageSizeOptions||[10,20,30,50,100],current:t.page,showTitle:!1,onChange:function(t,n){e.changePage(t,n)},showTotal:function(e,t){return"\u663e\u793a".concat(t[0],"-").concat(t[1]," \u7684 ").concat(e)}})}},92933:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(72791),s=n(33168),c=n(21830),r=n.n(c);function i(e){var t=(0,s.$)().t,n=function(){r().fire({title:e.title?e.title:t("common.delete"),text:e.text?e.text:t("common.tip")+"\uff1f",customClass:{title:"del-tit",icon:e.icon?"warning-icon":"del-icon",text:"del-text"},icon:e.icon||"info",showCancelButton:!0,confirmButtonText:t("common.sure"),cancelButtonText:t("common.cancel")}).then((function(t){t.isConfirmed?(e.closeDialog(),e.submitDel()):t.isDismissed&&e.closeDialog()}))};return(0,a.useEffect)((function(){n()}),[e]),null}},46143:function(e,t,n){n.d(t,{Z:function(){return v}});var a=n(74165),s=n(15861),c=n(29439),r=n(72791),i=n(70819),o=n(33168),l=(n(60151),n(83734)),u=n(50419),d=n(70478),m=n(87309),p=n(32014),h=n(71823),f=n(80184),x=l.Z.Option;function v(e){var t=(0,o.$)().t,n=(0,i.s0)(),v=(0,r.useState)({}),j=(0,c.Z)(v,2),Z=j[0],g=j[1],N=(0,r.useState)(""),_=(0,c.Z)(N,2),y=_[0],b=_[1],w=(0,r.useState)({}),k=(0,c.Z)(w,2),C=k[0],S=k[1],I=(0,r.useState)(!1),F=(0,c.Z)(I,2),Y=F[0],P=F[1],T=(0,r.useState)([]),E=(0,c.Z)(T,2),D=E[0],B=E[1],M=(0,r.useState)(""),O=(0,c.Z)(M,2),H=O[0],z=O[1],R=(0,r.useState)(!0),G=(0,c.Z)(R,2),A=G[0],V=G[1],L=(0,r.useState)(!1),$=(0,c.Z)(L,2),q=$[0],W=$[1],X=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.dz(e.orderId);case 3:n=t.sent,g(n.data.data.order),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),u.ZP.error(t.t0.data.msg);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),J=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.nE();case 3:t=e.sent,S(t.data.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),u.ZP.error(e.t0.data.msg);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.Gl();case 3:t=e.sent,B(t.data.data.list),b(t.data.data.list[0].name),U(t.data.data.list[0].name),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),u.ZP.error(e.t0.data.msg);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n){var s,c;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s={gateway:n,id:e.orderId},t.next=4,h.So(s);case 4:c=t.sent,z(c.data.data.html),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),Q=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n,s){var c,r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n),b(n),!(Number(C.account.credit)>=Number(Z.amount)&&Y)){t.next=4;break}return t.abrupt("return",!1);case 4:return t.prev=4,c={gateway:n,id:"object"!==typeof s&&s||e.orderId},t.next=8,h.So(c);case 8:r=t.sent,z(r.data.data.html),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(4);case 14:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e,n){return t.apply(this,arguments)}}(),ee=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,W(!0),n={gateway:y,id:e.orderId},t.next=5,h.So(n);case 5:W(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),W(!1);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),te=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n){var s,c,r,i;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return P(n.target.checked),n.target.checked||V(!0),t.prev=2,t.next=5,h.YW({id:e.orderId,use:n.target.checked?1:0});case 5:return s=t.sent,c=s.data.data.id,t.next=9,h.dz(c);case 9:r=t.sent,i=r.data.data.order,n.target.checked?Number(C.account.credit)>=Number(i.amount)?V(!1):(V(!0),Q(y,c)):Q(y,c),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}(),ne=function(){e.handleCancel?e.handleCancel():(clearInterval(e.timer),n("/finance/order",{replace:!0}))};(0,r.useEffect)((0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:return e.next=4,J();case 4:return e.next=6,K();case 6:case"end":return e.stop()}}),e)}))),[]);var ae=void 0===e.visible||e.visible;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(d.Z,{visible:ae,title:t("common.pay"),onOk:ee,onCancel:ne,className:"pay-modal",closable:!1,footer:!A&&[(0,f.jsx)(m.Z,{className:"sure",loading:q,onClick:ee,children:t("cloud.sure_pay")},"submit"),(0,f.jsx)(m.Z,{onClick:ne,className:"cancel",children:t("common.cancel")},"back")],children:(0,f.jsxs)("div",{className:"cloud-pay-box",children:[(0,f.jsxs)("div",{className:"item first",children:[(0,f.jsx)("div",{className:"l-text",children:t("common.pay_way")}),(0,f.jsxs)("div",{className:"r-text",children:[D.length>0&&(0,f.jsx)(l.Z,{value:y,onChange:Q,children:D.map((function(e){return(0,f.jsx)(x,{value:e.name,children:e.title},e.id)}))}),(0,f.jsx)(p.Z,{onChange:te,checked:Y,children:t("cloud.use_balance")})]})]}),(0,f.jsxs)("div",{className:"item",children:[(0,f.jsx)("div",{className:"l-text",children:t("cloud.order_amount")}),(0,f.jsxs)("div",{className:"r-text order-num",children:["\uffe5\xa0",Z.amount]})]}),(0,f.jsxs)("div",{className:"item last",children:[(0,f.jsx)("div",{className:"l-text",children:t("cloud.pay_amount")}),(0,f.jsxs)("div",{className:"r-text pay-num",children:[(0,f.jsxs)("p",{className:"paid",children:["\uffe5",Y?(Number(Z.amount)-Number(C.account.credit)<=0?0:Number(Z.amount)-Number(C.account.credit)).toFixed(2):Number(Z.amount).toFixed(2)]}),Y&&(0,f.jsxs)("p",{className:"balance",children:["-\uffe5",(Number(C.account.credit)>=Number(Z.amount)?Number(Z.amount):Number(C.account.credit)).toFixed(2)]})]})]}),A&&(0,f.jsx)("div",{className:"item pay-html",children:(0,f.jsx)("div",{dangerouslySetInnerHTML:{__html:H}})})]})})})}},51697:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(29439),s=(n(72791),n(33168)),c=n(77483),r=n(70478),i=n(68678),o=n(32014),l=n(87309),u=n(80184);function d(e){var t=(0,s.$)().t,n=c.Z.useForm(),d=(0,a.Z)(n,1)[0],m=function(){e.optCancel()};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.Z,{title:e.optTitle,forceRender:!0,visible:!0,onCancel:m,footer:null,className:"power-modal",closable:!1,children:(0,u.jsxs)(c.Z,{form:d,initialValues:{host_name:e.info.name,remember:!1},onFinish:function(){var t=d.getFieldsValue().remember;e.onFinish(t)},autoComplete:"off",children:[(0,u.jsx)(c.Z.Item,{label:t("cloud.host_name"),colon:!1,name:"host_name",children:(0,u.jsx)(i.Z,{disabled:!0})}),"on"!==e.optType&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"tip",children:t("cloud.tip19")}),(0,u.jsx)(c.Z.Item,{colon:!1,name:"remember",valuePropName:"checked",className:"force-off",children:(0,u.jsx)(o.Z,{children:t("cloud.tip20")})})]}),(0,u.jsxs)(c.Z.Item,{className:"opt-btn",children:[(0,u.jsx)(l.Z,{type:"primary",htmlType:"submit",className:"sure",children:t("common.sure")}),(0,u.jsx)(l.Z,{onClick:m,className:"cancel",children:t("common.cancel")})]})]})})})}},58126:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(72791);function s(){var e=(0,a.useRef)(!1);return(0,a.useEffect)((function(){return e.current=!0,function(){e.current=!1}})),e}},85874:function(e,t,n){n.r(t),n.d(t,{default:function(){return ce}});var a=n(74165),s=n(15861),c=n(29439),r=n(72791),i=n(43504),o=n(50419),l=n(71823),u=n(42969),d=(n(91646),n(68825)),m=n(59220),p=n(14057),h=n(51697),f=n(60151),x=n(80184);function v(e){var t=function(t){e.changeTab(t.target.getAttribute("data-name"))},i=[{name:"summary",title:(0,d.t)("cloud.summary")},{name:"charts",title:(0,d.t)("cloud.charts")},{name:"manage",title:(0,d.t)("cloud.manage")},{name:"disk",title:(0,d.t)("cloud.disk")},{name:"network",title:(0,d.t)("cloud.network")},{name:"upgrade",title:(0,d.t)("cloud.upgrade")},{name:"backup_snapshot",title:(0,d.t)("cloud.backup_snapshot")},{name:"log",title:(0,d.t)("cloud.log")}],o=e.detail,l=e.host;console.log("host",l);var v=(0,r.useState)({}),j=(0,c.Z)(v,2),Z=(j[0],j[1],(0,r.useState)("")),g=(0,c.Z)(Z,2),N=g[0],_=g[1],y=(0,r.useState)(!1),b=(0,c.Z)(y,2),w=b[0],k=b[1],C=(0,r.useState)(""),S=(0,c.Z)(C,2),I=S[0],F=S[1];(0,r.useRef)();(0,r.useEffect)((function(){}),[]);var Y=function(){k(!1)},P=function(){e.refresh()},T=function(e,t){(0,f.vC)(e,t,(function(){Y()}))},E=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.B2(l.id);case 3:t=e.sent,window.open(t.data.data.url),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.$F(l.id);case 3:200===(t=e.sent).data.status&&(P(),T(t.data.msg,"success")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),T(e.t0.data.msg,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.oo(t,l.id);case 3:200===(n=e.sent).data.status&&(P(),T(n.data.msg,"success")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),T(e.t0.data.msg,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.jo(t,l.id);case 3:200===(n=e.sent).data.status&&(P(),T(n.data.msg,"success")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),T(e.t0.data.msg,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[o&&(0,x.jsxs)("div",{className:"cloud-card",children:[(0,x.jsxs)("div",{className:"t-info",children:[(0,x.jsxs)("div",{className:"l-info",children:[(0,x.jsx)("p",{className:"tit",children:l.product_name}),(0,x.jsxs)("p",{children:[(0,x.jsx)("img",{src:o.data_center.country_code&&n(85995)("./".concat(o.data_center.country_code,".png")),alt:"",className:"country_code"}),(0,x.jsx)("span",{children:o.data_center.city})]})]}),(0,x.jsxs)("div",{className:"r-info",children:[(0,x.jsx)(m.Z,{placement:"top",title:function(e){switch(e){case"on":return(0,d.t)("cloud.on");case"off":return(0,d.t)("cloud.off");case"operating":return(0,d.t)("cloud.operating");case"suspend":return(0,d.t)("cloud.Suspended");case"fault":return(0,d.t)("cloud.fault");default:return"Loading..."}}(e.type),getPopupContainer:function(){return document.getElementById("status")},children:(0,x.jsx)("span",{id:"status",children:e.loading?(0,x.jsx)(p.Z,{spin:!0}):(0,x.jsx)("img",{src:n(85995)("./".concat(e.type,".png")),alt:""})})}),(0,x.jsx)("img",{src:"/",alt:"",className:"os"}),(0,x.jsx)("span",{children:o.image.name}),(0,x.jsxs)("div",{className:"opt",children:[(0,x.jsx)("img",{src:n(97913),alt:"",onClick:function(){e.type&&("on"===e.type?(_((0,d.t)("cloud.tip17")),F("off")):"off"===e.type&&(_((0,d.t)("cloud.tip16")),F("on")),k(!0))}}),(0,x.jsx)("img",{src:n(95145),alt:"",onClick:function(){e.type&&(_((0,d.t)("cloud.tip18")),F("reboot"),k(!0))}}),(0,x.jsx)("img",{src:n(46685),alt:"",onClick:function(){e.type&&E()}})]})]})]}),(0,x.jsx)("div",{className:"tabs",children:i.map((function(n){return(0,x.jsx)("span",{"data-name":n.name,onClick:t,className:"".concat(e.activeTab===n.name?"active":""),children:n.title},n.name)}))})]}),w&&(0,x.jsx)(h.Z,{info:l,optTitle:N,optType:I,optCancel:Y,onFinish:function(e){switch(I){case"on":return D(e);case"off":return B(e);case"reboot":return M(e)}}})]})}var j=n(1413),Z=n(83734),g=n(68678),N=n(66106),_=n(30914),y=n(70478),b=n(87309),w=n(32014),k=n(21830),C=n.n(k),S=n(72426),I=n.n(S),F=n(33168),Y=n(90253),P=n(70819),T=n(3432),E=null,D=3e5;function B(){var e=Z.Z.Option,t=g.Z.TextArea,i=(0,F.$)().t,o=(0,P.s0)(),u=(0,r.useState)((function(){return window.location.hash.split("=")[1]})),d=(0,c.Z)(u,2),m=d[0],p=(d[1],(0,r.useState)()),h=(0,c.Z)(p,2),v=h[0],k=h[1],S=(0,r.useState)({Pending:"\u5f85\u5ba1\u6838",Suspending:"\u5f85\u505c\u7528",Suspend:"\u505c\u7528\u4e2d",Suspended:"\u5df2\u505c\u7528",Refund:"\u5df2\u9000\u6b3e",Reject:"\u5ba1\u6838\u9a73\u56de",Cancelled:"\u5df2\u53d6\u6d88"}),B=(0,c.Z)(S,1)[0],M=(0,r.useState)(0),O=(0,c.Z)(M,2),H=O[0],z=O[1],R=(0,r.useState)(!0),G=(0,c.Z)(R,2),A=(G[0],G[1],(0,r.useState)()),V=(0,c.Z)(A,2),L=V[0],$=V[1],q=(0,r.useState)(1),W=(0,c.Z)(q,2),X=W[0],J=W[1],K=(0,r.useState)(!1),U=(0,c.Z)(K,2),Q=U[0],ee=U[1],te=(0,r.useState)(),ne=(0,c.Z)(te,2),ae=ne[0],se=ne[1],ce=(0,r.useState)(),re=(0,c.Z)(ce,2),ie=re[0],oe=re[1],le=ie?Math.floor((1e3*ie.due_time-Date.now())/864e5):null,ue=(0,r.useState)(),de=(0,c.Z)(ue,2),me=de[0],pe=de[1],he=(0,r.useState)(),fe=(0,c.Z)(he,2),xe=fe[0],ve=fe[1],je=(0,r.useState)({Unpaid:{text:"\u672a\u4ed8\u6b3e"},Pending:{text:"\u5f00\u901a\u4e2d"},Active:{text:"\u5df2\u5f00\u901a"},Suspended:{text:"\u5df2\u6682\u505c"},Deleted:{text:"\u5df2\u5220\u9664"},Failed:{text:"\u5f00\u901a\u5931\u8d25"}}),Ze=(0,c.Z)(je,1)[0],ge=(0,r.useState)(),Ne=(0,c.Z)(ge,2),_e=Ne[0],ye=Ne[1],be=(0,r.useState)({host_id:Number(m),suspend_reason:[],type:""}),we=(0,c.Z)(be,2),ke=we[0],Ce=we[1],Se=(0,r.useState)(!1),Ie=(0,c.Z)(Se,2),Fe=Ie[0],Ye=Ie[1],Pe=(0,r.useState)(""),Te=(0,c.Z)(Pe,2),Ee=Te[0],De=Te[1],Be=(0,r.useState)(),Me=(0,c.Z)(Be,2),Oe=Me[0],He=Me[1],ze=(0,r.useState)(""),Re=(0,c.Z)(ze,2),Ge=Re[0],Ae=Re[1],Ve=(0,r.useState)(!0),Le=(0,c.Z)(Ve,2),$e=Le[0],qe=Le[1],We=(0,r.useState)(""),Xe=(0,c.Z)(We,2),Je=Xe[0],Ke=Xe[1],Ue=(0,r.useState)(!1),Qe=(0,c.Z)(Ue,2),et=Qe[0],tt=(Qe[1],(0,r.useState)(!1)),nt=(0,c.Z)(tt,2),at=nt[0],st=nt[1],ct=(0,r.useState)([]),rt=(0,c.Z)(ct,2),it=rt[0],ot=rt[1],lt=(0,r.useState)(),ut=(0,c.Z)(lt,2),dt=ut[0],mt=ut[1],pt=(0,r.useState)(!0),ht=(0,c.Z)(pt,2),ft=ht[0],xt=ht[1],vt=(0,r.useState)(),jt=(0,c.Z)(vt,2),Zt=jt[0],gt=jt[1],Nt=function(e,t){if(Ae(e),Number(dt)>=Number(Oe)&&at)return!1;var n={gateway:e,id:"object"!==typeof t&&t||Ee};(0,T.c6)(n).then((function(e){Ke(e.data.data.html)}))},_t=function(e){E&&clearInterval(E),E=setInterval((0,s.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,T.LX)(e||Ee);case 2:if(n=t.sent,D-=2e3,"Paid"!==n.data.code){t.next=10;break}return(0,f.vC)(n.data.msg,"success"),clearInterval(E),Ye(!1),xn(),t.abrupt("return",!1);case 10:if(0!==D){t.next=14;break}return clearInterval(E),Ye(!1),t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)}))),2e3)},yt=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={gateway:Ge,id:Ee},e.next=4,(0,T.So)(t);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),bt=function(){if(Ye(!1),clearInterval(E),at){var e={id:Ee,use:0};(0,T.YW)(e).then((function(e){})).catch((function(e){}))}o("/finance/order",{replace:!0})},wt=(0,r.useState)(),kt=(0,c.Z)(wt,2),Ct=kt[0],St=kt[1],It=(0,r.useState)(!1),Ft=(0,c.Z)(It,2),Yt=Ft[0],Pt=Ft[1],Tt=(0,r.useRef)(null),Et=(0,r.useState)([1,2,3]),Dt=(0,c.Z)(Et,2),Bt=Dt[0],Mt=Dt[1],Ot=(0,r.useState)([]),Ht=(0,c.Z)(Ot,2),zt=Ht[0],Rt=Ht[1],Gt=function(){l.rA({id:m}).then((function(e){if(200===e.data.status){z(0),Rt([]),k(null),Pt(!0);var t=e.data.data.host,n=1;t.map((function(e){e.id=n,n++})),St(t)}}))},At=function(){Rt([]),z(0)},Vt=(0,r.useState)(!1),Lt=(0,c.Z)(Vt,2),$t=Lt[0],qt=Lt[1],Wt=(0,r.useState)(""),Xt=(0,c.Z)(Wt,2),Jt=Xt[0],Kt=Xt[1],Ut=(0,r.useState)(""),Qt=(0,c.Z)(Ut,2),en=Qt[0],tn=Qt[1],nn=(0,r.useState)(""),an=(0,c.Z)(nn,2),sn=an[0],cn=an[1],rn=(0,r.useState)(""),on=(0,c.Z)(rn,2),ln=on[0],un=on[1],dn=(0,r.useState)(""),mn=(0,c.Z)(dn,2),pn=mn[0],hn=(mn[1],function(){Ce({host_id:Number(m),suspend_reason:null,type:""}),l.iS({host_id:m}).then((function(e){if(200===e.data.status){var t=e.data.data;ye(t),1==t.allow_refund?qt(!0):(0,f.vC)("\u975e\u5e38\u62b1\u6b49\uff0c\u7ed9\u60a8\u5e26\u6765\u4e0d\u4fbf\uff0c\u8be5\u4ea7\u54c1\u4e0d\u652f\u6301\u9000\u6b3e\uff0c\u82e5\u6709\u7591\u95ee\uff0c\u8bf7\u8054\u7cfb\u552e\u540e\u4eba\u5458\uff01","warning")}}))}),fn=function(){l.lp(m).then((function(e){if(200===e.data.status){var t=e.data.data.refund;if($(t),t&&"Reject"===t.status){var n=1e3*t.create_time;tn(I()(n).format("YYYY.MM.DD HH:mm")),t.type&&("Immediate"===t.type?Kt("\u7acb\u5373\u505c\u7528"):Kt("\u5230\u671f\u505c\u7528"))}if(t&&"Suspended"===t.status){var a=1e3*t.create_time;cn(I()(a).format("YYYY.MM.DD HH:mm")),t.type&&("Immediate"===t.type?un("\u7acb\u5373\u505c\u7528"):un("\u5230\u671f\u505c\u7528"))}}}))},xn=function(){l.ho(m).then((function(e){if(200===e.data.status){var t=e.data.data.host;oe(t)}}))};return(0,r.useEffect)((function(){return l.rG(m).then((function(e){200===e.data.status&&se(e.data.data)})),xn(),(0,Y.ef)().then((function(e){200===e.data.status&&ve(e.data.data)})),(0,T.Y0)().then((function(e){ot(e.data.data.list),Ae(e.data.data.list[0].name)})),(0,T.JT)().then((function(e){if(200===e.data.status){var t=e.data.data.account.credit;mt(t)}})),(0,T.n7)(m).then((function(e){if(200===e.data.status){var t=e.data.data.promo_code;pe(t)}})),fn(),function(){return clearInterval(E)}}),[]),(0,x.jsx)("div",{className:"summary",children:ae&&ie&&xe?(0,x.jsxs)("div",{children:[(0,x.jsxs)(N.Z,{gutter:{xs:8,sm:16,md:24,lg:30},children:[(0,x.jsx)(_.Z,{xs:{span:24},lg:{span:12},children:(0,x.jsxs)("div",{className:"cloud-card",children:[(0,x.jsx)("p",{className:"tit",children:i("cloud.product_info")}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("p",{className:"l-tit",children:"\u4ea7\u54c1\u540d\u79f0\uff1a"}),(0,x.jsx)("div",{className:"r-text",children:(0,x.jsx)("p",{children:ae.package.name?ae.package.name:"--"})})]}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("p",{className:"l-tit",children:"\u4ea7\u54c1\u914d\u7f6e\uff1a"}),(0,x.jsxs)("div",{className:"r-text",children:[(0,x.jsxs)("p",{children:[ae.cal.cpu?ae.cal.cpu:"--"," vCPU"]}),(0,x.jsxs)("p",{children:[ae.cal.memory?ae.cal.memory/1024:"--"," G RAM"]}),(0,x.jsxs)("p",{children:[ae.cal.disk_size?ae.cal.disk_size:"--"," G SSD Storage"]}),(0,x.jsxs)("p",{children:[ae.bw.flow?ae.bw.flow:"--"," TB/mo Transfer"]}),(0,x.jsxs)("p",{children:[ae.bw.bw?ae.bw.bw:"--"," Gbps Port speed"]})]})]}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("p",{className:"l-tit",children:"\u4e3b\u673a\u540d\uff1a"}),(0,x.jsx)("div",{className:"r-text",children:(0,x.jsx)("p",{children:ie.name?ie.name:"--"})})]}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("p",{className:"l-tit",children:"IP\uff1a"}),(0,x.jsx)("div",{className:"r-text",children:(0,x.jsx)("p",{children:ae.ip?ae.ip:"--"})})]})]})}),(0,x.jsx)(_.Z,{xs:{span:24},lg:{span:12},children:(0,x.jsxs)("div",{className:"cloud-card",children:[(0,x.jsx)("p",{className:"tit",children:i("cloud.finance_info")}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("p",{className:"l-tit",children:"\u9996\u6b21\u652f\u4ed8\u91d1\u989d\uff1a"}),(0,x.jsx)("div",{className:"r-text",children:(0,x.jsxs)("p",{children:[xe.currency_prefix,ie.first_payment_amount,xe.currency_code]})})]}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("p",{className:"l-tit",children:"\u72b6\u6001\uff1a"}),(0,x.jsx)("div",{className:"r-text",children:(0,x.jsx)("p",{children:Ze[ie.status].text})})]}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsxs)("p",{className:"l-tit",children:[i("common.begin_time"),"\uff1a"]}),(0,x.jsx)("div",{className:"r-text",children:(0,x.jsx)("p",{children:ie.active_time?I()(1e3*ie.active_time).format("YYYY-MM-DD HH:mm"):"--"})})]}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsxs)("p",{className:"l-tit",children:[i("common.due_time"),"\uff1a"]}),(0,x.jsx)("div",{className:"r-text",children:(0,x.jsxs)("p",{children:[1e3*ie.due_time?I()(1e3*ie.due_time).format("YYYY-MM-DD HH:mm"):"--",ie.active_time&&ie.due_time?"(".concat(le,"\u5929)"):null]})})]}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("p",{className:"l-tit",children:"\u8d39\u7528\uff1a"}),(0,x.jsx)("div",{className:"r-text",children:(0,x.jsxs)("p",{children:[xe.currency_prefix,ie.renew_amount,xe.currency_code,"/",ie.billing_cycle_name?ie.billing_cycle_name:null,"Unpaid"===ie.status||"Failed"===ie.status?null:L?"Cancelled"===L.status||"Reject"===L.status?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:"renew-btn",onClick:Gt,children:"\u7eed\u8d39"}),(0,x.jsx)("span",{className:"stop-btn",onClick:hn,children:"\u7533\u8bf7\u505c\u7528"})]}):"Pending"===L.status||"Suspend"===L.status?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:"un-renew-btn",children:"\u7eed\u8d39"}),(0,x.jsx)("span",{className:"stoping-btn",children:B[L.status]}),(0,x.jsx)("span",{className:"quit-stop-btn",onClick:function(){C().fire({text:"\u60a8\u5c06\u53d6\u6d88\u505c\u7528\uff0c\u662f\u5426\u7ee7\u7eed",icon:"warning",showCancelButton:!0,confirmButtonColor:"#5C5EE4",confirmButtonText:"\u786e\u8ba4",cancelButtonText:"\u53d6\u6d88",customClass:{cancelButton:"ssh-cancel-button"}}).then((function(e){if(e.value){console.log(L);var t=L.id;l.dr({id:t}).then((function(e){200===e.data.status&&((0,f.vC)("\u8bf7\u6c42\u53d6\u6d88\u505c\u7528\u6210\u529f!","success"),fn())}))}}))},children:"\u53d6\u6d88\u505c\u7528"})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:"un-renew-btn",children:"\u7eed\u8d39"}),(0,x.jsx)("span",{className:"stoping-btn",children:B[L.status]})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:"renew-btn",onClick:Gt,children:"\u7eed\u8d39"}),(0,x.jsx)("span",{className:"stop-btn",onClick:hn,children:"\u7533\u8bf7\u505c\u7528"})]})]})})]}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("p",{className:"l-tit",children:"\u4f18\u60e0\u7801\uff1a"}),(0,x.jsx)("div",{className:"r-text",children:(0,x.jsx)("p",{children:me&&me.length>0?me.map((function(e){return(0,x.jsxs)("span",{children:[e,"\xa0"]},e)})):"--"})})]}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("p",{className:"l-tit",children:"\u5ba2\u6237\u5907\u6ce8\uff1a"}),(0,x.jsx)("div",{className:"r-text ",children:(0,x.jsxs)("div",{className:"r-notes",children:[ft?(0,x.jsx)("p",{children:ie.notes?ie.notes:"--"}):(0,x.jsx)(g.Z,{className:"notes-input",onChange:function(e){gt(e.target.value)},value:Zt}),(0,x.jsx)("div",{className:"notes-btn",onClick:function(){if(ft)gt(ie.notes),xt(!ft);else{console.log("notes",Zt);var e={id:m,notes:Zt};l.P4(e).then((function(e){200===e.data.status&&(xn(),xt(!ft))}))}},children:"\u4fee\u6539\u5907\u6ce8"})]})})]}),(0,x.jsxs)("div",{className:"item",children:[Jt?(0,x.jsx)("div",{className:"err-msg",children:(0,x.jsxs)("div",{className:"err-text",children:[" (\u4ea7\u54c1\u4e8e",en,"\u7533\u8bf7",(0,x.jsxs)("span",{className:"important",children:["\xa0",Jt,"\xa0"]}),"\u5931\u8d25\uff0c",(0,x.jsx)("a",{onClick:function(){(0,f.vC)("\u9a73\u56de\u539f\u56e0\uff1a".concat(L.reject_reason),"info")},children:"\u67e5\u770b\u539f\u56e0"})," )"]})}):null,ln?(0,x.jsx)("div",{className:"info-msg",children:(0,x.jsxs)("div",{className:"info-text",children:[" (\u4ea7\u54c1\u4e8e",sn,"\u7533\u8bf7",(0,x.jsxs)("span",{className:"important",children:["\xa0",ln,"\xa0"]}),",\u4e8e",pn,"\u81ea\u52a8\u5220\u9664)"]})}):null]})]})})]}),_e?(0,x.jsx)(y.Z,{visible:$t,footer:null,centered:!0,closable:!1,style:{borderRadius:"10px",overflow:"auto"},maskClosable:!0,keyboard:!0,getContainer:!1,onCancel:function(){return qt(!1)},children:(0,x.jsxs)("div",{className:"modal-unopen",children:[(0,x.jsx)("div",{className:"modal-title",children:_e.host.amount>=0?"\u7533\u8bf7\u9000\u6b3e":"\u7533\u8bf7\u505c\u7528"}),(0,x.jsxs)("div",{className:"modal-form",children:[(0,x.jsxs)(N.Z,{children:[(0,x.jsx)(_.Z,{span:5,children:(0,x.jsx)("div",{className:"row-l",children:"\u4ea7\u54c1\u4fe1\u606f"})}),(0,x.jsx)(_.Z,{span:19,children:(0,x.jsx)("div",{className:"row-r",children:(0,x.jsxs)("div",{className:"item",style:{padding:"15px 0"},children:[(0,x.jsx)("p",{className:"l-tit",children:"\u4ea7\u54c1\u914d\u7f6e\uff1a"}),(0,x.jsxs)("div",{className:"r-text",children:[(0,x.jsxs)("p",{children:[ae.cal.cpu," vCPU"]}),(0,x.jsxs)("p",{children:[ae.cal.memory/1024," G RAM"]}),(0,x.jsxs)("p",{children:[ae.cal.disk_size," G SSD Storage"]}),(0,x.jsxs)("p",{children:[ae.bw.flow," TB/mo Transfer"]}),(0,x.jsxs)("p",{children:[ae.bw.bw," Gbps Port speed"]})]}),(0,x.jsx)("p",{className:"l-tit",children:"\u8ba2\u8d2d\u65f6\u95f4\uff1a"}),(0,x.jsx)("div",{className:"r-text",children:(0,x.jsx)("p",{children:I()(1e3*ie.active_time).format("YYYY-MM-DD HH:mm")})}),_e.host.amount>=0?(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"l-tit",children:"\u8ba2\u8d2d\u91d1\u989d\uff1a"}),(0,x.jsx)("div",{className:"r-text",children:(0,x.jsxs)("p",{children:[xe.currency_prefix,_e.host.first_payment_amount,xe.currency_code]})})]}):null]})})})]}),(0,x.jsxs)(N.Z,{children:[(0,x.jsx)(_.Z,{span:5,children:(0,x.jsx)("div",{className:"row-l row-center",children:"\u505c\u7528\u539f\u56e0"})}),(0,x.jsx)(_.Z,{span:19,children:(0,x.jsx)("div",{className:"row-r",children:1!==_e.reason_custom?(0,x.jsx)(Z.Z,{mode:"multiple",showArrow:!0,allowClear:!0,size:"large",style:{width:"100%"},onChange:function(e){Ce((0,j.Z)((0,j.Z)({},ke),{},{suspend_reason:e}))},children:_e.reasons.map((function(t){return(0,x.jsx)(e,{value:t.id,children:t.content},t.id)}))}):(0,x.jsx)(t,{onChange:function(e){Ce((0,j.Z)((0,j.Z)({},ke),{},{suspend_reason:e.target.value}))},rows:4,placeholder:"\u8bf7\u8f93\u5165\u505c\u7528\u539f\u56e0"})})})]}),(0,x.jsxs)(N.Z,{children:[(0,x.jsx)(_.Z,{span:5,children:(0,x.jsx)("div",{className:"row-l row-center",children:"\u505c\u7528\u65f6\u95f4"})}),(0,x.jsx)(_.Z,{span:19,children:(0,x.jsx)("div",{className:"row-r",children:(0,x.jsxs)(Z.Z,{size:"large",style:{width:"100%"},onChange:function(e){Ce((0,j.Z)((0,j.Z)({},ke),{},{type:e}))},children:[(0,x.jsx)(e,{value:"Expire",children:"\u5230\u671f\u540e"}),(0,x.jsx)(e,{value:"Immediate",children:"\u7acb\u5373"})]})})})]}),_e.host.amount>=0?(0,x.jsxs)(N.Z,{children:[(0,x.jsx)(_.Z,{span:5,children:(0,x.jsx)("div",{className:"row-l",children:"\u9000\u6b3e\u91d1\u989d"})}),(0,x.jsx)(_.Z,{span:19,children:(0,x.jsx)("div",{className:"row-right",children:"Immediate"===ke.type?xe.currency_prefix+_e.host.amount+xe.currency_code:xe.currency_prefix+"0"+xe.currency_code})})]}):null]}),(0,x.jsxs)("div",{className:"modal-footer",children:[(0,x.jsx)(b.Z,{className:"btn-ok",onClick:function(){console.log(ke);var e=!0;ke.suspend_reason||((0,f.vC)("\u8bf7\u8f93\u5165\u505c\u7528\u539f\u56e0","error"),e=!1),ke.type||((0,f.vC)("\u8bf7\u9009\u62e9\u505c\u7528\u65f6\u95f4","error"),e=!1),e&&l.F(ke).then((function(e){200===e.data.status&&((0,f.vC)("\u7533\u8bf7\u505c\u7528\u6210\u529f\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u5ba1\u6838","success"),qt(!1),xn(),fn())}))},children:_e.host.amount>=0?"\u786e\u8ba4\u9000\u6b3e":"\u786e\u8ba4\u505c\u7528"}),(0,x.jsx)(b.Z,{className:"btn-no",onClick:function(){return qt(!1)},children:"\u53d6\u6d88"})]})]})}):null,(0,x.jsx)(y.Z,{visible:Yt,footer:null,centered:!0,closable:!1,style:{borderRadius:"10px",overflow:"auto"},maskClosable:!0,keyboard:!0,getContainer:!1,width:"708px",onCancel:function(){return Pt(!1)},children:(0,x.jsxs)("div",{className:"modal-renew",children:[(0,x.jsx)("div",{className:"modal-title",children:"\u7eed\u8d39"}),(0,x.jsxs)("div",{className:"modal-top",children:[(0,x.jsx)("div",{className:"top-l",children:(0,x.jsx)("img",{onClick:function(){var e=X;if(e>1&&(J(e-=1),At()),Bt[0]>1){var t=Bt;t[0]=t[0]-1,t[1]=t[1]-1,t[2]=t[2]-1,Mt(t)}},src:n(96279)})}),(0,x.jsx)("div",{className:"top-m",children:Ct?Ct.map((function(e){return(0,x.jsxs)("span",{onClick:function(){J(e.id),At()},className:e.id===Bt[0]||e.id===Bt[1]||e.id===Bt[2]?e.id===X?"m-card active":"m-card":"m-card hiden",children:[(0,x.jsx)("span",{className:"cycle",children:e.billing_cycle}),(0,x.jsxs)("span",{className:"money",children:[(0,x.jsx)("span",{className:"money-prefix",children:xe.currency_prefix}),(0,x.jsx)("span",{className:"money-num",children:e.price})]})]},e.id)})):null}),(0,x.jsx)("div",{className:"top-r",children:(0,x.jsx)("img",{onClick:function(){var e=X;if(e<Ct.length&&(e+=1,J(e++),At()),Bt[2]<Ct.length){var t=Bt;t[0]=t[0]+1,t[1]=t[1]+1,t[2]=t[2]+1,Mt(t)}},src:n(16292)})})]}),(0,x.jsx)("div",{className:"modal-middle",children:(0,x.jsxs)("div",{className:"main",children:[(0,x.jsx)("div",{className:"text",children:"\u5b9e\u4ed8\uff1a"}),(0,x.jsxs)("div",{className:"money",children:[(0,x.jsx)("span",{className:"pre",children:xe.currency_prefix}),(0,x.jsx)("span",{className:"num",children:Ct&&Ct[X-1].price-H>0?Ct[X-1].price-H:0}),(0,x.jsx)("a",{className:"btn",onClick:function(){ee(!Q),k(null)},children:"\u4f18\u60e0\u7801"})]}),(0,x.jsxs)("div",{className:"operation",style:{display:Q?"":"none"},children:[(0,x.jsx)(g.Z,{placeholder:"\u8bf7\u8f93\u5165\u4f18\u60e0\u7801",className:"o-input",onChange:function(e){k(e.target.value)},value:v,ref:Tt}),(0,x.jsx)(b.Z,{className:"o-btn",onClick:function(){var e=Tt.current.input.value;if(!e)return(0,f.vC)("\u8bf7\u8f93\u5165\u4f18\u60e0\u7801","error"),!1;var t=!1;if(zt.map((function(n){if(n.promo_code===e)return t=!0,console.log("\u91cd\u590d\u4f7f\u7528"),!1})),t)return(0,f.vC)("\u8bf7\u52ff\u91cd\u590d\u4f7f\u7528\u4f18\u60e0\u7801\uff01","warning"),!1;var n=Ct[X-1].price,a=Ct[X-1].duration,s={promo_code:e,scene:"Renew",total:n,cycles:[{product_id:m,amount:n,billing_cycle_time:a,congig_options:{package_id:ae.package.id}}]};l.Td(s).then((function(t){if(200===t.data.status){var n=t.data.data;zt&&zt.length>0?zt[0].overlay?n.overlay?(n.promo_code=e,zt.push(n),z((function(e){return Number(e)+Number(n.discount)})),Rt(zt),ee(!1)):(0,f.vC)("\u4e0d\u80fd\u53e0\u52a0\u4f7f\u7528\u8be5\u4f18\u60e0\u7801","warning"):(0,f.vC)("\u5df2\u4f7f\u7528\u7684\u4f18\u60e0\u7801\u4e0d\u652f\u6301\u53e0\u52a0\u4f7f\u7528","warning"):(n.promo_code=e,zt.push(n),z((function(e){return Number(e)+Number(n.discount)})),Rt(zt),ee(!1))}}))},children:"\u786e\u5b9a"})]}),(0,x.jsx)("div",{className:"details",children:zt?zt.map((function(e){return(0,x.jsxs)("span",{className:"d-item",children:[(0,x.jsxs)("span",{className:"item-pre",children:["-",xe.currency_prefix,e.discount]}),(0,x.jsxs)("span",{className:"item-code",children:["(\u4f18\u60e0\u7801",e.promo_code,")"]}),(0,x.jsx)("span",{className:"item-out",onClick:function(){!function(e){var t=zt.filter((function(t){return t.promo_code===e}));z((function(e){return e-Number(t[0].discount)}));var n=zt.filter((function(t){return t.promo_code!==e}));console.log(zt),Rt(n)}(e.promo_code)},children:(0,x.jsx)("div",{className:"item-in"})})]},e.promo_code)})):null})]})}),(0,x.jsxs)("div",{className:"modal-bottom",children:[(0,x.jsx)(b.Z,{className:"btn-ok",onClick:function(){var e=[];zt&&zt.map((function(t){e.push(t.promo_code)}));var t={id:Number(m),billing_cycle:Ct[X-1].billing_cycle,customfield:{promo_code:e}};l.xG(t).then((function(e){if(200===e.data.status){Pt(!1);var t=e.data.data.id,n=Ct[X-1].price-H;De(t),function(e,t){E&&clearInterval(E),st(!1),D=3e5,He(t),De(e),Ye(!0),Nt(it[0].name,e),_t(e)}(t,n)}}))},children:"\u786e\u8ba4\u7eed\u8d39"}),(0,x.jsx)(b.Z,{className:"btn-no",onClick:function(){return Pt(!1)},children:"\u53d6\u6d88"})]})]})}),(0,x.jsx)(y.Z,{visible:Fe,title:i("common.pay"),onOk:yt,onCancel:bt,className:"pay-modal",closable:!1,getContainer:!1,footer:$e?null:[(0,x.jsx)(b.Z,{className:"sure",loading:et,onClick:yt,children:i("cloud.sure_pay")},"submit"),(0,x.jsx)(b.Z,{onClick:bt,className:"cancel",children:i("common.cancel")},"back")],children:(0,x.jsxs)("div",{className:"cloud-pay-box",children:[(0,x.jsxs)("div",{className:"item first",children:[(0,x.jsx)("div",{className:"l-text",children:i("common.pay_way")}),(0,x.jsxs)("div",{className:"r-text-l",children:[it.length>0&&(0,x.jsx)(Z.Z,{value:Ge,onChange:Nt,children:it.map((function(t){return(0,x.jsx)(e,{value:t.name,children:t.title},t.id)}))}),(0,x.jsx)(w.Z,{onChange:function(e){st(e.target.checked),(0,T.YW)({id:Ee,use:e.target.checked?1:0}).then((function(t){var n=t.data.data.id;(0,T.cW)(n).then((function(t){var a=t.data.data.order;e.target.checked&&Number(dt)>=Number(a.amount)?qe(!1):(qe(!0),Nt(Ge,n))}))}))},checked:at,children:i("cloud.use_balance")})]})]}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("div",{className:"l-text",children:i("cloud.order_amount")}),(0,x.jsxs)("div",{className:"r-text-l order-num",children:["\uffe5\xa0",Oe]})]}),(0,x.jsxs)("div",{className:"item last",children:[(0,x.jsx)("div",{className:"l-text",children:i("cloud.pay_amount")}),(0,x.jsxs)("div",{className:"r-text-l pay-num",children:[(0,x.jsxs)("p",{className:"paid",children:["\uffe5",at?(Number(Oe)-Number(dt)<=0?0:Number(Oe)-Number(dt)).toFixed(2):Number(Oe).toFixed(2)]}),at&&(0,x.jsxs)("p",{className:"balance",children:["-\uffe5",(Number(Oe)>=Number(dt)?Number(dt):Number(Oe)).toFixed(2)]})]})]}),$e&&(0,x.jsx)("div",{className:"item pay-html",children:(0,x.jsx)("div",{dangerouslySetInnerHTML:{__html:Je}})})]})})]}):null})}var M=n(97859);function O(e){var t=e.id,n=((0,F.$)().t,(0,r.useState)(1)),i=(0,c.Z)(n,2),u=i[0],d=i[1],m=(0,r.useState)(1),p=(0,c.Z)(m,2),h=p[0],f=p[1],v=(0,r.useState)(1),j=(0,c.Z)(v,2),Z=j[0],g=j[1],y=(0,r.useState)(1),b=(0,c.Z)(y,2),w=b[0],k=b[1],C=function(e){d(e)},S=function(e){f(e)},Y=function(e){g(e)},P=function(e){k(e)};(0,r.useEffect)((function(){E("cpu",u)}),[u]),(0,r.useEffect)((function(){E("disk_io",h)}),[h]),(0,r.useEffect)((function(){E("memory",Z)}),[Z]),(0,r.useEffect)((function(){E("bw",w)}),[w]);var T=function(e){console.log(parseInt((new Date).getTime()/1e3),"time");var t=parseInt((new Date).getTime()/1e3);return 1===e?t-86400:2===e?t-259200:3===e?t-604800:4===e?t-2592e3:5===e?t-15552e3:void 0},E=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,s){var c,r,i,u,d,m,p,h,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=T(s),console.log(c,"getstarttime"),r={id:t,type:n,start_time:c},e.prev=3,e.next=6,l.Pf(r);case 6:i=e.sent,u=i.data.data.list,d=[],m=[],p=[],h=[],f=[],u.map((function(e){"cpu"===n&&(d.push(I()(1e3*e.time).format("YYYY-MM-DD HH:mm")),m.push((100*e.value).toFixed(2)),O(d,m)),"disk_io"===n&&(d.push(I()(1e3*e.time).format("YYYY-MM-DD HH:mm")),m.push((e.read_bytes/1024/1024).toFixed(2)),p.push((e.read_iops/1024/1024).toFixed(2)),h.push(e.write_bytes.toFixed(2)),f.push(e.write_iops.toFixed(2)),B(d,m,p,h,f)),"memory"===n&&(d.push(I()(1e3*e.time).format("YYYY-MM-DD HH:mm")),m.push((e.total/1024/1024).toFixed(2)),p.push((e.used/1024/1024).toFixed(2)),D(d,m,p)),"bw"===n&&(d.push(I()(1e3*e.time).format("YYYY-MM-DD HH:mm")),m.push(e.in_bw.toFixed(2)),p.push(e.out_bw.toFixed(2)),H(d,m,p))})),console.log(d,m,"data"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),o.ZP.error(e.t0.data.msg);case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(e,t,n){var a,s=document.getElementById("memorychart"),c=M.S1(s);(a={tooltip:{show:!0,trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value"},series:[{name:"\u603b\u5185\u5b58(MB)",data:t,type:"line",areaStyle:{}},{name:"\u5185\u5b58\u4f7f\u7528\u91cf(MB)",data:n,type:"line",areaStyle:{}}]})&&c.setOption(a)},B=function(e,t,n,a,s){var c,r=document.getElementById("iochart"),i=M.S1(r);(c={tooltip:{show:!0,trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value"},series:[{name:"\u8bfb\u53d6\u901f\u5ea6(MB/s)",data:t,type:"line",areaStyle:{}},{name:"\u5199\u5165\u901f\u5ea6(MB/s)",data:n,type:"line",areaStyle:{}},{name:"\u8bfb\u53d6IOPS",data:a,type:"line",areaStyle:{}},{name:"\u5199\u5165IOPS",data:s,type:"line",areaStyle:{}}]})&&i.setOption(c)},O=function(e,t){var n,a=document.getElementById("cpuchart"),s=M.S1(a);(n={tooltip:{show:!0,trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value"},series:[{name:"\u5360\u7528\u91cf\uff08%\uff09",data:t,type:"line",areaStyle:{}}]})&&s.setOption(n)},H=function(e,t,n){var a,s=document.getElementById("bwchart"),c=M.S1(s);(a={tooltip:{show:!0,trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value"},series:[{name:"\u8fdb\u5e26\u5bbd(bps)",data:t,type:"line",areaStyle:{}},{name:"\u51fa\u5e26\u5bbd(bps)",data:n,type:"line",areaStyle:{}}]})&&c.setOption(a)};return(0,x.jsx)("div",{className:"chart",children:(0,x.jsxs)(N.Z,{gutter:{xs:8,sm:16,md:24,lg:30},children:[(0,x.jsx)(_.Z,{xs:{span:24},lg:{span:12},children:(0,x.jsxs)("div",{className:"cloud-card chartbox",children:[(0,x.jsx)("p",{className:"chart_title",children:"CPU\u7528\u91cf\u56fe"}),(0,x.jsxs)("div",{className:"chart_type",children:[(0,x.jsx)("div",{className:"chart_type_item ".concat(1===u?"active":""),onClick:function(){return C(1)},children:"\u8fd124\u5c0f\u65f6"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(2===u?"active":""),onClick:function(){return C(2)},children:"\u8fd13\u5929"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(3===u?"active":""),onClick:function(){return C(3)},children:"\u8fd17\u5929"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(4===u?"active":""),onClick:function(){return C(4)},children:"\u8fd11\u6708"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(5===u?"active":""),onClick:function(){return C(5)},children:"\u8fd1\u534a\u5e74"}),(0,x.jsx)("div",{id:"cpu_chart"})]}),(0,x.jsx)("div",{id:"cpuchart",className:"echarts"})]})}),(0,x.jsx)(_.Z,{xs:{span:24},lg:{span:12},children:(0,x.jsxs)("div",{className:"cloud-card chartbox",children:[(0,x.jsx)("p",{className:"chart_title",children:"\u78c1\u76d8IO"}),(0,x.jsxs)("div",{className:"chart_type",children:[(0,x.jsx)("div",{className:"chart_type_item ".concat(1===h?"active":""),onClick:function(){return S(1)},children:"\u8fd124\u5c0f\u65f6"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(2===h?"active":""),onClick:function(){return S(2)},children:"\u8fd13\u5929"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(3===h?"active":""),onClick:function(){return S(3)},children:"\u8fd17\u5929"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(4===h?"active":""),onClick:function(){return S(4)},children:"\u8fd11\u6708"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(5===h?"active":""),onClick:function(){return S(5)},children:"\u8fd1\u534a\u5e74"})]}),(0,x.jsx)("div",{id:"iochart",className:"echarts"})]})}),(0,x.jsx)(_.Z,{xs:{span:24},lg:{span:12},children:(0,x.jsxs)("div",{className:"cloud-card chartbox",children:[(0,x.jsx)("p",{className:"chart_title",children:"\u5185\u5b58\u7528\u91cf"}),(0,x.jsxs)("div",{className:"chart_type",children:[(0,x.jsx)("div",{className:"chart_type_item ".concat(1===Z?"active":""),onClick:function(){return Y(1)},children:"\u8fd124\u5c0f\u65f6"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(2===Z?"active":""),onClick:function(){return Y(2)},children:"\u8fd13\u5929"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(3===Z?"active":""),onClick:function(){return Y(3)},children:"\u8fd17\u5929"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(4===Z?"active":""),onClick:function(){return Y(4)},children:"\u8fd11\u6708"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(5===Z?"active":""),onClick:function(){return Y(5)},children:"\u8fd1\u534a\u5e74"})]}),(0,x.jsx)("div",{id:"memorychart",className:"echarts"})]})}),(0,x.jsx)(_.Z,{xs:{span:24},lg:{span:12},children:(0,x.jsxs)("div",{className:"cloud-card chartbox",children:[(0,x.jsx)("p",{className:"chart_title",children:"\u7f51\u7edc\u5e26\u5bbd"}),(0,x.jsxs)("div",{className:"chart_type",children:[(0,x.jsx)("div",{className:"chart_type_item ".concat(1===w?"active":""),onClick:function(){return P(1)},children:"\u8fd124\u5c0f\u65f6"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(2===w?"active":""),onClick:function(){return P(2)},children:"\u8fd13\u5929"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(3===w?"active":""),onClick:function(){return P(3)},children:"\u8fd17\u5929"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(4===w?"active":""),onClick:function(){return P(4)},children:"\u8fd11\u6708"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(5===w?"active":""),onClick:function(){return P(5)},children:"\u8fd1\u534a\u5e74"})]}),(0,x.jsx)("div",{id:"bwchart",className:"echarts"})]})})]})})}var H=n(77483),z=n(92933),R=n(28624),G=n(46143),A=Z.Z.Option;function V(e){var t=H.Z.useForm(),o=(0,c.Z)(t,1)[0],d=H.Z.useForm(),p=(0,c.Z)(d,1)[0],h=H.Z.useForm(),v=(0,c.Z)(h,1)[0],k=(H.Z.useWatch("optOs",v),(0,F.$)().t),C=(0,i.lr)(),S=(0,c.Z)(C,1)[0],I=(e.detail,S.get("id")),P=(0,r.useState)(),T=(0,c.Z)(P,2),E=T[0],D=T[1],B=(0,r.useState)((function(){return"on"===e.type?"off":"on"})),M=(0,c.Z)(B,2),O=M[0],V=M[1],L=(0,r.useState)({}),$=(0,c.Z)(L,2),q=$[0],W=$[1],X=(0,r.useState)(""),J=(0,c.Z)(X,2),K=J[0],U=J[1],Q=(0,r.useState)(""),ee=(0,c.Z)(Q,2),te=ee[0],ne=ee[1],ae=(0,r.useState)(!1),se=(0,c.Z)(ae,2),ce=se[0],re=se[1],ie=(0,r.useState)(!1),oe=(0,c.Z)(ie,2),le=oe[0],ue=oe[1],de=(0,r.useState)(!1),me=(0,c.Z)(de,2),pe=me[0],he=me[1],fe=(0,r.useState)(!1),xe=(0,c.Z)(fe,2),ve=xe[0],je=xe[1],Ze=(0,r.useState)(null),ge=(0,c.Z)(Ze,2),Ne=ge[0],_e=ge[1],ye=(0,r.useState)([]),be=(0,c.Z)(ye,2),we=be[0],ke=be[1],Ce=(0,r.useState)([]),Se=(0,c.Z)(Ce,2),Ie=Se[0],Fe=Se[1],Ye=(0,r.useState)("os"),Pe=(0,c.Z)(Ye,2),Te=Pe[0],Ee=Pe[1],De=(0,r.useState)(),Be=(0,c.Z)(De,2),Me=(Be[0],Be[1]),Oe=(0,r.useState)([]),He=(0,c.Z)(Oe,2),ze=He[0],Re=He[1],Ge=(0,r.useState)("password"),Ae=(0,c.Z)(Ge,2),Ve=(Ae[0],Ae[1],(0,r.useState)(!1)),Le=(0,c.Z)(Ve,2),$e=Le[0],qe=Le[1],We=(0,r.useState)(0),Xe=(0,c.Z)(We,2),Je=Xe[0],Ke=Xe[1],Ue=(0,r.useState)([]),Qe=(0,c.Z)(Ue,2),et=Qe[0],tt=Qe[1],nt=(0,r.useState)("password"),at=(0,c.Z)(nt,2),st=at[0],ct=at[1],rt=(0,r.useState)(),it=(0,c.Z)(rt,2),ot=it[0],lt=it[1],ut=(0,r.useRef)(),dt=(0,r.useState)(3e5),mt=(0,c.Z)(dt,2),pt=mt[0],ht=mt[1],ft=(0,r.useState)(!1),xt=(0,c.Z)(ft,2),vt=xt[0],jt=xt[1],Zt=(0,r.useState)({id:I,password:""}),gt=(0,c.Z)(Zt,2),Nt=gt[0],_t=gt[1],yt=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.jn(I);case 3:t=e.sent,n=t.data.data.host,W(n),o.setFieldsValue({host_name:n.name}),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),bt=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Y.ef)();case 3:t=e.sent,D(t.data.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),wt=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.B2(I);case 3:t=e.sent,window.open(t.data.data.url),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),kt=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(){var n,s,c;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.y({product_id:30,data_center_id:e.detail.data_center.id});case 3:c=t.sent,ke(c.data.data.list),Re(c.data.data.list[0].image),v.setFieldsValue({optOs:{group:null===(n=c.data.data.list[0])||void 0===n?void 0:n.id,id:null===(s=c.data.data.list[0].image[0])||void 0===s?void 0:s.id}}),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),Ct=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.t4(I);case 3:t=e.sent,Fe(t.data.data.list),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),St=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.fw({page:1,limit:1e3});case 3:t=e.sent,tt(t.data.data.list),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){return bt(),kt(),Ct(),function(){return clearInterval(ut.current)}}),[]),(0,r.useEffect)((function(){yt(),V("on"===e.type?"off":"on")}),[e.type]);var It=function(){re(!1),ue(!1),he(!1)},Ft=function(){e.refresh()},Yt=function(e,t){(0,f.vC)(e,t,(function(){It()}))},Pt=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.$F(I);case 3:200===(t=e.sent).data.status&&(Ft(),Yt(t.data.msg,"success")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Yt(e.t0.data.msg,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Tt=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=o.getFieldsValue().remember,e.next=4,u.oo(t,I);case 4:200===(n=e.sent).data.status&&(Ft(),Yt(n.data.msg,"success")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Yt(e.t0.data.msg,"error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Et=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=o.getFieldsValue().remember,e.next=4,u.jo(t,I);case 4:200===(n=e.sent).data.status&&(Ft(),Yt(n.data.msg,"success")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Yt(e.t0.data.msg,"error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Dt=function(t){"rescue"===t&&Number(e.isEscue)?je(!0):(ue(!0),_e(t),p.resetFields(),"password"===t?(U(k("cloud.reset_password")),ne(k("cloud.tip22"))):"rescue"===t&&(U(k("cloud.escue_system")),ne(k("cloud.tip27"))),Mt())},Bt=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.cX(I);case 3:200===(t=e.sent).data.status&&(Yt(t.data.msg,"success"),Ft()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Yt(e.t0.data.msg,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Mt=function(e){var t=(0,f.jh)(10,1,1,0,1,void 0,1),n=[String.fromCharCode(Math.floor(25*Math.random()+65)),String.fromCharCode(Math.floor(25*Math.random()+97))][Math.round(Math.random())]+Math.floor(10*Math.random());"reinstall"!==e?(p.setFieldsValue({password:t+n}),_t((function(e){return(0,j.Z)((0,j.Z)({},e),{},{password:t+n})}))):v.setFieldsValue({pas:{input:t+n}})},Ot=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={id:I,password:t.password,type:"Windows"===t.type?1:2},"password"===Ne&&delete n.type,e.prev=2,"password"!==Ne){e.next=10;break}return e.next=6,u.c0(n);case 6:200===(s=e.sent).data.status&&(Yt(s.data.msg,"success"),Ft()),e.next=15;break;case 10:if("rescue"!==Ne){e.next=15;break}return e.next=13,u.G3(n);case 13:200===(c=e.sent).data.status&&(Yt(c.data.msg,"success"),Ft());case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(2),e.abrupt("return",Yt(e.t0.data.msg,"error"));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}(),Ht=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:I,image_id:t},e.next=4,u.ve(n);case 4:200===(s=e.sent).data.status&&(qe(1*s.data.data.price>0),Ke(s.data.data.price)),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),zt=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.uE(t);case 3:200===(n=e.sent).data.status&&(Ft(),Yt(n.data.msg,"success")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Yt(e.t0.data.msg,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Rt=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:I,image_id:v.getFieldsValue().optOs.id},e.next=3,u.LV(t);case 3:200===(n=e.sent).data.status&&(s=n.data.data.id,jt(!0),lt(s),Gt(s));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Gt=function(e){ut.current=setInterval((0,s.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.LX(e||ot);case 2:if(n=t.sent,ht((function(e){return e-2e3})),"Paid"!==n.data.code){t.next=9;break}return(0,f.vC)(n.data.msg,"success",(function(){qe(!1)})),clearInterval(ut.current),jt(!1),t.abrupt("return",!1);case 9:if("Paid"!==n.code&&0!==pt){t.next=13;break}return clearInterval(ut.current),jt(!1),t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t)}))),2e3)},At=function(){};return(0,x.jsxs)("div",{className:"manage",children:[(0,x.jsxs)(N.Z,{gutter:[{xs:8,sm:16,md:24,lg:30},{xs:8,sm:16,md:24,lg:30}],children:[(0,x.jsx)(_.Z,{xs:{span:24},md:{span:12},lg:{span:8},children:(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("div",{className:"icon",children:(0,x.jsx)("img",{src:n(64627),alt:""})}),(0,x.jsxs)("div",{className:"text",children:[(0,x.jsx)("p",{className:"tit",children:k("cloud.power")}),(0,x.jsxs)(Z.Z,{onChange:function(e){V(e)},value:O,getPopupContainer:function(e){return e.parentElement},children:["on"!==e.detail.power_status&&(0,x.jsx)(A,{value:"on",children:k("cloud.on")}),"off"!==e.detail.power_status&&(0,x.jsx)(A,{value:"off",children:k("cloud.off")}),(0,x.jsx)(A,{value:"restart",children:k("cloud.restart")})]}),(0,x.jsx)("div",{className:"c-btn",onClick:function(){switch(re(!0),o.resetFields(),O){case"on":return U(k("cloud.tip16"));case"off":return U(k("cloud.tip17"));case"restart":return U(k("cloud.tip18"));default:return U("title")}},children:k("common.sure")})]})]})}),(0,x.jsx)(_.Z,{xs:{span:24},md:{span:12},lg:{span:8},children:(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("div",{className:"icon",children:(0,x.jsx)("img",{src:n(18841),alt:""})}),(0,x.jsxs)("div",{className:"text",children:[(0,x.jsx)("p",{className:"tit",children:k("cloud.console")}),(0,x.jsx)("p",{className:"des",children:k("cloud.tip7")}),(0,x.jsx)("div",{className:"c-btn",onClick:wt,children:k("cloud.go_now")})]})]})}),(0,x.jsx)(_.Z,{xs:{span:24},md:{span:12},lg:{span:8},children:(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("div",{className:"icon",children:(0,x.jsx)("img",{src:n(36957),alt:""})}),(0,x.jsxs)("div",{className:"text",children:[(0,x.jsx)("p",{className:"tit",children:k("cloud.reset_password")}),(0,x.jsx)("p",{className:"des",children:k("cloud.tip8")}),(0,x.jsx)("div",{className:"c-btn",onClick:function(){return Dt("password")},children:k("cloud.go_now")})]})]})}),(0,x.jsx)(_.Z,{xs:{span:24},md:{span:12},lg:{span:8},children:(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("div",{className:"icon",children:(0,x.jsx)("img",{src:n(3811),alt:""})}),(0,x.jsxs)("div",{className:"text",children:[(0,x.jsx)("p",{className:"tit",children:k("cloud.escue_mode")}),(0,x.jsx)("p",{className:"des",children:k("cloud.tip9")}),(0,x.jsxs)("div",{className:"c-btn",onClick:function(){return Dt("rescue")},children:[Number(e.isEscue)?k("common.quit"):k("common.enter"),k("cloud.escue_mode")]})]})]})}),(0,x.jsx)(_.Z,{xs:{span:24},md:{span:12},lg:{span:8},children:(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("div",{className:"icon",children:(0,x.jsx)("img",{src:n(22970),alt:""})}),(0,x.jsxs)("div",{className:"text",children:[(0,x.jsx)("p",{className:"tit",children:k("cloud.reinstall")}),(0,x.jsx)("p",{className:"des",children:k("cloud.tip10")}),(0,x.jsx)("div",{className:"c-btn",onClick:function(){var e,t,n,a,s,c;he(!0),U(k("cloud.reinstall")),St(),Mt("reinstall"),Ee("os"),Re(null===(e=we[0])||void 0===e?void 0:e.image),ct("password"),v.setFieldsValue({optOs:{type:"os",group:null===(t=we[0])||void 0===t?void 0:t.id,id:null===(n=we[0])||void 0===n||null===(a=n.image[0])||void 0===a?void 0:a.id},pas:{type:"password"},port:{num:22}}),Ht(null===(s=we[0])||void 0===s||null===(c=s.image[0])||void 0===c?void 0:c.id)},children:k("cloud.go_now")})]})]})}),(0,x.jsx)(_.Z,{xs:{span:24},md:{span:12},lg:{span:8},children:(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("div",{className:"icon",children:(0,x.jsx)("img",{src:n(91302),alt:""})}),(0,x.jsxs)("div",{className:"text",children:[(0,x.jsx)("p",{className:"tit",children:k("cloud.mount_iso")}),(0,x.jsx)("p",{className:"des",children:k("cloud.tip11")}),(0,x.jsx)("div",{className:"c-btn",children:k("cloud.go_now")})]})]})}),(0,x.jsx)(_.Z,{xs:{span:24},md:{span:12},lg:{span:8},children:(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("div",{className:"icon",children:(0,x.jsx)("img",{src:n(52045),alt:""})}),(0,x.jsxs)("div",{className:"text",children:[(0,x.jsx)("p",{className:"tit",children:k("cloud.startup")}),(0,x.jsx)("p",{className:"des",children:k("cloud.tip12")}),(0,x.jsx)("div",{className:"c-btn",children:k("cloud.go_now")})]})]})}),(0,x.jsx)(_.Z,{xs:{span:24},md:{span:12},lg:{span:8},children:(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("div",{className:"icon",children:(0,x.jsx)("img",{src:n(86044),alt:""})}),(0,x.jsxs)("div",{className:"text",children:[(0,x.jsx)("p",{className:"tit",children:k("cloud.migrate")}),(0,x.jsx)("p",{className:"des",children:k("cloud.tip13")}),(0,x.jsx)("div",{className:"c-btn",children:k("cloud.go_now")})]})]})}),(0,x.jsx)(_.Z,{xs:{span:24},md:{span:12},lg:{span:8},children:(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("div",{className:"icon",children:(0,x.jsx)("img",{src:n(64627),alt:""})}),(0,x.jsxs)("div",{className:"text",children:[(0,x.jsx)("p",{className:"tit",children:k("cloud.delete_instance")}),(0,x.jsx)("p",{className:"des",children:k("cloud.tip14")}),(0,x.jsx)("div",{className:"c-btn",children:k("cloud.go_now")})]})]})})]}),(0,x.jsx)(y.Z,{title:K,forceRender:!0,visible:ce,onCancel:It,footer:null,className:"power-modal",closable:!1,children:q&&(0,x.jsxs)(H.Z,{form:o,initialValues:{host_name:q.name,remember:!1},onFinish:function(){switch(O){case"on":return Pt();case"off":return Tt();case"restart":return Et()}},onFinishFailed:At,autoComplete:"off",children:[(0,x.jsx)(H.Z.Item,{label:k("cloud.host_name"),colon:!1,name:"host_name",children:(0,x.jsx)(g.Z,{disabled:!0})}),"on"!==O&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("p",{className:"tip",children:k("cloud.tip19")}),(0,x.jsx)(H.Z.Item,{colon:!1,name:"remember",valuePropName:"checked",className:"force-off",children:(0,x.jsx)(w.Z,{children:k("cloud.tip20")})})]}),(0,x.jsxs)(H.Z.Item,{className:"opt-btn",children:[(0,x.jsx)(b.Z,{type:"primary",htmlType:"submit",className:"sure",children:k("common.sure")}),(0,x.jsx)(b.Z,{onClick:It,className:"cancel",children:k("common.cancel")})]})]})}),(0,x.jsx)(y.Z,{title:K,forceRender:!0,visible:le,onCancel:It,footer:null,className:"power-modal password-modal",closable:!1,children:(0,x.jsxs)(H.Z,{form:p,labelAlign:"left",initialValues:{password:Nt.password,type:e.detail&&-1!==e.detail.image.name.toLocaleLowerCase().indexOf("win")?"Windows":"Linux"},onFinish:Ot,onFinishFailed:At,autoComplete:"off",className:{"rescue-form":"rescue"===Ne},children:[(0,x.jsx)("p",{className:"small-tip",children:te}),"rescue"===Ne?(0,x.jsx)(H.Z.Item,{label:k("cloud.escue_system_type"),colon:!1,name:"type",children:(0,x.jsxs)(Z.Z,{getPopupContainer:function(e){return e.parentElement},onChange:function(){},children:[(0,x.jsxs)(A,{value:"Windows",children:[(0,x.jsx)("img",{src:n(15409),alt:"",className:"sys-icon"}),"Windows"]}),(0,x.jsxs)(A,{value:"Linux",children:[(0,x.jsx)("img",{src:n(85911),alt:"",className:"sys-icon"}),"Linux"]})]})}):"",(0,x.jsxs)("div",{className:"pas-box",children:[(0,x.jsx)(H.Z.Item,{label:k("password"===Ne?"cloud.password":"cloud.temp_password"),required:!0,tooltip:k("cloud.verify4")+"\n"+k("cloud.verify5")+k("cloud.verify6")+k("cloud.verify7"),colon:!1,name:"password",children:(0,x.jsx)(g.Z,{})}),(0,x.jsx)("div",{className:"c-btn",onClick:Mt,children:k("cloud.random_generate")})]}),"off"!==e.type&&"password"===Ne&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"com-danger",children:[(0,x.jsx)("p",{className:"tit",children:k("cloud.tip23")}),(0,x.jsxs)("div",{className:"des",children:[(0,x.jsx)("p",{children:k("cloud.tip24")}),(0,x.jsx)("p",{children:k("cloud.tip25")})]})]}),(0,x.jsx)(H.Z.Item,{colon:!1,required:!0,name:"force",label:k("cloud.force_shutdown"),valuePropName:"checked",rules:[{validator:function(e,t){return t?Promise.resolve():Promise.reject(new Error(k("cloud.tip26")))}}],className:"force-off",children:(0,x.jsx)(w.Z,{children:k("cloud.agree_force_shutdown")})})]}),"rescue"===Ne?(0,x.jsx)("div",{className:"com-danger",children:(0,x.jsx)("p",{className:"tit",children:k("cloud.tip28")})}):"",(0,x.jsxs)(H.Z.Item,{className:"opt-btn",children:[(0,x.jsx)(b.Z,{type:"primary",htmlType:"submit",className:"sure",children:k("common.sure")}),(0,x.jsx)(b.Z,{onClick:It,className:"cancel",children:k("common.cancel")})]})]})}),(0,x.jsx)(y.Z,{title:K,forceRender:!0,visible:pe,onCancel:It,footer:null,className:"power-modal reinstall-modal",closable:!1,children:q&&(0,x.jsxs)(H.Z,{form:v,initialValues:{optOs:{type:Te},pas:{type:"password"}},onFinish:function(e){if(!$e){var t={id:I,image_id:e.optOs.id,template_id:e.optOs.id,password:e.pas.input,ssh_key_id:e.pas.input,port:e.port.num};"os"===e.optOs.type?delete t.template_id:delete t.image_id,"password"===e.pas.type?delete t.ssh_key_id:delete t.password,zt(t)}},onFinishFailed:At,autoComplete:"off",children:[(0,x.jsx)(H.Z.Item,{required:!0,label:" ",colon:!1,children:(0,x.jsxs)(g.Z.Group,{compact:!0,children:[(0,x.jsx)(H.Z.Item,{name:["optOs","type"],noStyle:!0,children:(0,x.jsxs)(Z.Z,{className:"re-type",onChange:function(e){var t,n,a,s,c;Ee(e),v.setFieldsValue({optOs:{group:"os"===e?null===(t=we[0])||void 0===t?void 0:t.id:null===(n=Ie[0])||void 0===n?void 0:n.id,id:"os"===e?null===(a=we[0])||void 0===a||null===(s=a.image[0])||void 0===s?void 0:s.id:null===(c=Ie[0])||void 0===c?void 0:c.id}}),Re((function(e){return we[0].image})),"os"===e&&we[0].image[0].id&&Ht(we[0].image[0].id)},children:[(0,x.jsx)(A,{value:"os",children:k("cloud.operating_system")}),(0,x.jsx)(A,{value:"template",children:k("cloud.template")})]})}),(0,x.jsx)(H.Z.Item,{name:["optOs","group"],noStyle:!0,children:"os"===Te?(0,x.jsx)(Z.Z,{className:"system",getPopupContainer:function(e){return e.parentElement},onChange:function(e){Me(e);var t=we.filter((function(t){return t.id===e}));Re((function(e){return t?t[0].image:[]}));var n=t?t[0].image[0].id:"";v.setFieldsValue({optOs:{id:n}}),Ht(n)},children:we.map((function(e){return(0,x.jsxs)(A,{value:e.id,children:[(0,x.jsx)("img",{src:e.name&&n(85995)("./".concat(e.name,".png")),alt:"",className:"sys-icon"}),e.name]},e.id)}))}):(0,x.jsx)(Z.Z,{className:"system dis-none",getPopupContainer:function(e){return e.parentElement},children:Ie.map((function(e){return(0,x.jsx)(A,{value:e.id,children:e.name},e.id)}))})}),(0,x.jsx)(H.Z.Item,{name:["optOs","id"],children:"os"===Te?(0,x.jsx)(Z.Z,{className:"image-id",onChange:function(e){"os"===Te&&Ht(e)},children:ze.map((function(e){return(0,x.jsx)(A,{value:e.id,children:e.name},e.id)}))}):(0,x.jsx)(Z.Z,{className:"system",getPopupContainer:function(e){return e.parentElement},children:Ie.map((function(e){return(0,x.jsx)(A,{value:e.id,children:e.name},e.id)}))})})]})}),(0,x.jsx)(H.Z.Item,{required:!0,label:" ",colon:!1,children:(0,x.jsxs)(g.Z.Group,{compact:!0,children:[(0,x.jsx)(H.Z.Item,{name:["pas","type"],required:!0,noStyle:!0,children:(0,x.jsxs)(Z.Z,{className:"re-type",onChange:function(e){ct(e),"password"===e?Mt("reinstall"):v.setFieldsValue({pas:{input:et[0].id||""}})},children:[(0,x.jsx)(A,{value:"password",children:k("cloud.password")}),(0,x.jsx)(A,{value:"ssh",children:k("account.ssh")})]})}),"password"===st?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Z,{title:k("cloud.verify4")+"\n"+k("cloud.verify5")+k("cloud.verify6")+k("cloud.verify7"),children:(0,x.jsx)(R.Z,{className:"question"})}),(0,x.jsx)(H.Z.Item,{name:["pas","input"],noStyle:!0,children:(0,x.jsx)(g.Z,{className:"pas-select"})}),(0,x.jsx)(H.Z.Item,{children:(0,x.jsx)("div",{className:"c-btn",onClick:function(){return Mt("reinstall")},children:k("cloud.random_generate")})})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.Z,{title:k("cloud.verify8"),children:(0,x.jsx)(R.Z,{className:"question"})}),(0,x.jsx)(H.Z.Item,{name:["pas","input"],noStyle:!0,rules:[{required:!0,message:k("select")+k("account.ssh")}],children:(0,x.jsx)(Z.Z,{className:"pas-select",children:et.map((function(e){return(0,x.jsx)(A,{value:e.id,children:e.name},e.id)}))})})]})]})}),(0,x.jsx)(H.Z.Item,{required:!0,label:k("common.port"),colon:!1,children:(0,x.jsxs)(g.Z.Group,{compact:!0,children:[(0,x.jsx)(H.Z.Item,{name:["port","num"],noStyle:!0,rules:[{required:!0,message:k("cloud.verify9"),validator:function(e,t){return 22===(t=parseInt(t))||t>=100&&t<=65535?Promise.resolve():Promise.reject(k("cloud.verify9"))}}],children:(0,x.jsx)(g.Z,{})}),(0,x.jsx)(H.Z.Item,{noStyle:!0,children:(0,x.jsx)("div",{className:"c-btn",onClick:function(){var e=(1e4+1e4*Math.random()).toFixed(0);v.setFieldsValue({port:{num:e}})},children:k("cloud.random_generate")})})]})}),$e&&(0,x.jsxs)("div",{className:"pay-box",children:[k("cloud.tip29"),"\uff0c",E.currency_prefix,Je,"/",k("common.once")," \uff0c",k("cloud.tip29"),(0,x.jsx)("div",{className:"go-pay",onClick:Rt,children:k("common.buy_now")})]}),(0,x.jsxs)(H.Z.Item,{className:"opt-btn",children:[(0,x.jsx)(b.Z,{type:"primary",htmlType:"submit",className:{sure:!0,disabled:$e},disabled:$e,children:k("common.sure")}),(0,x.jsx)(b.Z,{onClick:It,className:"cancel",children:k("common.cancel")})]})]})}),ot&&(0,x.jsx)(G.Z,{orderId:ot,timer:ut,visible:vt,handleCancel:function(){jt(!1),clearInterval(ut.current)}}),ve&&(0,x.jsx)(z.Z,{closeDialog:function(){je(!1)},submitDel:Bt,title:" ",icon:"warning",text:k("common.sure")+k("common.quit")+k("cloud.escue_mode")+"?"})]})}var L=n(24779),$=n(93020),q=n(45227),W=n(90785),X=n(75033);function J(){var e=(0,P.s0)(),t=(0,F.$)().t,a=Z.Z.Option,s=g.Z.TextArea,i=(0,r.useState)(200),o=(0,c.Z)(i,2),u=o[0],d=o[1],m=(0,r.useState)({keywords:"",page:1,limit:20,orderby:"id",sort:"desc"}),p=(0,c.Z)(m,2),h=p[0],v=p[1],w=(0,r.useState)(!1),k=(0,c.Z)(w,2),S=(k[0],k[1],(0,r.useState)("")),T=(0,c.Z)(S,2),E=(T[0],T[1],(0,r.useState)("")),D=(0,c.Z)(E,2),B=(D[0],D[1],(0,r.useState)({})),M=(0,c.Z)(B,2),O=(M[0],M[1],(0,r.useState)({})),H=(0,c.Z)(O,2),z=H[0],R=H[1],G=(0,r.useState)(),A=(0,c.Z)(G,2),V=A[0],J=A[1],K=(0,r.useState)(),U=(0,c.Z)(K,2),Q=U[0],ee=U[1],te=(0,r.useState)(!1),ne=(0,c.Z)(te,2),ae=ne[0],se=ne[1],ce=(0,r.useState)({host_id:"",suspend_reason:[],type:""}),re=(0,c.Z)(ce,2),ie=re[0],oe=re[1],le=(0,r.useState)(!1),ue=(0,c.Z)(le,2),de=ue[0],me=ue[1],pe=(0,r.useState)(!1),he=(0,c.Z)(pe,2),fe=he[0],xe=he[1],ve=(0,r.useState)(),je=(0,c.Z)(ve,2),Ze=je[0],ge=je[1],Ne=(0,r.useState)(""),_e=(0,c.Z)(Ne,2),ye=_e[0],be=_e[1],we=(0,r.useState)([]),ke=(0,c.Z)(we,2),Ce=ke[0],Se=ke[1],Ie=(0,r.useState)(!1),Fe=(0,c.Z)(Ie,2),Ye=Fe[0],Pe=Fe[1],Te=(0,r.useState)(),Ee=(0,c.Z)(Te,2),De=Ee[0],Be=Ee[1],Me=(0,r.useState)(!1),Oe=(0,c.Z)(Me,2),He=Oe[0],ze=Oe[1],Re=[{title:"\u78c1\u76d8\u540d\u79f0",dataIndex:"name",width:700},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",width:300,render:function(e){return(0,x.jsx)(x.Fragment,{children:e?I()(1e3*e).format("YYYY-MM-DD HH:mm"):"--"})}},{title:"\u5bb9\u91cf",dataIndex:"size",width:200,render:function(e){return(0,x.jsxs)("span",{children:[e,"G"]})}},{title:"\u64cd\u4f5c",width:80,render:function(e,n){return(0,x.jsx)(x.Fragment,{children:"Active"==n.status?(0,x.jsx)("div",{className:"com-opt-pop",id:"com-opt"+n.id,children:(0,x.jsx)($.Z,{getPopupContainer:function(){return document.getElementById("com-opt"+n.id)},content:(0,x.jsxs)(x.Fragment,{children:[n.cloud_name?(0,x.jsx)("p",{className:"cloud-opt",onClick:function(){return Ve(n)},children:"\u5378\u8f7d"}):null,(0,x.jsx)("p",{className:"cloud-opt",onClick:function(){return Ge(n)},children:"\u6269\u5bb9"}),(0,x.jsx)("p",{className:"cloud-opt",onClick:function(){return function(e){var n=e.id;J(e.size),oe({host_id:n,suspend_reason:[],type:""}),(0,l.lp)(Number(n)).then((function(e){e.data.data.refund?(0,f.vC)("\u5df2\u7533\u8bf7\u8fc7\u505c\u7528","warning"):(0,l.iS)({host_id:n}).then((function(e){var n=e.data.data;ee(n),1===n.allow_refund?se(!0):(0,f.vC)(t("common.tip1"),"warning")}))}))}(n)},children:"\u5220\u9664"})]}),placement:"topRight",children:(0,x.jsx)("p",{className:"opt-icon",children:(0,x.jsx)(X.Z,{})})})}):null})}}],Ge=function(t){e("/expansion_storage?id=".concat(t.id,"&package_id=").concat(t.package_id,"&size=").concat(t.size))},Ae=function(){Pe(!0);var e=Number(window.location.hash.split("=")[1]);(0,l.jJ)((0,j.Z)((0,j.Z)({},h),{},{host_id:e})).then((function(e){if(console.log(e),e.data.data.list[0]){ze(!0);var t=e.data.data.list;d(e.data.data.count),Be(t)}else ze(!1);Pe(!1)}))},Ve=function(e){C().fire({text:"\u60a8\u5c06\u5378\u8f7d ".concat(e.name,",\u8bf7\u786e\u8ba4\u662f\u5426\u7ee7\u7eed\uff01"),icon:"info",showCancelButton:!0,confirmButtonColor:"#5C5EE4",confirmButtonText:"\u786e\u8ba4",cancelButtonText:"\u53d6\u6d88",customClass:{icon:"ssh-icon",cancelButton:"ssh-cancel-button"}}).then((function(t){t.value&&(0,l.v8)(e.id).then((function(t){200===t.data.status&&((0,f.vC)("\u60a8\u5df2\u6210\u529f\u5378\u8f7d ".concat(e.name),"success"),Ae()),console.log(t)}))}))};return(0,r.useEffect)((function(){(0,Y.ef)().then((function(e){200===e.data.status&&R(e.data.data)}))}),[]),(0,r.useEffect)((function(){Ae()}),[h]),(0,x.jsxs)("div",{className:"cloud-card disk",children:[He?(0,x.jsxs)("div",{className:"disk-yes",children:[(0,x.jsx)("div",{className:"main_table",children:(0,x.jsx)(q.Z,{columns:Re,dataSource:De,pagination:!1,loading:Ye,rowKey:function(e){return e.id}})}),(0,x.jsx)(L.Z,{total:u,page:h,changePage:function(e,t){v((function(n){return(0,j.Z)((0,j.Z)({},n),{},{page:e,limit:t})}))}})]}):(0,x.jsxs)("div",{className:"disk-no",children:[(0,x.jsx)("img",{className:"disk-no-img",src:n(44073),alt:""}),(0,x.jsx)("span",{className:"disk-no-text",children:"\u60a8\u5c1a\u672a\u6302\u8f7d\u4efb\u4f55\u6570\u636e\u76d8\uff0c\u7acb\u523b\u8d2d\u4e70\u6216\u6302\u8f7d\u5df2\u6709\u6570\u636e\u76d8"}),(0,x.jsx)(b.Z,{className:"disk-no-btn",onClick:function(){e("/create_storage")},children:"\u7acb\u523b\u8d2d\u4e70"})]}),(0,x.jsx)(y.Z,{visible:de,footer:null,centered:!0,closable:!1,style:{borderRadius:"10px",overflow:"auto"},getContainer:!1,onCancel:function(){return me(!1)},children:(0,x.jsxs)("div",{className:"create-snapshot",children:[(0,x.jsx)("div",{className:"top",children:(0,x.jsx)("div",{className:"title",children:"\u6302\u8f7d\u78c1\u76d8"})}),(0,x.jsxs)("div",{className:"main",children:[ye?(0,x.jsx)("div",{className:"err",children:(0,x.jsx)(W.Z,{description:ye,type:"error",showIcon:!0})}):null,(0,x.jsx)("div",{className:"form",children:(0,x.jsx)("div",{className:"row",children:(0,x.jsxs)(N.Z,{children:[(0,x.jsx)(_.Z,{span:4,children:(0,x.jsx)("span",{className:"label",children:"\u78c1\u76d8"})}),(0,x.jsx)(_.Z,{span:20,children:(0,x.jsx)(Z.Z,{loading:fe,size:"large",onDropdownVisibleChange:function(e){return function(e){if(e){xe(!0);var t=Number(window.location.hash.split("=")[1]);(0,l.I7)(t).then((function(e){e.data.list&&Se(e.data.list),xe(!1)}))}}(e)},onChange:function(e){ge(e)},children:Ce.map((function(e){return(0,x.jsx)(a,{value:e.id,children:"".concat(e.name,"-").concat(e.size,"G")},e.id)}))})})]})})})]}),(0,x.jsxs)("div",{className:"footer",children:[(0,x.jsx)(b.Z,{className:"cancel-btn",onClick:function(){return me(!1)},children:"\u53d6\u6d88"}),(0,x.jsx)(b.Z,{className:"sub-btn",onClick:function(){var e=Number(window.location.hash.split("=")[1]),t={id:Ze,host_id:e};console.log(t);var n=!0;Ze||(n=!1,be("\u8bf7\u9009\u62e9\u9700\u8981\u6302\u8f7d\u7684\u78c1\u76d8")),n&&(be(""),(0,l.LI)(t).then((function(e){200===e.data.status&&((0,f.vC)("\u6302\u8f7d\u6210\u529f","success"),me(!1))})).catch((function(e){})))},children:"\u7acb\u5373\u6302\u8f7d"})]})]})}),z&&Q?(0,x.jsx)(y.Z,{className:"refund-modal",visible:ae,footer:null,centered:!0,closable:!1,style:{borderRadius:"10px",overflow:"auto"},getContainer:!1,onCancel:function(){return se(!1)},children:(0,x.jsxs)("div",{className:"modal-unopen",children:[(0,x.jsx)("div",{className:"modal-title",children:t("common.apply_refund")}),(0,x.jsxs)("div",{className:"modal-form",children:[(0,x.jsxs)("div",{className:"config-item",children:[(0,x.jsx)("div",{className:"row-l",children:t("common.product_info")}),(0,x.jsxs)("div",{className:"row-r",children:[(0,x.jsxs)("div",{className:"item",children:[(0,x.jsxs)("p",{className:"l-tit",children:[t("common.product_config"),"\uff1a"]}),(0,x.jsx)("div",{className:"r-text",children:V?V+"G":null})]}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsxs)("p",{className:"l-tit",children:[t("common.buy_time"),"\uff1a"]}),(0,x.jsx)("div",{className:"r-text",children:(0,x.jsx)("p",{children:I()(1e3*Q.host.create_time).format("YYYY-MM-DD HH:mm")})})]}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsxs)("p",{className:"l-tit",children:[t("common.buy_money"),"\uff1a"]}),(0,x.jsx)("div",{className:"r-text",children:(0,x.jsxs)("p",{children:[z.currency_prefix,Q.host.first_payment_amount,z.currency_code]})})]})]})]}),(0,x.jsxs)("div",{className:"config-item",children:[(0,x.jsx)("div",{className:"row-l",children:t("common.stop_reason")}),(0,x.jsx)("div",{className:"row-r",children:1!==Q.reason_custom?(0,x.jsx)(Z.Z,{mode:"multiple",showArrow:!0,allowClear:!0,size:"large",style:{width:"100%"},onChange:function(e){oe((0,j.Z)((0,j.Z)({},ie),{},{suspend_reason:e}))},children:Q.reasons.map((function(e){return(0,x.jsx)(a,{value:e.id,children:e.content},e.id)}))}):(0,x.jsx)(s,{onChange:function(e){oe((0,j.Z)((0,j.Z)({},ie),{},{suspend_reason:e.target.value}))},rows:4,placeholder:"\u8bf7\u8f93\u5165\u505c\u7528\u539f\u56e0"})})]}),(0,x.jsxs)("div",{className:"config-item",children:[(0,x.jsx)("div",{className:"row-l row-center",children:t("common.stop_time")}),(0,x.jsx)("div",{className:"row-r",children:(0,x.jsxs)(Z.Z,{size:"large",style:{width:"100%"},onChange:function(e){oe((0,j.Z)((0,j.Z)({},ie),{},{type:e}))},children:[(0,x.jsx)(a,{value:"Expire",children:t("common.expire")}),(0,x.jsx)(a,{value:"Immediate",children:t("common.immediate")})]})})]}),(0,x.jsxs)("div",{className:"config-item money",children:[(0,x.jsx)("div",{className:"row-l",children:t("common.refund_amount")}),(0,x.jsx)("div",{className:"row-right",children:"Immediate"===ie.type?z.currency_prefix+Q.host.amount+z.currency_code:z.currency_prefix+"0"+z.currency_code})]})]}),(0,x.jsxs)("div",{className:"modal-footer",children:[(0,x.jsx)(b.Z,{className:"sure",onClick:function(){0!==ie.suspend_reason.length?ie.type?(0,l.F)(ie).then((function(e){200===e.data.status&&((0,f.vC)("\u7533\u8bf7\u505c\u7528\u6210\u529f\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u5ba1\u6838","success"),se(!1))})):(0,f.vC)(t("select")+t("common.stop_time"),"error"):(0,f.vC)((1===Q.reason_custom?t("input"):t("select"))+t("common.stop_reason"),"error")},children:t("common.sure_refund")}),(0,x.jsx)(b.Z,{className:"cancel",onClick:function(){return se(!1)},children:t("common.cancel")})]})]})}):null]})}var K=n(58592),U=n(91993),Q=n(58126);function ee(e){var t,i,u=(0,F.$)().t,d=H.Z.useForm(),m=(0,c.Z)(d,1)[0],p=(0,Q.Z)(),h=(0,P.s0)(),v=Z.Z.Option,j=[{title:"IP"+u("common.address"),dataIndex:"ip",key:"id"},{title:u("common.gateway"),dataIndex:"gateway",key:"gateway"},{title:u("common.mask"),dataIndex:"subnet_mask",key:"subnet_mask"},{title:u("cloud.manage"),dataIndex:"manage",key:"manage",width:100,render:function(e,t){return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"com-opt-pop",id:"com-opt"+t.id,children:(0,x.jsx)($.Z,{getPopupContainer:function(){return document.getElementById("com-opt"+t.id)},content:(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("p",{className:"cloud-opt",onClick:function(){return vt(t)},children:t.cloud_name?u("common.unmount"):u("common.mount")})}),placement:"topRight",children:(0,x.jsx)("p",{className:"opt-icon",children:(0,x.jsx)(X.Z,{})})})})})}}],g=[{title:"IP"+u("common.address"),dataIndex:"ip",key:"id"},{title:u("common.gateway"),dataIndex:"gateway",key:"gateway"},{title:u("common.mask"),dataIndex:"mask",key:"mask",width:200}],k=(0,r.useState)({}),C=(0,c.Z)(k,2),S=C[0],Y=C[1],T=(0,r.useState)("vpc"),E=(0,c.Z)(T,2),D=E[0],B=E[1],O=(0,r.useState)(!1),R=(0,c.Z)(O,2),G=(R[0],R[1]),A=(0,r.useState)(!1),V=(0,c.Z)(A,2),W=V[0],J=V[1],ee=(0,r.useState)(""),te=(0,c.Z)(ee,2),ne=te[0],ae=te[1],se=(0,r.useState)(!1),ce=(0,c.Z)(se,2),re=ce[0],ie=ce[1],oe=(0,r.useState)(u("cloud.bas_btn2")+u("cloud.security_group")),le=(0,c.Z)(oe,2),ue=le[0],de=le[1],me=(0,r.useState)(!1),pe=(0,c.Z)(me,2),he=pe[0],fe=pe[1],xe=(0,r.useState)(0),ve=(0,c.Z)(xe,2),je=ve[0],Ze=ve[1],ge=(0,r.useState)([]),Ne=(0,c.Z)(ge,2),_e=Ne[0],ye=Ne[1],be=(0,r.useState)([]),we=(0,c.Z)(be,2),ke=we[0],Ce=we[1],Se=(0,r.useState)([]),Ie=(0,c.Z)(Se,2),Fe=Ie[0],Ye=Ie[1],Pe=(0,r.useState)([]),Te=(0,c.Z)(Pe,2),Ee=Te[0],De=Te[1],Be=(0,r.useState)([]),Me=(0,c.Z)(Be,2),Oe=(Me[0],Me[1],(0,r.useState)({total:"",used:"",leave:"",reset_flow_date:""})),He=(0,c.Z)(Oe,2),ze=He[0],Re=He[1],Ge=(0,r.useState)([]),Ae=(0,c.Z)(Ge,2),Ve=(Ae[0],Ae[1],e.id),Le=(0,r.useState)(0),$e=(0,c.Z)(Le,2),qe=($e[0],$e[1],(0,r.useState)(!1)),We=(0,c.Z)(qe,2),Xe=(We[0],We[1],(0,r.useState)({id:Ve,keywords:"",page:1,limit:20,orderby:"id",sort:"desc"})),Je=(0,c.Z)(Xe,2),Ke=(Je[0],Je[1],(0,r.useState)({id:Ve,keywords:"",page:1,limit:5,orderby:"id",sort:"desc",data_center_id:e.detail.data_center.id})),Ue=(0,c.Z)(Ke,2),Qe=Ue[0],et=Ue[1],tt=(0,r.useState)(1),nt=(0,c.Z)(tt,2),at=nt[0],st=nt[1],ct=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.vh({id:Ve});case 3:t=e.sent,n=[t.data.data],Ce(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o.ZP.error(e.t0.data.msg);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),rt=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(){var n,s,c;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K.rd();case 3:200===(n=t.sent).data.status&&(s=n.data.data.list.filter((function(t){return t.id===e.detail.data_center.id})),c=s[0].vpc.filter((function(e){return e.name!==ke[0].vpc_name})),Ye(c)),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),it=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.ex({page:1,limit:1e3});case 3:200===(t=e.sent).data.status&&De(t.data.data.list),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,fe(!0),e.next=4,U.Mf(Qe);case 4:t=e.sent,p.current&&(n=t.data.data.list.filter((function(e){return"Active"===e.status})),ye(n),Ze(n.length),fe(!1)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),(0,f.vC)(e.t0.data.msg,"error"),fe(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),lt=function(){J(!1)},ut=function(e){J(!0),B(e),m.resetFields(),"vpc"===e?(ae(u("network.change_net")),rt()):"safe"===e&&(ae(u("network.add_to_group")),it())},dt=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n){var s,c;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s={},"vpc"===D?s={id:Ve,vpc_id:n.type}:"safe"===D&&(s={id:n.type,host_id:Ve}),t.prev=2,"vpc"!==D){t.next=12;break}return(0,f.vC)(u("network.tip7"),"success"),J(!1),t.next=8,l.zz(s);case 8:200===(c=t.sent).data.status&&((0,f.vC)(c.data.msg,"success"),ct()),t.next=17;break;case 12:if("safe"!==D){t.next=17;break}return t.next=15,K.TA(s);case 15:200===t.sent.data.status&&((0,f.vC)(u("common.add")+u("common.success"),"success"),J(!1),e.refreshDetail());case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(2),(0,f.vC)(t.t0.data.msg,"error");case 22:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(e){return t.apply(this,arguments)}}(),mt=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Lb({id:Ve});case 3:200===(t=e.sent).data.status&&Re(t.data.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o.ZP.error(e.t0.data.msg);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),pt=function(e){st(e)},ht=function(e){console.log(parseInt((new Date).getTime()/1e3),"time");var t=parseInt((new Date).getTime()/1e3);return 1===e?t-86400:2===e?t-259200:3===e?t-604800:4===e?t-2592e3:5===e?t-15552e3:void 0},ft=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var s,c,r,i,o,u,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=ht(n),console.log(s,"getstarttime"),c={id:Ve,type:t,start_time:s},e.prev=3,e.next=6,l.Pf(c);case 6:r=e.sent,i=r.data.data.list,o=[],u=[],d=[],i.map((function(e){"bw"===t&&(o.push(I()(1e3*e.time).format("YYYY-MM-DD HH:mm")),u.push(e.in_bw.toFixed(2)),d.push(e.out_bw.toFixed(2)),xt(o,u,d))})),console.log(o,u,"data"),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(3);case 17:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t,n){return e.apply(this,arguments)}}(),xt=function(e,t,n){var a,s=document.getElementById("bwchart"),c=M.S1(s);(a={tooltip:{show:!0,trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value"},series:[{name:"\u8fdb\u5e26\u5bbd(bps)",data:t,type:"line",areaStyle:{}},{name:"\u51fa\u5e26\u5bbd(bps)",data:n,type:"line",areaStyle:{}}]})&&c.setOption(a)};(0,r.useEffect)((function(){ct(),ot(),mt()}),[]),(0,r.useEffect)((function(){ft("bw",at)}),[at]);var vt=function(e){Y(e),e.cloud_name?(Y(e),de(u("common.unmount")+u("network.elastic_ip")),ie(!0)):G(!0)},jt=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.Bd(S.id);case 3:200===e.sent.data.status&&((0,f.vC)(u("common.unmount")+u("common.success"),"success"),ot()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,f.vC)(e.t0.data.msg,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{className:"com-content cloud-network",children:[(0,x.jsxs)("div",{className:"com-card",children:[(0,x.jsxs)("div",{className:"box",children:[(0,x.jsxs)("div",{className:"com-tit iptit",children:[(0,x.jsx)("h1",{className:"tit",children:"\u516c\u7f51IP"}),(0,x.jsx)(b.Z,{className:"sub-button",type:"primary",htmlType:"submit",onClick:function(){h("/create_elastic_ip")},children:"\u589e\u52a0\u5f39\u6027IP"})]}),(0,x.jsx)(q.Z,{columns:j,dataSource:_e,rowKey:function(e){return e.id},pagination:!1,loading:he,className:"cloud-tab"}),je>0&&(0,x.jsx)(L.Z,{total:je,page:Qe,changePage:function(e,t){et((function(n){return n.limit=t,n.page=e,n})),ot()},pageSizeOptions:[5,10,20]})]}),(0,x.jsxs)("div",{className:"box",children:[(0,x.jsxs)("div",{className:"com-tit",children:[(0,x.jsx)("h1",{className:"tit",children:u("cloud.vpc_network")}),(0,x.jsxs)("div",{className:"subtit",children:[u("cloud.vpc_network")+u("cloud.bas_columns_title1"),"\uff1a",null!==(t=ke[0])&&void 0!==t&&t.vpc_name?null===(i=ke[0])||void 0===i?void 0:i.vpc_name:u("common.none"),(0,x.jsx)("span",{className:"changenet",onClick:function(){return ut("vpc")},children:u("network.change_net")})]})]}),(0,x.jsx)(q.Z,{columns:g,dataSource:ke,pagination:!1,rowKey:function(e){return e.vpc_id||1},className:"cloud-tab"})]}),(0,x.jsxs)("div",{className:"box",children:[(0,x.jsx)("div",{className:"com-tit",children:(0,x.jsx)("h1",{className:"tit",children:u("cloud.security_group")})}),(0,x.jsx)("div",{className:"security",children:0===e.detail.security_group.id?(0,x.jsxs)("div",{className:"security_box",children:[(0,x.jsx)("div",{children:(0,x.jsx)("img",{src:n(84078),alt:"",className:"war-icon"})}),(0,x.jsxs)("div",{className:"nodata",children:[u("network.tip5"),(0,x.jsxs)("span",{className:"changenet",onClick:function(){return ut("safe")},children:[" ",u("network.add_to_group")]})]})]}):(0,x.jsxs)("div",{className:"security_box",children:[(0,x.jsxs)("div",{className:"source",children:[u("network.tip6"),(0,x.jsx)("span",{className:"filename",children:e.detail.security_group.name})]}),(0,x.jsx)(b.Z,{className:"sec_btn",onClick:function(){h("/group_rules?id=".concat(e.detail.security_group.id))},children:u("common.manage")})]})})]}),(0,x.jsxs)("div",{className:"box",children:[(0,x.jsx)("div",{className:"com-tit",children:(0,x.jsx)("h1",{className:"tit",children:"\u7f51\u7edc\u6d41\u91cf"})}),(0,x.jsxs)(N.Z,{gutter:{xs:8,sm:16,md:24,lg:30},children:[(0,x.jsx)(_.Z,{xs:{span:20},lg:{span:10},children:(0,x.jsxs)("div",{className:"cloud-card leftnet",children:[(0,x.jsxs)("div",{className:"net_item",children:[(0,x.jsx)("span",{className:"net_itemtit",children:"\u603b\u6d41\u91cf\uff1a"}),(0,x.jsx)("span",{children:ze.total})]}),(0,x.jsxs)("div",{className:"net_item",children:[(0,x.jsx)("span",{className:"net_itemtit",children:"\u5df2\u7528\u6d41\u91cf\uff1a"}),(0,x.jsx)("span",{children:ze.used})]}),(0,x.jsxs)("div",{className:"net_item",children:[(0,x.jsx)("span",{className:"net_itemtit",children:"\u5269\u4f59\u6d41\u91cf\uff1a"}),(0,x.jsx)("span",{children:ze.leave})]}),(0,x.jsxs)("div",{className:"net_item",children:[(0,x.jsx)("span",{className:"net_itemtit",children:" \u6d41\u91cf\u5f52\u96f6\u65f6\u95f4\uff1a"}),(0,x.jsx)("span",{children:ze.reset_flow_date})]})]})}),(0,x.jsx)(_.Z,{xs:{span:24},lg:{span:12},children:(0,x.jsxs)("div",{className:"cloud-card chartbox",children:[(0,x.jsx)("p",{className:"chart_title",children:"\u7f51\u7edc\u5e26\u5bbd"}),(0,x.jsxs)("div",{className:"chart_type",children:[(0,x.jsx)("div",{className:"chart_type_item ".concat(1===at?"active":""),onClick:function(){return pt(1)},children:"\u8fd124\u5c0f\u65f6"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(2===at?"active":""),onClick:function(){return pt(2)},children:"\u8fd13\u5929"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(3===at?"active":""),onClick:function(){return pt(3)},children:"\u8fd17\u5929"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(4===at?"active":""),onClick:function(){return pt(4)},children:"\u8fd11\u6708"}),(0,x.jsx)("div",{className:"chart_type_item ".concat(5===at?"active":""),onClick:function(){return pt(5)},children:"\u8fd1\u534a\u5e74"})]}),(0,x.jsx)("div",{id:"bwchart",className:"echarts"})]})})]})]})]}),re&&(0,x.jsx)(z.Z,{closeDialog:function(){ie(!1)},submitDel:jt,title:ue,text:u("elastic.tip1")+u("common.unmount")+u("network.elastic_ip")+S.ip+"\n"+u("elastic.tip2")}),(0,x.jsx)(y.Z,{title:ne,forceRender:!0,visible:W,onCancel:lt,footer:null,className:"power-modal password-modal",closable:!1,children:(0,x.jsxs)(H.Z,{form:m,labelAlign:"left",initialValues:{},onFinish:dt,onFinishFailed:function(){},autoComplete:"off",children:["vpc"===D?(0,x.jsx)(H.Z.Item,{label:u("common.new")+"VPC",colon:!1,name:"type",children:(0,x.jsx)(Z.Z,{getPopupContainer:function(e){return e.parentElement},children:Fe.map((function(e){return(0,x.jsx)(v,{value:e.id,children:e.name},e.id)}))})}):(0,x.jsx)(H.Z.Item,{label:u("network.choose_group"),colon:!1,name:"type",children:(0,x.jsx)(Z.Z,{getPopupContainer:function(e){return e.parentElement},children:Ee.map((function(e){return(0,x.jsx)(v,{value:e.id,children:e.name},e.id)}))})}),"off"!==e.type&&"vpc"===D&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"com-danger",children:[(0,x.jsx)("p",{className:"tit",children:u("cloud.tip23")}),(0,x.jsxs)("div",{className:"des",children:[(0,x.jsx)("p",{children:u("cloud.tip24")}),(0,x.jsx)("p",{children:u("cloud.tip25")})]})]}),(0,x.jsx)(H.Z.Item,{colon:!1,required:!0,name:"force",label:u("cloud.force_shutdown"),valuePropName:"checked",rules:[{validator:function(e,t){return t?Promise.resolve():Promise.reject(new Error(u("cloud.tip26")))}}],className:"force-off",children:(0,x.jsx)(w.Z,{children:u("cloud.agree_force_shutdown")})})]}),(0,x.jsxs)(H.Z.Item,{className:"opt-btn",children:[(0,x.jsx)(b.Z,{type:"primary",htmlType:"submit",className:"sure",children:u("common.sure")}),(0,x.jsx)(b.Z,{onClick:lt,className:"cancel",children:u("common.cancel")})]})]})})]})}var te=n(70141);function ne(e){var t=e.id,n=((0,P.s0)(),(0,F.$)().t),i=te.Z.TabPane,u=(0,r.useState)([]),d=(0,c.Z)(u,2),m=d[0],p=d[1],h=(0,r.useState)([]),v=(0,c.Z)(h,2),j=v[0],Z=v[1],g=(0,r.useState)(),w=(0,c.Z)(g,2),k=(w[0],w[1]),C=(0,r.useState)(0),S=(0,c.Z)(C,2),I=S[0],T=S[1],E=(0,r.useRef)(),D=(0,r.useState)({}),B=(0,c.Z)(D,2),M=B[0],O=B[1],H=(0,r.useState)({}),z=(0,c.Z)(H,2),R=z[0],A=z[1],V=(0,r.useState)(3e5),L=(0,c.Z)(V,2),$=L[0],q=L[1],W=(0,r.useState)(""),X=(0,c.Z)(W,2),J=X[0],K=X[1],U=(0,r.useState)(),Q=(0,c.Z)(U,2),ee=Q[0],ne=Q[1],ae=(0,r.useState)(!1),se=(0,c.Z)(ae,2),ce=se[0],re=se[1],ie=(0,r.useState)({}),oe=(0,c.Z)(ie,2),le=oe[0],ue=oe[1],de=(0,r.useState)(!1),me=(0,c.Z)(de,2),pe=me[0],he=me[1],fe=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Y.ef)();case 2:t=e.sent,K(t.data.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=e.host?Math.floor((1e3*e.host.due_time-Date.now())/864e5):"-",ve=e.detail.package.id,je=e.detail,Ze=e.host;(0,r.useEffect)((function(){fe(),ge();var e={description:je.package.description,price:Ze.first_payment_amount};return O(e),function(){return clearInterval(E.current)}}),[]);var ge=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.xp({product_id:30,cal_group_id:t,bw_type_id:je.bw.id,data_center_id:je.data_center.id});case 3:n=e.sent,s=n.data.data,Z(s.cal_group),p(s.package),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),o.ZP.error(e.t0.data.msg);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){if(!I||I===ve)return(0,f.vC)(n("select")+n("common.package"),"error");_e()},_e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:t,package_id:I},e.next=4,l.PN(n);case 4:200===(s=e.sent).data.status&&(ue(s.data.data),he(!0)),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var c=(0,s.Z)((0,a.Z)().mark((function s(){var c,r;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c={id:t,package_id:I},a.next=4,l.CZ(c);case 4:200===(r=a.sent).data.status&&(Number(le.price)<=0?(0,f.vC)(n("cloud.tip34"),"success",(function(){he(!1),e.refreshDetail()})):(re(!0),ne(r.data.data.id),be(r.data.data.id))),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),s,null,[[0,8]])})));return function(){return c.apply(this,arguments)}}(),be=function(t){E.current=setInterval((0,s.Z)((0,a.Z)().mark((function n(){var s;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.LX(t||ee);case 2:if(s=n.sent,q((function(e){return e-2e3})),"Paid"!==s.data.code){n.next=9;break}return(0,f.vC)(s.data.msg,"success",(function(){he(!1),e.refreshDetail()})),clearInterval(E.current),re(!1),n.abrupt("return",!1);case 9:if("Paid"!==s.code&&0!==$){n.next=13;break}return clearInterval(E.current),re(!1),n.abrupt("return",!1);case 13:case"end":return n.stop()}}),n)}))),2e3)};return(0,x.jsxs)("div",{className:"com-content add-cloud cloud-upgrade",children:[(0,x.jsx)("div",{className:"com-card",children:(0,x.jsx)("div",{className:"box",children:(0,x.jsx)("div",{className:"package",children:(0,x.jsx)(te.Z,{onChange:function(e){k(0),ge(e)},children:null===j||void 0===j?void 0:j.map((function(e){return(0,x.jsxs)(i,{tab:e.name,children:[(0,x.jsx)("p",{className:"info",children:e.description}),(0,x.jsx)(N.Z,{gutter:{xs:8,md:24,lg:35},children:m.map((function(e,t){return(0,x.jsx)(_.Z,{xs:{span:24},md:{span:12},lg:{span:6},children:(0,x.jsxs)("div",{className:"item c-hover ".concat(I===e.id&&I!==ve?"c-active":""," ").concat(e.id===ve?"mask":""),onClick:function(){return function(e,t){k(t),T(e);var n=m.filter((function(t){return t.id===e}));A(n[0])}(e.id,t)},children:[(0,x.jsxs)("p",{className:"price",children:[(0,x.jsxs)("span",{className:"p-num",children:[J.prefix,e.price.split(".")[0]]}),(0,x.jsxs)("span",{className:"cycle",children:[".",e.price.split(".")[1],"/mo"]})]}),(0,x.jsx)("p",{className:"des",dangerouslySetInnerHTML:{__html:e.description}})]},e.id)},e.id)}))}),(0,x.jsx)("div",{className:"upbtn",children:(0,x.jsx)(b.Z,{className:"sub-button",type:"primary",onClick:Ne,children:n("common.sure")})})]},e.id)}))})})})}),J&&le?(0,x.jsx)(y.Z,{className:"refund-modal",visible:pe,footer:null,centered:!0,closable:!1,style:{borderRadius:"10px",overflow:"auto"},maskClosable:!0,keyboard:!0,getContainer:!1,onCancel:function(){return he(!1)},children:pe&&(0,x.jsxs)("div",{className:"modal-unopen",children:[(0,x.jsx)("div",{className:"modal-title",children:n("cloud.upgrade_cloud")}),(0,x.jsxs)("div",{className:"modal-form",children:[(0,x.jsxs)("div",{className:"config-item",children:[(0,x.jsx)("div",{className:"row-l",children:n("cloud.cur_config")}),(0,x.jsx)("div",{className:"row-r",children:(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("p",{className:"des",dangerouslySetInnerHTML:{__html:null===M||void 0===M?void 0:M.description}}),(0,x.jsxs)("p",{className:"price",children:[J.currency_prefix,null===M||void 0===M?void 0:M.price,"/",n("cloud.month")]})]})})]}),(0,x.jsxs)("div",{className:"config-item",children:[(0,x.jsx)("div",{className:"row-l",children:n("cloud.after_config")}),(0,x.jsx)("div",{className:"row-r white",children:(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("p",{className:"des",dangerouslySetInnerHTML:{__html:null===R||void 0===R?void 0:R.description}}),(0,x.jsxs)("p",{className:"price",children:[J.currency_prefix,null===R||void 0===R?void 0:R.price,"/",n("cloud.month")]})]})})]}),(0,x.jsxs)("div",{className:"due-time",children:[n("cloud.cur_time"),"\uff1a",(0,x.jsx)("span",{className:"day",children:xe}),n("common.day")]}),(0,x.jsxs)("div",{className:"total-price",children:[n("common.cur_cost"),"\uff1a",(0,x.jsxs)("div",{className:"num",children:[(0,x.jsx)("span",{children:J.currency_prefix}),null===le||void 0===le?void 0:le.price]})]})]}),(0,x.jsxs)("div",{className:"modal-footer",children:[(0,x.jsx)(b.Z,{className:"sure",onClick:ye,children:n("common.sure")}),(0,x.jsx)(b.Z,{className:"cancel",onClick:function(){return he(!1)},children:n("common.cancel")})]})]})}):null,ee&&(0,x.jsx)(G.Z,{orderId:ee,timer:E,visible:ce,handleCancel:function(){re(!1),clearInterval(E.current)}})]})}function ae(){var e=Z.Z.Option,t=(0,F.$)().t,a=(0,r.useState)((function(){return Number(window.location.hash.split("=")[1])})),s=(0,c.Z)(a,2),i=s[0],o=(s[1],(0,r.useState)("")),u=(0,c.Z)(o,2),d=u[0],m=u[1],p=(0,r.useState)(!0),h=(0,c.Z)(p,2),v=h[0],w=h[1],k=(0,r.useState)(!1),S=(0,c.Z)(k,2),Y=S[0],P=S[1],T=(0,r.useState)({id:i,name:null,disk_id:null}),E=(0,c.Z)(T,2),D=E[0],B=E[1],M=(0,r.useState)(!1),O=(0,c.Z)(M,2),H=O[0],z=O[1],R=(0,r.useState)([]),G=(0,c.Z)(R,2),A=G[0],V=G[1],$=(0,r.useState)(0),X=(0,c.Z)($,2),J=X[0],K=X[1],U=(0,r.useState)({keywords:"",page:1,limit:5,orderby:"id",sort:"desc"}),Q=(0,c.Z)(U,2),ee=Q[0],te=Q[1],ne=(0,r.useState)(10),ae=(0,c.Z)(ne,2),se=ae[0],ce=ae[1],re=(0,r.useState)({keywords:"",page:1,limit:5,orderby:"id",sort:"desc"}),ie=(0,c.Z)(re,2),oe=ie[0],le=ie[1];(0,r.useEffect)((function(){Be()}),[ee]),(0,r.useEffect)((function(){Me()}),[oe]);var ue=(0,r.useState)(!1),de=(0,c.Z)(ue,2),me=de[0],pe=de[1],he=(0,r.useState)([]),fe=(0,c.Z)(he,2),xe=fe[0],ve=fe[1],je=(0,r.useState)(!1),Ze=(0,c.Z)(je,2),ge=Ze[0],Ne=Ze[1],_e=(0,r.useState)([]),ye=(0,c.Z)(_e,2),be=ye[0],we=ye[1],ke=(0,r.useState)(!1),Ce=(0,c.Z)(ke,2),Se=Ce[0],Ie=Ce[1],Fe=(0,r.useState)(!1),Ye=(0,c.Z)(Fe,2),Pe=Ye[0],Te=Ye[1],Ee=[{title:t("cloud.bas_columns_title1"),dataIndex:"name",ellipsis:!0,width:300},{title:t("cloud.bas_columns_title2"),dataIndex:"notes",ellipsis:!0},{title:t("cloud.bas_columns_title3"),dataIndex:"create_time",width:200,render:function(e){return(0,x.jsx)(x.Fragment,{children:e?I()(1e3*e).format("YYYY-MM-DD HH:mm"):"--"})}},{title:t("cloud.bas_columns_title4"),width:80,render:function(e,n){return(0,x.jsxs)("div",{className:"more",children:[(0,x.jsx)("span",{className:"more-text",children:"..."}),(0,x.jsxs)("span",{className:"more-operation",children:[(0,x.jsx)("a",{className:"more-dilatation",onClick:function(){return He(n)},children:t("cloud.bas_btn5")}),(0,x.jsx)("a",{className:"more-delete",onClick:function(){return Oe(n)},children:t("cloud.bas_btn6")})]})]})}}],De=[{title:t("cloud.bas_columns_title1"),dataIndex:"name",ellipsis:!0,width:300},{title:t("cloud.bas_columns_title2"),dataIndex:"notes",ellipsis:!0},{title:t("cloud.bas_columns_title3"),dataIndex:"create_time",width:200,render:function(e){return(0,x.jsx)(x.Fragment,{children:e?I()(1e3*e).format("YYYY-MM-DD HH:mm"):"--"})}},{title:t("cloud.bas_columns_title4"),width:80,render:function(e,n){return(0,x.jsxs)("div",{className:"more",children:[(0,x.jsx)("span",{className:"more-text",children:"..."}),(0,x.jsxs)("span",{className:"more-operation",children:[(0,x.jsx)("a",{className:"more-dilatation",onClick:function(){return ze(n)},children:t("cloud.bas_btn5")}),(0,x.jsx)("a",{className:"more-delete",onClick:function(){return Re(n)},children:t("cloud.bas_btn6")})]})]})}}],Be=function(){pe(!0),(0,l.CO)((0,j.Z)((0,j.Z)({},ee),{},{id:i})).then((function(e){if(200===e.data.status&&e.data.data.count>0){K(e.data.data.count),Ie(!0);var t=e.data.data.list;console.log(e),ve(t)}else Ie(!1);pe(!1)}))},Me=function(){Ne(!0),(0,l.D$)((0,j.Z)((0,j.Z)({},ee),{},{id:i})).then((function(e){if(200===e.data.status&&e.data.data.count>0){ce(e.data.data.count),Te(!0);var t=e.data.data.list;we(t)}else Te(!1);Ne(!1)}))},Oe=function(e){C().fire({text:"\u60a8\u5c06\u5220\u9664 ".concat(e.name,",\u8bf7\u786e\u8ba4\u662f\u5426\u7ee7\u7eed\uff01"),icon:"info",showCancelButton:!0,confirmButtonColor:"#5C5EE4",confirmButtonText:"\u786e\u8ba4",cancelButtonText:"\u53d6\u6d88",customClass:{icon:"ssh-icon",cancelButton:"ssh-cancel-button"}}).then((function(t){if(t.value){var n={id:i,snapshot_id:e.id};(0,l.aN)(n).then((function(t){200===t.data.status&&((0,f.vC)("\u60a8\u5df2\u6210\u529f\u5220\u9664 ".concat(e.name),"success"),Be())}))}}))},He=function(e){C().fire({text:"\u60a8\u5c06\u8fd8\u539f ".concat(e.name,",\u8bf7\u786e\u8ba4\u662f\u5426\u7ee7\u7eed\uff01"),icon:"info",showCancelButton:!0,confirmButtonColor:"#5C5EE4",confirmButtonText:"\u786e\u8ba4",cancelButtonText:"\u53d6\u6d88",customClass:{icon:"ssh-icon",cancelButton:"ssh-cancel-button"}}).then((function(t){if(t.value){var n={id:i,snapshot_id:e.id};(0,l.xx)(n).then((function(t){200===t.data.status&&((0,f.vC)("\u60a8\u5df2\u6210\u529f\u8fd8\u539f ".concat(e.name),"success"),Be())}))}}))},ze=function(e){C().fire({text:"\u60a8\u5c06\u8fd8\u539f ".concat(e.name,",\u8bf7\u786e\u8ba4\u662f\u5426\u7ee7\u7eed\uff01"),icon:"info",showCancelButton:!0,confirmButtonColor:"#5C5EE4",confirmButtonText:"\u786e\u8ba4",cancelButtonText:"\u53d6\u6d88",customClass:{icon:"ssh-icon",cancelButton:"ssh-cancel-button"}}).then((function(t){if(t.value){var n={id:i,snapshot_id:e.id};(0,l.pi)(n).then((function(t){200===t.data.status&&((0,f.vC)("\u60a8\u5df2\u6210\u529f\u8fd8\u539f ".concat(e.name),"success"),Me())}))}}))},Re=function(e){C().fire({text:"\u60a8\u5c06\u5220\u9664 ".concat(e.name,",\u8bf7\u786e\u8ba4\u662f\u5426\u7ee7\u7eed\uff01"),icon:"info",showCancelButton:!0,confirmButtonColor:"#5C5EE4",confirmButtonText:"\u786e\u8ba4",cancelButtonText:"\u53d6\u6d88",customClass:{icon:"ssh-icon",cancelButton:"ssh-cancel-button"}}).then((function(t){if(t.value){var n={id:i,snapshot_id:e.id};(0,l._S)(n).then((function(t){200===t.data.status&&((0,f.vC)("\u60a8\u5df2\u6210\u529f\u5220\u9664 ".concat(e.name),"success"),Me())}))}}))},Ge=function(e){m(""),B({id:i,name:"",disk_id:0}),w("s"===e),z(!0)};return(0,x.jsxs)("div",{className:"cloud-card backup-snapshot",children:[Se?(0,x.jsxs)("div",{className:"snapshot-yes",children:[(0,x.jsxs)("div",{className:"snapshot-yes-top",children:[(0,x.jsxs)("div",{className:"left",children:[(0,x.jsx)("span",{className:"title",children:t("cloud.bas_title1")}),(0,x.jsx)("span",{className:"text",children:"".concat(J,"/5")})]}),(0,x.jsx)("div",{className:"right",children:(0,x.jsx)(b.Z,{className:"btn-create",onClick:function(){return Ge("s")},children:t("cloud.bas_btn2")})})]}),(0,x.jsx)("div",{className:"main_table",children:(0,x.jsx)(q.Z,{columns:Ee,dataSource:xe,pagination:!1,loading:me,rowKey:function(e){return e.id}})}),(0,x.jsx)(L.Z,{total:J,page:ee,changePage:function(e,t){te((function(n){return(0,j.Z)((0,j.Z)({},n),{},{page:e,limit:t})}))}})]}):(0,x.jsxs)("div",{className:"snapshot-no",children:[(0,x.jsx)("div",{className:"snapshot-no-title",children:t("cloud.bas_title1")}),(0,x.jsxs)("div",{className:"snapshot-no-main",children:[(0,x.jsx)("img",{className:"snapshot-no-img",src:n(13771),alt:""}),(0,x.jsx)(b.Z,{className:"snapshot-no-btn",onClick:function(){return Ge("s")},children:t("cloud.bas_btn4")})]})]}),Pe?(0,x.jsxs)("div",{className:"backup-yes",children:[(0,x.jsxs)("div",{className:"backup-yes-top",children:[(0,x.jsx)("div",{className:"left",children:(0,x.jsx)("span",{className:"title",children:t("cloud.bas_title2")})}),(0,x.jsx)("div",{className:"right"})]}),(0,x.jsx)("div",{className:"main_table",children:(0,x.jsx)(q.Z,{columns:De,dataSource:be,pagination:!1,loading:ge,rowKey:function(e){return e.id}})}),(0,x.jsx)(L.Z,{total:se,page:oe,changePage:function(e,t){le((function(n){return(0,j.Z)((0,j.Z)({},n),{},{page:e,limit:t})}))}})]}):(0,x.jsxs)("div",{className:"backup-no",children:[(0,x.jsx)("div",{className:"backup-no-title",children:t("cloud.bas_title2")}),(0,x.jsxs)("div",{className:"backup-no-main",children:[(0,x.jsx)("img",{className:"backup-no-img",src:n(74557),alt:""}),(0,x.jsx)(b.Z,{className:"backup-no-btn",onClick:function(){return Ge("b")},children:t("cloud.bas_btn4")})]})]}),(0,x.jsx)(y.Z,{visible:H,footer:null,centered:!0,closable:!1,style:{borderRadius:"10px",overflow:"auto"},getContainer:!1,onCancel:function(){return z(!1)},children:(0,x.jsxs)("div",{className:"create-snapshot",children:[(0,x.jsx)("div",{className:"top",children:(0,x.jsx)("div",{className:"title",children:v?"\u521b\u5efa\u5feb\u7167":"\u521b\u5efa\u5907\u4efd"})}),(0,x.jsxs)("div",{className:"main",children:[d?(0,x.jsx)("div",{className:"err",children:(0,x.jsx)(W.Z,{description:d,type:"error",showIcon:!0})}):(0,x.jsx)("div",{className:"remind-text",children:(0,x.jsx)(W.Z,{message:"\u5efa\u8bae\u60a8\u5173\u95ed\u5b9e\u4f8b\u540e\u521b\u5efa".concat(v?"\u5feb\u7167":"\u5907\u4efd","\uff0c\u786e\u4fdd\u4e00\u81f4\u6027\u907f\u514d\u51fa\u73b0\u95ee\u9898\uff0c\u5feb\u7167\u57fa\u4e8e\u6570\u91cf\u6536\u8d39"),type:"warning",showIcon:!0})}),(0,x.jsxs)("div",{className:"form",children:[(0,x.jsx)("div",{className:"row",children:(0,x.jsxs)(N.Z,{children:[(0,x.jsx)(_.Z,{span:4,children:(0,x.jsx)("span",{className:"label",children:"\u78c1\u76d8"})}),(0,x.jsx)(_.Z,{span:20,children:(0,x.jsx)(Z.Z,{loading:Y,size:"large",onDropdownVisibleChange:function(e){return function(e){e&&(P(!0),(0,l.I7)(i).then((function(e){e.data.list&&V(e.data.list),P(!1)})))}(e)},onChange:function(e){B((0,j.Z)((0,j.Z)({},D),{},{disk_id:Number(e)}))},children:A.map((function(t){return(0,x.jsx)(e,{value:t.id,children:"".concat(t.name,"-").concat(t.size,"G")},t.id)}))})})]})}),(0,x.jsx)("div",{className:"row",children:(0,x.jsxs)(N.Z,{children:[(0,x.jsx)(_.Z,{span:4,children:(0,x.jsx)("span",{className:"label",children:"\u540d\u79f0"})}),(0,x.jsx)(_.Z,{span:20,children:(0,x.jsx)(g.Z,{size:"large",placeholder:v?"\u8bf7\u8f93\u5165\u5feb\u7167\u540d\u79f0":"\u8bf7\u8f93\u5165\u5907\u4efd\u540d\u79f0",onChange:function(e){B((0,j.Z)((0,j.Z)({},D),{},{name:e.target.value}))}})})]})})]})]}),(0,x.jsxs)("div",{className:"footer",children:[(0,x.jsx)(b.Z,{className:"sub-btn",onClick:function(){var e=!0;D.name?D.name.length>10&&(m("\u8bf7\u8f93\u516510\u5b57\u4ee5\u5185\u7684\u540d\u79f0"),e=!1):(m("\u8bf7\u8f93\u5165\u540d\u79f0"),e=!1),D.disk_id||(m(v?"\u8bf7\u9009\u62e9\u9700\u8981\u521b\u5efa\u5feb\u7167\u7684\u78c1\u76d8":"\u8bf7\u9009\u62e9\u9700\u8981\u521b\u5efa\u5907\u4efd\u7684\u78c1\u76d8"),e=!1),e&&(m(""),v?(console.log(D),(0,l.Ox)(D).then((function(e){200===e.data.status&&((0,f.vC)("\u5feb\u7167\u521b\u5efa\u53d1\u8d77\u6210\u529f","success"),z(!1),Be())}))):(console.log("\u8c03\u7528\u7684\u5907\u4efd\u63a5\u53e3"),(0,l.id)(D).then((function(e){200===e.data.status&&((0,f.vC)("\u5907\u4efd\u521b\u5efa\u53d1\u8d77\u6210\u529f","success"),z(!1),Me())}))))},children:"\u7acb\u5373\u521b\u5efa"}),(0,x.jsx)(b.Z,{className:"cancel-btn",onClick:function(){return z(!1)},children:"\u53d6\u6d88"})]})]})})]})}function se(e){var t=(0,F.$)().t,n=(0,r.useState)([]),i=(0,c.Z)(n,2),u=i[0],d=i[1],m=e.id,p=(0,r.useState)(0),h=(0,c.Z)(p,2),f=h[0],v=h[1],j=(0,r.useState)({id:m,keywords:"",page:1,limit:20,orderby:"id",sort:"desc"}),Z=(0,c.Z)(j,2),g=Z[0],N=Z[1],_=[{title:"ID",dataIndex:"id",key:"id",width:120},{title:t("cloud.description"),dataIndex:"description",key:"description"},{title:t("common.create_time"),dataIndex:"due_time",key:"due_time",width:200,render:function(e,t){return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("span",{children:I()(1e3*t.create_time).format("YYYY-MM-DD HH: mm")})})}},{title:"IP",dataIndex:"ip",key:"ip",width:150}],y=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Bd(g);case 3:t=e.sent,d(t.data.data.list),v(t.data.data.count),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o.ZP.error(e.t0.data.msg);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){y()}),[]),(0,x.jsx)("div",{className:"com-content cloud-log",children:(0,x.jsxs)("div",{className:"com-card",children:[(0,x.jsx)(q.Z,{columns:_,dataSource:u,rowKey:function(e){return e.id},pagination:!1,className:"cloud-tab",scroll:{x:"max-content"}}),(0,x.jsx)(L.Z,{total:f,page:g,changePage:function(e,t){N((function(n){return n.limit=t,n.page=e,n})),y()}})]})})}function ce(){var e=(0,i.lr)(),t=(0,c.Z)(e,1)[0].get("id"),n=(0,r.useState)(null),d=(0,c.Z)(n,2),m=d[0],p=d[1],h=(0,r.useState)(null),f=(0,c.Z)(h,2),j=f[0],Z=f[1],g=(0,r.useState)(!0),N=(0,c.Z)(g,2),_=N[0],y=N[1],b=(0,r.useState)("summary"),w=(0,c.Z)(b,2),k=w[0],C=w[1],S=(0,r.useState)(null),I=(0,c.Z)(S,2),F=I[0],Y=I[1],P=(0,r.useState)(0),T=(0,c.Z)(P,2),E=T[0],D=T[1],M=(0,r.useRef)();(0,r.useEffect)((function(){return H(),G(),z(),R(),function(){return clearInterval(M.current)}}),[]);var H=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.rG(t);case 3:n=e.sent,p(n.data.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),o.ZP.error(e.t0.data.msg);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.jn(t);case 3:n=e.sent,Z(n.data.data.host),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o.ZP.error(e.t0.data.msg);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.XC(t);case 3:200===(n=e.sent).data.status&&D(n.data.data.rescue),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),G=function(){M.current=setInterval((0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,u.lR(t);case 4:if("operating"===(n=e.sent).data.data.status){e.next=12;break}return clearInterval(M.current),Y(n.data.data.status),R(),y(!1),H(),e.abrupt("return",!1);case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])}))),2e3)},A=function(){G()},L=function(){H()},$=function(e){C(e)};switch(k){case"summary":return m&&(0,x.jsxs)("div",{className:"com-content cloud-detail",children:[(0,x.jsx)(v,{activeTab:k,changeTab:$,detail:m,host:j,loading:_,type:F,refresh:A}),(0,x.jsx)(B,{})]});case"charts":return m&&(0,x.jsxs)("div",{className:"com-content cloud-detail",children:[(0,x.jsx)(v,{activeTab:k,changeTab:$,detail:m,host:j,loading:_,type:F,refresh:A}),(0,x.jsx)(O,{id:t})]});case"manage":return m&&(0,x.jsxs)("div",{className:"com-content cloud-detail",children:[(0,x.jsx)(v,{activeTab:k,changeTab:$,detail:m,host:j,loading:_,type:F,refresh:A}),(0,x.jsx)(V,{detail:m,refresh:A,type:F,isEscue:E})]});case"disk":return m&&(0,x.jsxs)("div",{className:"com-content cloud-detail",children:[(0,x.jsx)(v,{activeTab:k,changeTab:$,detail:m,host:j,loading:_,type:F,refresh:A}),(0,x.jsx)(J,{})]});case"network":return m&&(0,x.jsxs)("div",{className:"com-content cloud-detail",children:[(0,x.jsx)(v,{activeTab:k,changeTab:$,detail:m,host:j,loading:_,type:F,refresh:A}),(0,x.jsx)(ee,{id:t,detail:m,refreshDetail:L})]});case"upgrade":return m&&(0,x.jsxs)("div",{className:"com-content cloud-detail",children:[(0,x.jsx)(v,{activeTab:k,changeTab:$,detail:m,host:j,loading:_,type:F,refresh:A}),(0,x.jsx)(ne,{id:t,detail:m,host:j,refreshDetail:L})]});case"backup_snapshot":return m&&(0,x.jsxs)("div",{className:"com-content cloud-detail",children:[(0,x.jsx)(v,{activeTab:k,changeTab:$,detail:m,host:j,loading:_,type:F,refresh:A}),(0,x.jsx)(ae,{})]});case"log":return m&&(0,x.jsxs)("div",{className:"com-content cloud-detail",children:[(0,x.jsx)(v,{activeTab:k,changeTab:$,detail:m,host:j,loading:_,type:F,refresh:A}),(0,x.jsx)(se,{id:t})]});default:return null}return null}},91646:function(){}}]);
//# sourceMappingURL=874.04e24c7a.chunk.js.map