"use strict";(self.webpackChunkreact_member_center=self.webpackChunkreact_member_center||[]).push([[572],{28010:function(n,e,t){t.d(e,{CY:function(){return d},FI:function(){return x},Mn:function(){return f},Np:function(){return s},Ox:function(){return r},Qz:function(){return p},Yj:function(){return j},_S:function(){return u},aN:function(){return l},id:function(){return h},pi:function(){return m},uP:function(){return i},xx:function(){return o},zC:function(){return a}});var c=t(71584);function a(){return c.Z.get("/idcsmart_cloud/all")}function s(n){return c.Z.get("/idcsmart_cloud/".concat(n,"/disk"))}function i(){return c.Z.get("/snapshot")}function r(n){return c.Z.post("/idcsmart_cloud/".concat(n.id,"/snapshot"),n)}function o(n){return c.Z.post("/idcsmart_cloud/".concat(n.id,"/snapshot/restore"),n)}function l(n){return c.Z.delete("/idcsmart_cloud/".concat(n.id,"/snapshot/").concat(n.snapshot_id),n)}function d(){return c.Z.get("/backup")}function u(n){return c.Z.delete("/idcsmart_cloud/".concat(n.id,"/backup/").concat(n.backup_id),n)}function m(n){return c.Z.post("/idcsmart_cloud/".concat(n.id,"/backup/restore"),n)}function h(n){return c.Z.post("/idcsmart_cloud/".concat(n.id,"/backup"),n)}function p(){return c.Z.get("/template")}function f(n){return c.Z.post("/idcsmart_cloud/".concat(n.id,"/template"),n)}function x(n){return c.Z.delete("/idcsmart_cloud/".concat(n.id,"/template/").concat(n.template_id),n)}function j(){return c.Z.get("/iso")}},83572:function(n,e,t){t.r(e),t.d(e,{default:function(){return C}});var c=t(1413),a=t(29439),s=t(72791),i=t(83734),r=t(93020),o=t(45227),l=t(70478),d=t(90785),u=t(66106),m=t(30914),h=t(68678),p=t(87309),f=t(75033),x=t(28010),j=t(21830),Z=t.n(j),v=t(60151),N=t(72426),_=t.n(N),g=t(33168),b=t(80184);function C(){var n=(0,g.$)().t,e=i.Z.Option,j=(0,s.useState)([]),N=(0,a.Z)(j,2),C=(N[0],N[1],(0,s.useState)({id:null,name:null})),k=(0,a.Z)(C,2),y=k[0],w=k[1],S=(0,s.useState)([]),Y=(0,a.Z)(S,2),I=Y[0],F=Y[1],z=(0,s.useState)(!1),B=(0,a.Z)(z,2),M=(B[0],B[1],(0,s.useState)(!1)),D=(0,a.Z)(M,2),E=D[0],H=D[1],T=(0,s.useState)(""),O=(0,a.Z)(T,2),P=O[0],Q=O[1],R=(0,s.useState)(!1),K=(0,a.Z)(R,2),V=K[0],W=K[1],$=(0,s.useState)([]),q=(0,a.Z)($,2),A=q[0],G=q[1],J=[{title:"\u540d\u79f0",dataIndex:"name",key:"name",ellipsis:!0,width:200},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time",ellipsis:!0,width:200,render:function(n){return(0,b.jsx)(b.Fragment,{children:_()(1e3*n).format("YYYY-MM-DD HH:mm")})}},{title:"\u5b9e\u4f8b",dataIndex:"host_name",key:"host_name",ellipsis:!0,minWidth:400,render:function(n,e){return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"host",children:[(0,b.jsx)("span",{className:"host-name",children:e.host_name?e.host_name:"--"}),(0,b.jsx)("span",{className:"host-ip",children:e.ip?e.ip:"--"})]})})}},{title:"\u533a\u57df",dataIndex:"area",key:"area",ellipsis:!0,width:200,render:function(n,e){return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"area",children:[(0,b.jsx)("img",{src:e.country_code&&t(85995)("./".concat(e.country_code,".png")),alt:""}),(0,b.jsx)("span",{className:"country",children:e.country?e.country:null}),(0,b.jsx)("span",{className:"city",children:e.city?e.city:null}),(0,b.jsx)("span",{className:"area",children:e.area?e.area:null})]})})}},{title:"\u64cd\u4f5c",dataIndex:"id",key:"id",width:80,render:function(e,t){return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:"com-opt-pop",id:"com-opt"+t.id,children:(0,b.jsx)(r.Z,{getPopupContainer:function(){return document.getElementById("com-opt"+t.id)},content:(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("p",{className:"cloud-opt",onClick:function(){return tn(t)},children:n("common.delete")})}),placement:"topRight",children:(0,b.jsx)("p",{className:"opt-icon",children:(0,b.jsx)(f.Z,{})})})})})}}],L=(0,s.useState)(!1),U=(0,a.Z)(L,2),X=U[0],nn=U[1],en=function(){nn(!0),(0,x.Qz)().then((function(n){nn(!1),G(n.data.list)}))},tn=function(n){Z().fire({html:"\n      <div style='display:flex;flex-direction: column;'>\n        <span>\u60a8\u5c06\u5220\u9664\u5b9e\u4f8b ".concat(n.host_name," \u7684\u78c1\u76d8</span>\n        <span>").concat(_()(1e3*n.create_time).format("YYYY-MM-DD HH:mm"),"\u521b\u5efa\u7684\u6a21\u677f</span>\n        <span>\u5f53\u524d\u6240\u6709\u6570\u636e\u4e22\u5931\uff0c\u8bf7\u786e\u8ba4\u60a8\u9700\u8981\u5220\u9664\u6a21\u677f</span>\n      </div>\n      "),icon:"info",showCancelButton:!0,confirmButtonColor:"#5C5EE4",confirmButtonText:"\u7acb\u5373\u5220\u9664",cancelButtonText:"\u53d6\u6d88",customClass:{icon:"snapshot-del-icon",cancelButton:"snapshot-cancel-button"}}).then((function(e){if(e.value){var t={id:n.host_id,template_id:n.id};(0,x.FI)(t).then((function(e){200===e.data.status&&((0,v.vC)("\u60a8\u5df2\u6210\u529f\u5220\u9664 ".concat(n.name),"success"),en())}))}}))};return(0,s.useEffect)((function(){en(),(0,x.zC)().then((function(n){if(200===n.data.status){var e=n.data.data.list.reverse();e[0]&&w((0,c.Z)((0,c.Z)({},y),{},{id:e[0].id})),F(e)}}))}),[]),(0,b.jsxs)("div",{className:"Template",children:[(0,b.jsxs)("div",{className:"top",children:[(0,b.jsx)("div",{className:"top-text",children:"\u5feb\u901f\u5c06\u78c1\u76d8\u6570\u636e\u8fdb\u884c\u6a21\u677f\uff0c\u4e00\u65e6\u91cd\u88c5/\u5b9e\u4f8b\u5220\u9664\uff0c\u6240\u6709\u6a21\u677f\u4e22\u5931"}),(0,b.jsx)("div",{className:"top-btn",onClick:function(){w({id:I[0]?I[0].id:null,name:null}),Q(""),W(!0)},children:"\u521b\u5efa\u6a21\u677f"})]}),(0,b.jsx)("div",{className:"snapshot-table",children:(0,b.jsx)(o.Z,{pagination:!1,rowKey:function(n){return n.id},loading:X,columns:J,dataSource:A})}),(0,b.jsx)(l.Z,{visible:V,footer:null,centered:!0,closable:!1,style:{borderRadius:"10px",overflow:"auto"},getContainer:!1,onCancel:function(){return W(!1)},children:(0,b.jsxs)("div",{className:"create-snapshot",children:[(0,b.jsx)("div",{className:"top",children:(0,b.jsx)("div",{className:"title",children:"\u521b\u5efa\u6a21\u677f"})}),(0,b.jsxs)("div",{className:"main",children:[P?(0,b.jsx)("div",{className:"err",children:(0,b.jsx)(d.Z,{description:P,type:"error",showIcon:!0})}):(0,b.jsx)("div",{className:"remind-text",children:"\u5efa\u8bae\u60a8\u5173\u95ed\u5b9e\u4f8b\u540e\u521b\u5efa\u6a21\u677f\uff0c\u786e\u4fdd\u4e00\u81f4\u6027\u907f\u514d\u51fa\u73b0\u95ee\u9898\uff0c\u6a21\u677f\u57fa\u4e8e\u6570\u91cf\u6536\u8d39"}),(0,b.jsxs)("div",{className:"form",children:[(0,b.jsx)("div",{className:"row",children:(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(m.Z,{span:4,children:(0,b.jsx)("span",{className:"label",children:"\u5b9e\u4f8b"})}),(0,b.jsx)(m.Z,{span:20,children:(0,b.jsx)(i.Z,{size:"large",placeholder:"\u8bf7\u9009\u62e9\u5b9e\u4f8b",onChange:function(n){w((0,c.Z)((0,c.Z)({},y),{},{id:n}))},defaultValue:I[0]?I[0].id:"",children:I.map((function(n){return(0,b.jsx)(e,{value:n.id,children:n.name},n.id)}))})})]})}),(0,b.jsx)("div",{className:"row",children:(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(m.Z,{span:4,children:(0,b.jsx)("span",{className:"label",children:"\u540d\u79f0"})}),(0,b.jsx)(m.Z,{span:20,children:(0,b.jsx)(h.Z,{size:"large",placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0",onChange:function(n){w((0,c.Z)((0,c.Z)({},y),{},{name:n.target.value}))}})})]})})]})]}),(0,b.jsxs)("div",{className:"footer",children:[(0,b.jsx)(p.Z,{className:"sub-btn",onClick:function(){var n=!0;if(y.id||(n=!1,Q("\u8bf7\u9009\u62e9\u9700\u8981\u521b\u5efa\u6a21\u677f\u7684\u5b9e\u4f8b")),y.name?y.name.length>10&&(n=!1,Q("\u6a21\u677f\u540d\u79f0\u957f\u5ea6\u5e94\u4e0d\u5927\u4e8e10")):(n=!1,Q("\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0")),n){Q("");var e=(0,c.Z)({},y);H(!0),(0,x.Mn)(e).then((function(n){H(!1),200===n.data.status&&((0,v.vC)(n.data.msg,"success"),en(),W(!1))})).catch((function(n){H(!1),Q(n.data.msg)}))}},loading:E,children:"\u7acb\u5373\u521b\u5efa"}),(0,b.jsx)(p.Z,{className:"cancel-btn",onClick:function(){return W(!1)},children:"\u53d6\u6d88"})]})]})})]})}}}]);
//# sourceMappingURL=572.b8042d2b.chunk.js.map