"use strict";(self.webpackChunkreact_member_center=self.webpackChunkreact_member_center||[]).push([[761],{71823:function(e,t,n){n.d(t,{$8:function(){return d},Bd:function(){return j},CO:function(){return C},CZ:function(){return X},D$:function(){return V},F:function(){return J},F5:function(){return p},Gl:function(){return v},I7:function(){return w},LI:function(){return S},LX:function(){return Z},Lb:function(){return D},OJ:function(){return g},OV:function(){return k},Os:function(){return u},Ox:function(){return F},P4:function(){return Y},PN:function(){return W},Pf:function(){return R},So:function(){return _},Td:function(){return m},YW:function(){return h},Z1:function(){return f},_S:function(){return O},aN:function(){return q},dr:function(){return A},dz:function(){return x},ex:function(){return s},f3:function(){return a},ho:function(){return E},iS:function(){return G},id:function(){return M},jJ:function(){return N},kg:function(){return l},lp:function(){return H},nE:function(){return b},pH:function(){return c},pi:function(){return P},rA:function(){return L},rG:function(){return y},rd:function(){return o},v8:function(){return z},vh:function(){return $},xG:function(){return B},xp:function(){return i},xx:function(){return I},zz:function(){return T}});var r=n(71584);function c(e){return r.Z.get("/product/".concat(e,"/idcsmart_cloud/data_center"))}function a(e){return r.Z.get("/product/".concat(e,"/idcsmart_cloud/bw_type"))}function i(e){return r.Z.get("/product/".concat(e.product_id,"/idcsmart_cloud/package"),{params:e})}function u(e){return r.Z.get("/product/".concat(e.product_id,"/idcsmart_cloud/system_image"),{params:e})}function o(e){return r.Z.get("/vpc",{params:e})}function s(e){return r.Z.get("/security_group",{params:e})}function d(e){return r.Z.get("/product/".concat(e,"/idcsmart_cloud/config"))}function l(e){return r.Z.get("/idcsmart_cloud/duration_price",{params:e})}function p(e){return r.Z.post("/product/".concat(e.product_id,"/config_option"),e)}function f(e){return r.Z.post("/product/settle",e)}function m(e){return r.Z.post("/promo_code/apply",e)}function _(e){return r.Z.post("/pay",e)}function h(e){return r.Z.post("/credit",e)}function Z(e){return r.Z.get("/pay/".concat(e,"/status"))}function x(e){return r.Z.get("/order/".concat(e))}function g(e){return r.Z.get("/idcsmart_cloud",{params:e})}function v(){return r.Z.get("/gateway")}function b(){return r.Z.get("/account")}function y(e){return r.Z.get("/idcsmart_cloud/".concat(e))}function k(e){return r.Z.get("/ssh_key",{params:e})}function j(e){return r.Z.get("/idcsmart_cloud/".concat(e.id,"/log"),{params:e})}function w(e){return r.Z.get("/idcsmart_cloud/".concat(e,"/disk"))}function N(e){return r.Z.get("idcsmart_cloud_disk",{params:e})}function z(e){return r.Z.put("/idcsmart_cloud_disk/".concat(e,"/umount"))}function S(e){return r.Z.put("idcsmart_cloud_disk/".concat(e.id,"/mount"),e)}function C(e){return r.Z.get("idcsmart_cloud/".concat(e.id,"/snapshot"),{params:e})}function F(e){return r.Z.post("idcsmart_cloud/".concat(e.id,"/snapshot"),e)}function I(e){return r.Z.post("idcsmart_cloud/".concat(e.id,"/snapshot/restore"),e)}function q(e){return r.Z.delete("idcsmart_cloud/".concat(e.id,"/snapshot/").concat(e.snapshot_id))}function V(e){return r.Z.get("idcsmart_cloud/".concat(e.id,"/backup"),{params:e})}function M(e){return r.Z.post("idcsmart_cloud/".concat(e.id,"/backup"),e)}function P(e){return r.Z.post("idcsmart_cloud/".concat(e.id,"/backup/restore"),e)}function O(e){return r.Z.delete("idcsmart_cloud/".concat(e.id,"/backup/").concat(e.backup_id))}function E(e){return r.Z.get("host/".concat(e))}function G(e){return r.Z.get("refund",{params:e})}function J(e){return r.Z.post("refund",e)}function A(e){return r.Z.put("refund/".concat(e.id,"/cancel"))}function L(e){return r.Z.get("host/".concat(e.id,"/renew"),{params:e})}function B(e){return r.Z.post("host/".concat(e.id,"/renew"),e)}function R(e){return r.Z.get("/idcsmart_cloud/".concat(e.id,"/chart"),{params:e})}function $(e){return r.Z.get("/idcsmart_cloud/".concat(e.id,"/vpc"),{params:e})}function T(e){return r.Z.put("/idcsmart_cloud/".concat(e.id,"/vpc"),e)}function D(e){return r.Z.get("/idcsmart_cloud/".concat(e.id,"/flow"),{params:e})}function H(e){return r.Z.get("/refund/host/".concat(e,"/refund"))}function W(e){return r.Z.get("/idcsmart_cloud/".concat(e.id,"/package/upgrade"),{params:e})}function X(e){return r.Z.post("/idcsmart_cloud/".concat(e.id,"/package/upgrade/order"),e)}function Y(e){return r.Z.put("/host/".concat(e.id,"/notes"),e)}},91993:function(e,t,n){n.d(t,{Bd:function(){return i},FD:function(){return a},Mf:function(){return l},OJ:function(){return o},Rl:function(){return c},rG:function(){return s},xA:function(){return d},xp:function(){return u}});var r=n(71584);function c(e){return r.Z.get("/idcsmart_cloud_ip",{params:e})}function a(e){return r.Z.put("/idcsmart_cloud_ip/".concat(e.id,"/mount"),e)}function i(e){return r.Z.put("/idcsmart_cloud_ip/".concat(e,"/umount"))}function u(e){return r.Z.get("/product/".concat(e.id,"/idcsmart_cloud_ip/package"),{params:e})}function o(e){return r.Z.get("/idcsmart_cloud",{params:e})}function s(e){return r.Z.get("/idcsmart_cloud/".concat(e))}function d(e){return r.Z.get("/idcsmart_cloud_ip/duration_price",{params:e})}function l(e){return r.Z.get("/idcsmart_cloud/".concat(e.id,"/ip"),{params:e})}},46143:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(74165),c=n(15861),a=n(29439),i=n(72791),u=n(70819),o=n(33168),s=(n(60151),n(83734)),d=n(50419),l=n(70478),p=n(87309),f=n(32014),m=n(71823),_=n(80184),h=s.Z.Option;function Z(e){var t=(0,o.$)().t,n=(0,u.s0)(),Z=(0,i.useState)({}),x=(0,a.Z)(Z,2),g=x[0],v=x[1],b=(0,i.useState)(""),y=(0,a.Z)(b,2),k=y[0],j=y[1],w=(0,i.useState)({}),N=(0,a.Z)(w,2),z=N[0],S=N[1],C=(0,i.useState)(!1),F=(0,a.Z)(C,2),I=F[0],q=F[1],V=(0,i.useState)([]),M=(0,a.Z)(V,2),P=M[0],O=M[1],E=(0,i.useState)(""),G=(0,a.Z)(E,2),J=G[0],A=G[1],L=(0,i.useState)(!0),B=(0,a.Z)(L,2),R=B[0],$=B[1],T=(0,i.useState)(!1),D=(0,a.Z)(T,2),H=D[0],W=D[1],X=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.dz(e.orderId);case 3:n=t.sent,v(n.data.data.order),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),d.ZP.error(t.t0.data.msg);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),Y=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.nE();case 3:t=e.sent,S(t.data.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d.ZP.error(e.t0.data.msg);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Gl();case 3:t=e.sent,O(t.data.data.list),j(t.data.data.list[0].name),Q(t.data.data.list[0].name),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),d.ZP.error(e.t0.data.msg);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(n){var c,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c={gateway:n,id:e.orderId},t.next=4,m.So(c);case 4:a=t.sent,A(a.data.data.html),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),U=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(n,c){var a,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n),j(n),!(Number(z.account.credit)>=Number(g.amount)&&I)){t.next=4;break}return t.abrupt("return",!1);case 4:return t.prev=4,a={gateway:n,id:"object"!==typeof c&&c||e.orderId},t.next=8,m.So(a);case 8:i=t.sent,A(i.data.data.html),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(4);case 14:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e,n){return t.apply(this,arguments)}}(),ee=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,W(!0),n={gateway:k,id:e.orderId},t.next=5,m.So(n);case 5:W(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),W(!1);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),te=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(n){var c,a,i,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return q(n.target.checked),n.target.checked||$(!0),t.prev=2,t.next=5,m.YW({id:e.orderId,use:n.target.checked?1:0});case 5:return c=t.sent,a=c.data.data.id,t.next=9,m.dz(a);case 9:i=t.sent,u=i.data.data.order,n.target.checked?Number(z.account.credit)>=Number(u.amount)?$(!1):($(!0),U(k,a)):U(k,a),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}(),ne=function(){e.handleCancel?e.handleCancel():(clearInterval(e.timer),n("/finance/order",{replace:!0}))};(0,i.useEffect)((0,c.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:return e.next=4,Y();case 4:return e.next=6,K();case 6:case"end":return e.stop()}}),e)}))),[]);var re=void 0===e.visible||e.visible;return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(l.Z,{visible:re,title:t("common.pay"),onOk:ee,onCancel:ne,className:"pay-modal",closable:!1,footer:!R&&[(0,_.jsx)(p.Z,{className:"sure",loading:H,onClick:ee,children:t("cloud.sure_pay")},"submit"),(0,_.jsx)(p.Z,{onClick:ne,className:"cancel",children:t("common.cancel")},"back")],children:(0,_.jsxs)("div",{className:"cloud-pay-box",children:[(0,_.jsxs)("div",{className:"item first",children:[(0,_.jsx)("div",{className:"l-text",children:t("common.pay_way")}),(0,_.jsxs)("div",{className:"r-text",children:[P.length>0&&(0,_.jsx)(s.Z,{value:k,onChange:U,children:P.map((function(e){return(0,_.jsx)(h,{value:e.name,children:e.title},e.id)}))}),(0,_.jsx)(f.Z,{onChange:te,checked:I,children:t("cloud.use_balance")})]})]}),(0,_.jsxs)("div",{className:"item",children:[(0,_.jsx)("div",{className:"l-text",children:t("cloud.order_amount")}),(0,_.jsxs)("div",{className:"r-text order-num",children:["\uffe5\xa0",g.amount]})]}),(0,_.jsxs)("div",{className:"item last",children:[(0,_.jsx)("div",{className:"l-text",children:t("cloud.pay_amount")}),(0,_.jsxs)("div",{className:"r-text pay-num",children:[(0,_.jsxs)("p",{className:"paid",children:["\uffe5",I?(Number(g.amount)-Number(z.account.credit)<=0?0:Number(g.amount)-Number(z.account.credit)).toFixed(2):Number(g.amount).toFixed(2)]}),I&&(0,_.jsxs)("p",{className:"balance",children:["-\uffe5",(Number(z.account.credit)>=Number(g.amount)?Number(g.amount):Number(z.account.credit)).toFixed(2)]})]})]}),R&&(0,_.jsx)("div",{className:"item pay-html",children:(0,_.jsx)("div",{dangerouslySetInnerHTML:{__html:J}})})]})})})}},41761:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var r=n(4942),c=n(74165),a=n(15861),i=n(29439),u=n(1413),o=n(72791),s=n(33168),d=n(70819),l=n(60151),p=n(83734),f=n(77483),m=n(50419),_=n(68678),h=n(66106),Z=n(30914),x=n(96272),g=n(59220),v=n(38243),b=n(93020),y=(n(53754),n(71823)),k=n(91993),j=n(46143),w=n(68747),N=n(80184),z=p.Z.Option,S={product_id:35,config_options:{host_id:null,bw_id:0,type:"default",package_id:null,size:1,duration_price_id:null},qty:1,customfield:{promo_code:[]}},C=function(e,t){switch(t.type){case"center":return e.config_options.data_center_id=t.data_center_id,e;case"type":return(0,u.Z)((0,u.Z)({},e),{},{config_options:(0,u.Z)((0,u.Z)({},e.config_options),{},{type:t.bw_type})});case"network":return(0,u.Z)((0,u.Z)({},e),{},{config_options:(0,u.Z)((0,u.Z)({},e.config_options),{},{package_id:t.package_id})});case"bw":return(0,u.Z)((0,u.Z)({},e),{},{config_options:(0,u.Z)((0,u.Z)({},e.config_options),{},{bw_id:t.bw_id})});case"size":return(0,u.Z)((0,u.Z)({},e),{},{config_options:(0,u.Z)((0,u.Z)({},e.config_options),{},{size:t.size})});case"duration_price_id":return(0,u.Z)((0,u.Z)({},e),{},{config_options:(0,u.Z)((0,u.Z)({},e.config_options),{},{duration_price_id:t.duration_price_id})});case"qty":return(0,u.Z)((0,u.Z)({},e),{},{qty:t.qty})}};function F(){var e=(0,d.s0)(),t=(0,s.$)().t,u=(0,o.useState)([]),F=(0,i.Z)(u,2),I=F[0],q=F[1],V=(0,o.useState)(!1),M=(0,i.Z)(V,2),P=M[0],O=M[1],E=(0,o.useState)(""),G=(0,i.Z)(E,2),J=G[0],A=G[1],L=(0,o.useState)({}),B=(0,i.Z)(L,2),R=B[0],$=B[1],T=(0,o.useRef)(),D=(0,o.useState)(null),H=(0,i.Z)(D,2),W=H[0],X=H[1],Y=(0,o.useState)(3e5),K=(0,i.Z)(Y,2),Q=K[0],U=K[1],ee=(0,o.useState)(null),te=(0,i.Z)(ee,2),ne=te[0],re=te[1],ce=(0,o.useReducer)(C,S),ae=(0,i.Z)(ce,2),ie=ae[0],ue=ae[1],oe=(0,o.useState)([]),se=(0,i.Z)(oe,2),de=se[0],le=se[1],pe=(0,o.useState)([]),fe=(0,i.Z)(pe,2),me=fe[0],_e=fe[1],he=f.Z.useForm(),Ze=(0,i.Z)(he,1)[0],xe=(0,o.useState)([]),ge=(0,i.Z)(xe,2),ve=ge[0],be=ge[1],ye=(0,o.useState)(JSON.parse(localStorage.getItem("font_config"))),ke=(0,i.Z)(ye,1)[0],je=(0,o.useState)(!1),we=(0,i.Z)(je,2),Ne=we[0],ze=we[1],Se=(0,o.useState)(""),Ce=(0,i.Z)(Se,2),Fe=Ce[0],Ie=Ce[1],qe=(0,o.useState)(null),Ve=(0,i.Z)(qe,2),Me=(Ve[0],Ve[1],(0,o.useState)({range:{0:0,100:100},step:1,min:0,max:100})),Pe=(0,i.Z)(Me,2),Oe=Pe[0],Ee=Pe[1],Ge=function(){var e=(0,a.Z)((0,c.Z)().mark((function e(){var t,n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.OJ({page:1,limit:1e3});case 3:t=e.sent,n=t.data.data.list.filter((function(e){return"Active"===e.status})),le(n),Ze.setFieldsValue({host_id:n[0].id}),re(n[0]),Je(n[0].id),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=(0,a.Z)((0,c.Z)().mark((function e(t){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.rG(t);case 3:n=e.sent,r=n.data.data.bw.id,ue({type:"bw",bw_id:r}),Ze.setFieldsValue({bw_id:r}),re(n.data.data.data_center),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=(0,a.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ze.setFieldsValue({host_id:t}),He(),e.next=4,Je(t);case 4:return e.next=6,Le();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=(0,a.Z)((0,c.Z)().mark((function e(){var t,n,a,i,u,o,s,d;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ze.getFieldValue(),n=t.host_id,a=t.type,i={id:35,host_id:n,bw_type:a},e.prev=2,e.next=5,k.xp(i);case 5:o=e.sent,s=o.data.data.package,_e(s),d=s[0].id,ue({type:"network",package_id:d}),Ze.setFieldsValue({package_id:d}),$e(d,s[0].bw_price[0].min+s[0].bw_precision),q([]),ue({type:"size",size:null===(u=s[0])||void 0===u?void 0:u.bw_precision}),Ee((function(e){var t,n=s[0].bw_price[0].min,c=s[0].bw_price[s[0].bw_price.length-1].max,a=s[0].bw_precision;return{range:(t={},(0,r.Z)(t,n+a,n+a),(0,r.Z)(t,Math.floor(c/4),Math.floor(c/4)),(0,r.Z)(t,Math.floor(c/2),Math.floor(c/2)),(0,r.Z)(t,Math.floor(c/1.33),Math.floor(c/1.33)),(0,r.Z)(t,c,c),t),step:a,min:n,max:c}})),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(2);case 19:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),Be=function(e){var t=e.target.getAttribute("data-id");if(t===ie.config_options.package_id)return!1;ue({type:"network",package_id:t}),Ze.setFieldsValue({package_id:t});var n=me.filter((function(e){return 1*e.id===1*t})),c=n[0].bw_price[0].min,a=n[0].bw_price[n[0].bw_price.length-1].max,i=n[0].bw_precision;ue({type:"size",size:c+i}),Ee((function(e){var t;return{range:(t={},(0,r.Z)(t,c+i,c+i),(0,r.Z)(t,Math.floor(a/4),Math.floor(a/4)),(0,r.Z)(t,Math.floor(a/2),Math.floor(a/2)),(0,r.Z)(t,Math.floor(a/1.33),Math.floor(a/1.33)),(0,r.Z)(t,a,a),t),step:n[0].bw_precision,min:c,max:a}})),$e(t,c+i)},Re=function(e){var t="number"===typeof e?e:e.target.value;t>Oe.max&&(t=Oe.max),t<Oe.min&&(t=Oe.min),t%Oe.step!==0&&(t=t-t%Oe.step||Oe.step),ue({type:"size",size:t}),Ze.setFieldsValue({size:t}),$e("",t)},$e=function(){var e=(0,a.Z)((0,c.Z)().mark((function e(t){var n,r,a,i,u=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"",e.prev=1,be([]),r={package_id:t||ie.config_options.package_id,size:void 0!==n?n:ie.config_options.size},"default"===Ze.getFieldValue().type&&(r.size=0),e.next=8,k.xA(r);case 8:a=e.sent,i=a.data.data.list,be(i),ue({type:"duration_price_id",duration_price_id:i[0].id}),Te({duration_price_id:i[0].id,size:n}),q([]),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(1);case 18:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=(0,a.Z)((0,c.Z)().mark((function e(){var t,n,r,a,i,u,o,s,d,l,p=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},n=t.size,r=t.duration_price_id,a=Ze.getFieldValue(),i=a.bw_id,u=a.host_id,o=a.type,s=a.package_id,d={product_id:35,config_options:{bw_id:i,host_id:u,type:o,package_id:s,size:ie.config_options.size,duration_price_id:ie.config_options.duration_price_id}},void 0!==n&&(d.config_options.size=n),"default"===o&&(d.config_options.size=""),r&&(d.config_options.duration_price_id=r),e.prev=6,e.next=9,y.F5(d);case 9:l=e.sent,$(l.data.data),q([]),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(6);case 16:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=(0,a.Z)((0,c.Z)().mark((function e(){var n,r,a,i,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=T.current.input.value){e.next=4;break}return e.abrupt("return",!1);case 4:if(!I.find((function(e){return e.name===n}))){e.next=6;break}return e.abrupt("return",(0,l.vC)(t("cloud.tip31"),"error"));case 6:if(!I.find((function(e){return!e.overlay}))){e.next=8;break}return e.abrupt("return",(0,l.vC)(t("cloud.tip32"),"error"));case 8:return e.next=10,y.Td({promo_code:n,scene:"New",total:Number(R.price),cycles:[{product_id:ie.product_id,amount:R.price,billing_cycle_time:R.duration,config_options:{package_id:ie.config_options.package_id}}]});case 10:if(200!==(r=e.sent).data.status){e.next=17;break}if(a=r.data.data,i=a.overlay,u=a.discount,!(I.length>0)||i){e.next=15;break}return e.abrupt("return",(0,l.vC)(t("cloud.tip32"),"error"));case 15:q((function(e){var t=e;return e.push({name:n,num:u,overlay:i}),t})),O(!1);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),m.ZP.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}(),He=function(){q([])},We=function(t){W||X((function(n){return n=setInterval((0,a.Z)((0,c.Z)().mark((function r(){var a;return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.LX(t||Fe);case 2:if(a=r.sent,U((function(e){return e-2e3})),"Paid"!==a.data.code){r.next=9;break}return(0,l.vC)(a.data.msg,"success",(function(){e("/network/elastic_ip",{replace:!0})})),clearInterval(n),ze(!1),r.abrupt("return",!1);case 9:if("Paid"!==a.code&&0!==Q){r.next=13;break}return clearInterval(n),ze(!1),r.abrupt("return",!1);case 13:case"end":return r.stop()}}),r)}))),2e3)}))};return(0,o.useEffect)((0,a.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge();case 2:return e.next=4,Le();case 4:return e.abrupt("return",(function(){return clearInterval(W)}));case 5:case"end":return e.stop()}}),e)}))),[]),(0,N.jsxs)("div",{className:"create-ip com-content",children:[(0,N.jsxs)("div",{className:"com-card",children:[(0,N.jsx)("div",{className:"box data-center",children:(0,N.jsx)("div",{className:"com-tit",children:(0,N.jsx)("h1",{className:"tit",children:t("cloud.bas_btn2")+t("network.elastic_ip")})})}),(0,N.jsx)("div",{className:"box vpc",children:(0,N.jsxs)(f.Z,{name:"ipForm",layout:"vertical",form:Ze,initialValues:{type:"default",bw_id:0},children:[(0,N.jsx)(f.Z.Item,{label:t("menu.cloud"),name:"host_id",rules:[{required:!0,message:t("select")+t("menu.cloud")}],children:(0,N.jsx)(p.Z,{onChange:Ae,getPopupContainer:function(e){return e.parentElement},children:de.map((function(e){return(0,N.jsx)(z,{value:e.id,children:e.name},e.id)}))})}),(0,N.jsx)(f.Z.Item,{label:t("network.elastic_ip")+t("common.type"),name:"type",rules:[{required:!0,message:t("select")+t("menu.cloud")}],children:(0,N.jsxs)(_.Z.Group,{compact:!0,children:[(0,N.jsxs)(p.Z,{defaultValue:"default",onChange:function(e){Ze.setFieldsValue({type:e}),ue({type:"type",bw_type:e}),"default"===e&&ue({type:"size",size:""}),"independ"===e&&ue({type:"qty",qty:1}),Le()},getPopupContainer:function(e){return e.parentElement},children:[(0,N.jsx)(z,{value:"default",children:t("elastic.un_independ")},"default"),(0,N.jsx)(z,{value:"independ",children:t("elastic.independ")},"independ")]}),(0,N.jsx)("br",{}),(0,N.jsx)("span",{className:"s-tip",children:t("elastic.tip3")})]})}),"independ"===ie.config_options.type?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(f.Z.Item,{label:t("elastic.bw")+t("common.type"),name:"package_id",rules:[{required:!0,message:t("select")+t("elastic.bw")+t("common.type")}],children:(0,N.jsx)(h.Z,{gutter:{xs:8,sm:16,md:24,lg:30},children:me.map((function(e,t){return(0,N.jsx)(Z.Z,{xs:{span:24},md:{span:12},lg:{span:8},children:(0,N.jsx)("div",{className:"item c-hover ".concat(e.id===1*ie.config_options.package_id?"c-active":""),onClick:Be,"data-id":e.id,children:e.bw_type_name})},e.id)}))})}),(0,N.jsx)(f.Z.Item,{label:t("elastic.bw")+t("common.number"),name:"size",className:"bw_size",children:(0,N.jsxs)(_.Z.Group,{compact:!0,children:[(0,N.jsx)(x.Z,{marks:Oe.range,min:Oe.min+Oe.step,max:Oe.max,step:Oe.step,value:ie.config_options.size,onChange:function(e){ue({type:"size",size:e}),Ze.setFieldsValue({size:e})},onAfterChange:Re}),(0,N.jsx)(g.Z,{placement:"top",title:t("input")+Oe.step+t("elastic.tip4"),children:(0,N.jsx)(v.Z,{onBlur:Re,value:ie.config_options.size,controls:!1})}),(0,N.jsx)("span",{children:"Mbps"})]})})]}):null]})})]}),(0,N.jsx)("div",{className:"total-box",children:(0,N.jsxs)("div",{className:"content",children:[(0,N.jsx)("div",{className:"item",children:(0,N.jsxs)("div",{className:"l-config",children:[(0,N.jsxs)("p",{className:"tit",children:[t("cloud.area"),"\uff1a"]}),ne&&(0,N.jsxs)("p",{className:"des",children:[(0,N.jsx)("img",{src:n(85995)("./".concat(ne.country_code,".png")),alt:"",className:"country"}),(0,N.jsxs)("span",{children:[ne.country,"/",ne.city," \xa0 ",ne.area]})]})]})}),(0,N.jsxs)("div",{className:"item",children:["default"===ie.config_options.type&&(0,N.jsxs)("div",{className:"l-config",children:[(0,N.jsxs)("p",{className:"tit",children:[t("common.number"),"\uff1a"]}),(0,N.jsx)(v.Z,{onChange:function(e){ue({type:"qty",qty:e>999?999:e})},min:1,max:999,value:ie.qty})]}),(0,N.jsxs)("div",{className:"l-config",children:[(0,N.jsxs)("p",{className:"tit",children:[t("common.cycle"),"\uff1a"]}),ve.length>0&&(0,N.jsx)(p.Z,{onChange:function(e){ue({type:"duration_price_id",duration_price_id:e}),Te({duration_price_id:e})},className:"cycle",defaultValue:ve[0].id,getPopupContainer:function(e){return e.parentElement},optionLabelProp:"label",children:ve.map((function(e){return(0,N.jsxs)(z,{value:e.id,label:ke.currency_prefix+e.price+"/"+e.display_name,children:[ke.currency_prefix,e.price,"/",e.display_name]},e.price)}))})]})]}),(0,N.jsxs)("div",{className:"item",children:[(0,N.jsx)("div",{className:"l-config",children:(0,N.jsxs)("div",{className:"s-item",children:[(0,N.jsxs)("p",{className:"tit",children:[t("common.total_price"),"\uff1a"]}),R&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("p",{className:"price",children:[ke.currency_prefix,(0,N.jsx)("span",{className:"num",children:String((R.price*ie.qty-I.reduce((function(e,t){return e+1*t.num}),0)>=0?R.price*ie.qty-I.reduce((function(e,t){return e+1*t.num}),0):0).toFixed(2))}),"/",R.billing_cycle]}),(0,N.jsx)("div",{className:"discount-list",children:I.length>0&&I.map((function(e,n){return(0,N.jsxs)("p",{className:"item",children:[(0,N.jsxs)("span",{className:"num",children:["-",ke.currency_prefix,e.num]}),(0,N.jsxs)("span",{children:["(",t("common.discount_code")+e.name,")",(0,N.jsx)(w.Z,{onClick:function(){return function(e){q((function(t){var n=JSON.parse(JSON.stringify(t));return n.splice(e,1),n}))}(n)}})]})]},e.name)}))})]})]})}),(0,N.jsxs)("div",{className:"config",children:[(0,N.jsx)("p",{className:"tit"}),(0,N.jsxs)("div",{className:"bot",id:"bot",children:[(0,N.jsx)(b.Z,{placement:"bottomRight",getPopupContainer:function(){return document.getElementById("bot")},content:(0,N.jsxs)("div",{className:"discount",children:[(0,N.jsx)(_.Z,{placeholder:t("cloud.input_discount_code"),value:J,ref:T,onChange:function(e){A(e.target.value)}}),(0,N.jsx)("span",{className:"close",onClick:De,children:t("common.sure")})]}),trigger:"click",visible:P,onVisibleChange:function(e){O(e),A("")},children:(0,N.jsx)("span",{className:"discount_code",children:t("common.discount_code")})}),(0,N.jsx)("div",{className:"r-btn",children:(0,N.jsx)("p",{className:"checkout",onClick:function(){Ze.validateFields().then(function(){var e=(0,a.Z)((0,c.Z)().mark((function e(t){var n,r,a,i,u,o,s,d,l,p,f,_,h;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.host_id,r=t.type,a=ie.config_options,i=a.bw_id,u=a.package_id,o=a.size,s=a.duration_price_id,d=ie.qty,l=ie.customfield,p={product_id:35,config_options:{host_id:n,type:r,bw_id:i,package_id:u,size:o,duration_price_id:s},qty:d,customfield:l},"default"===r?p.config_options.size="":p.qty=1,f=I.length>0?I.map((function(e){return e.name})):[],p.customfield={promo_code:f},e.prev=6,e.next=9,y.Z1(p);case 9:200===(_=e.sent).data.status&&(h=_.data.data.order_id,ze(!0),Ie(h),We(h)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),m.ZP.error(e.t0.data.msg);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}())},children:t("common.checkout")})})]})]})]})]})}),Ne&&Fe&&(0,N.jsx)(j.Z,{orderId:Fe,timer:W})]})}},53754:function(){}}]);
//# sourceMappingURL=761.9583cc68.chunk.js.map